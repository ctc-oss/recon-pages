{"version":3,"sources":["context/GameContext.js","components/game/Scoreboard.js","util/data.js","components/game/Util.js","components/game/FullGame.js","util/misc.js","hooks/useWindowSize.js","components/game/Match.js","components/game/Practice.js","components/game/Menu.js","hooks/usePrevious.js","components/ImageDiff.js","components/ImageAnimation.js","components/Story.js","views/GameView.js","App.js","reportWebVitals.js","index.js"],"names":["GameContext","createContext","GameContextProvider","props","useState","players","name","color","selections","score","images","previousPracticeRounds","practiceRound","gameSettings","setGameSettings","Provider","value","children","Container","styled","div","Board","SideContainer","Side","Team","ScoreContainer","Score","Bottom","ScoreBoard","home","away","bottomDisplay","totalPossible","ScoreboardSide","player","style","scoreDisplay","percentageDisplay","toFixed","bottom","borderLeft","sanitizeJson","obj","Object","keys","reduce","all","x","p","toLowerCase","allGroups","data","Set","groups","gameData","a","fetch","allOptions","json","correctData","map","practiceOptions","groupNumber","filter","includes","gameOptions","items","size","r","Math","random","sort","b","slice","length","isDefined","undefined","CenteredOuter","CenteredInner","Centered","ToggleButtonCheckBoxWrapper","CheckButton","button","checked","left","ToggleButton","trueLabel","falseLabel","trueBgColor","falseBgColor","onToggle","defaultValue","onClick","right","GameButton","Emoji","className","label","symbol","symbols","Array","isArray","role","aria-label","String","fromCodePoint","Sidecar","RangeContainer","ControlLabel","RangeTrack","RangeHandle","RangeSlider","min","max","onChange","step","values","_value","renderTrack","renderThumb","SIZES","height","width","generateGameData","_gameData","i","correctAnswers","correct","parseInt","labelStyle","padding","fontSize","background","toDeerImage","img","index","image","tags","src","path","thumbnail","thumbnailWidth","thumbnailHeight","customOverlay","toImage","_img","title","findYouPlayer","findCarnacPlayer","SelectionsOverlayContainer","CheckButtonContainer","SelectionsOverlay","useContext","_carnac","_you","isSelected","Choices","useEffect","resetGame","onSelectImage","updated","you","hasOwnProperty","enableImageSelection","onClickThumbnail","tagStyle","showLightboxThumbnails","enableLightbox","original","updateFn","currentGameData","carnacAnswers","carnac","calculateScore","_selections","wrongAnswers","omittedAnswers","ChallengeCarnacContainer","ChallengeCarnac","selectionCount","textAlign","fontWeight","display","flexDirection","disabled","InformationContainer","Information","ResultsContainer","Results","marginTop","_winner","GameContainer","FullGame","minWidth","maxWidth","clean","k","styleDiv","getDiv","forEach","isDef","shuffle","arr","reduceRight","res","_","__","s","push","splice","Connection","fromId","toId","config","configOverrides","options","drawMode","lineOptions","start","document","getElementById","end","hide","startSocket","endSocket","l","LeaderLine","show","clearLines","linesRef","noAnimate","current","lines","remove","drawLine","key","chain","fns","duration","delay","t","Promise","resolve","setTimeout","useWindowSize","windowSize","setWindowSize","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","DraggableImageBase","DraggableImageElement","DraggableImagePlaceholder","between","findTarget","targets","dropLocation","rect","getBoundingClientRect","id","top","y","box","point","shift","moveDraggable","draggable","correctPosition","target","source","DraggableImage","targetIds","correctTarget","onDrag","imagePlaceholderId","draggableId","draggableDomRef","useRef","draggableRef","d","PlainDraggable","containment","snapped","snap","gravity","edge","moveTo","onDragEnd","line","console","log","reset","alt","ref","DraggableContainer","DraggableTargetDrop","DraggableTarget","dragging","marginLeft","toKey","Title","titles","learn","easy","hard","MatchLayout","matches","gameMode","sources","find","Date","getTime","Match","matchCount","allImages","useMemo","match","PRACTICE_IMAGE_SIZE","AI_NAME","COLORS","setCurrentIndex","demo","version","practiceRoundNumber","scrollingImages","url","allQuestionsAnswered","seenbefore","PracticeResultContainer","PracticeResultTitle","PracticeResult","question","agree","questionNumber","isCurrentImage","answer","waiting","text","incorrect","EndButtonsContainer","EndButtons","to","PracticeResultsContainer","PracticeResultsTitle","PracticeResultsSubtitle","h4","PracticeResults","currentImageIndex","ImageSliderOverrideStyles","currentIndex","Selectors","imageSize","imagePercent","paddingLeft","paddingTop","dangerouslySetInnerHTML","__html","property","colors","border","_bulletStyle","join","QuestionWithButtonsContainer","QuestionWithButtonsButtonContainer","QuestionText","QuestionWithButtons","onAnswer","TuningSideTileContainer","TuningSideTile","ProbabilityOuterContainer","Probability","previousLabel","percent","PictureLabel","changed","margin","animate","reveal","hideLabel","totalValue","lineWidth","dataEntry","fill","labelPosition","TuningsOuterContainer","TuningSelectContainer","TuningSelect","selectStyles","container","provided","indicatorSeparator","option","whiteSpace","content","icon","menu","singleValue","styles","isSearchable","Tunings","getImageDiv","onLoadImageVariant","defaultStyle","noise","setStyles","selectedVariant","setSelectedVariant","changeImage","transition","variants","variantLabel","updateImage","additionalStyles","toggle","probability","augmentVariants","startsWith","optionDecorations","hflip","vflip","replace","noop","decorate","object","decoration","fn","defaults","bind","decorationKey","noiseLevelVariants","noiseLevels","level","noiseLevel","Caption","SwitchModeContainer","SwitchModeButton","selected","SwitchMode","mode","onSwitchMode","labels","trick","toModes","toMode","PracticeVoteButtonsContainer","ImageControls","displayMode","setDisplayMode","loadedImage","setLoadedImage","defaultLoadedImageState","onSeenBeforeClick","guessed","caption","PracticeContainer","PracticeGameContainer","Practice","hideSideBar","imageState","setImageState","sliderRef","querySelectorAll","showBullets","showNavs","navStyle","onStartSlide","idx","borderBottomLeftRadius","borderTopLeftRadius","backgroundColor","h1","GameCards","GameCardContainer","GameCardTitle","GameCardButton","ButtonContainer","GameCard","links","effect","games","Stack","OrScroll","Menu","usePrevious","bgImage","dimension","isNaN","Difference","before","after","handleImgLoad","beforeStyle","position","afterStyle","onLoad","mixBlendMode","Fade","backgroundImage","opacity","Swipe","swiperStyle","overflow","ImageDiff","type","slider","animation","imageStyle","setImageStyle","diffValue","setDiffValue","React","viewProps","e","views","difference","fade","swipe","onInput","PictureAndInformation","Picture","Controls","Slides","Slide","Rotated","rotation","transform","RotatedText","StyledAnimateButton","ButtonSymbols","play","pause","AnimateButton","status","stateSymbols","stopped","playing","ImageAnimation","info","selectedIndex","setSelectedIndex","animating","setAnimating","nextIndex","outline","onMouseOver","ImageTitle","Scroller","ScrollContainer","ScrollContainer2","ScrollyHeaderSection","h2","ScrollyContentSection","ScrollyImageSection","ScrollySection","contentWidth","imageWidth","flexBasis","ScrollySectionLeftImage","RowFlexContainer","valign","FlowCharts","validate","elements","issues","hasPosition","hasPositionedElements","hasUserDefinedLinks","buildLinks","from","flat","FlowChartElementContainer","FlowChart","startAnimating","visible","chainLinkAnimation","betweenLinkDelay","prevAnimated","shouldAnimate","flowRef","handleScroll","AnimEvent","add","error","lineConfig","override","containerStyle","justifyContent","alignItems","flex","elementStyle","element","WeaknessWithAI","LabelTile","PuppiesToFoodFlowChart","PuppiesVsCroissantsImages","PuppiesOrFood","TitledElement","MiaFlowChart","endLabel","MembershipInferenceAttack","ModelInversionAttack","ReverseEngineeringDataPrototypes","TwentyQuestions","Story","viewState","setViewState","getElementsByClassName","onStepEnter","currentView","onStepExit","progress","onStepProgress","marginBottom","Modal","setAppElement","PageHeader","subtitle","GameModal","withRouter","history","isModalOpen","setModalOpen","toggleModal","isOpen","onRequestClose","contentLabel","alwaysShowTitle","mainButtonStyles","GameView","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2ccdaa58.chunk.js","sourcesContent":["import { useState, createContext } from \"react\"\n\nexport const GameContext = createContext()\n\nexport const GameContextProvider = (props) => {\n  const [gameSettings, setGameSettings] = useState({\n    players: [\n      { name: \"YOU\", color: \"green\", selections: [], score: null },\n      {\n        name: \"CARNAC\",\n        color: \"red\",\n        selections: [],\n        score: null,\n      },\n    ],\n    images: [],\n    previousPracticeRounds: [],\n    practiceRound: {},\n  })\n\n  return (\n    <GameContext.Provider value={[gameSettings, setGameSettings]}>\n      {props.children}\n    </GameContext.Provider>\n  )\n}\n","import styled from \"styled-components\"\n\nconst Container = styled.div`\n  margin-top: 2px;\n  background-color: #444;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  font-family: Futura;\n  min-width: 400px;\n  max-width: 400px;\n  width: 400px;\n`\n\nconst Board = styled.div`\n  margin: 6px;\n  border: 5px solid white;\n  border-radius: 10px;\n  flex-direction: row;\n`\n\nconst SideContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst Side = styled.div`\n  flex: 1;\n  text-align: center;\n`\nconst Team = styled.div`\n  padding: 10px;\n  text-align: center;\n  font-size: 24pt;\n  border-bottom: 5px solid white;\n  margin: 0;\n  font-weight: bold;\n`\nconst ScoreContainer = styled.div`\n  padding: 10px;\n`\nconst Score = styled.div`\n  font-size: 48pt;\n  font-family: Impact, sans-serif;\n`\nconst Bottom = styled.div`\n  font-size: 18;\n  padding: 5px;\n  border-top: 5px solid white;\n  font-weight: bold;\n  text-align: center;\n`\n\nconst ScoreBoard = ({\n  home,\n  away,\n  bottomDisplay = () => \"\",\n  totalPossible = 0,\n}) => {\n  const ScoreboardSide = ({ player, style = {} }) => {\n    const scoreDisplay =\n      totalPossible > 0 ? `${player.score} / ${totalPossible}` : player.score\n    const percentageDisplay =\n      totalPossible > 0 ? (\n        <div>({((player.score / totalPossible) * 100).toFixed()}%)</div>\n      ) : null\n    return (\n      <Side style={style}>\n        <Team style={{ color: player.color }}>{player.name}</Team>\n        <ScoreContainer>\n          <Score>{scoreDisplay}</Score>\n          {percentageDisplay}\n        </ScoreContainer>\n      </Side>\n    )\n  }\n\n  const bottom = bottomDisplay()\n\n  return (\n    <Container>\n      <Board>\n        <SideContainer>\n          <ScoreboardSide player={home} />\n          <ScoreboardSide\n            player={away}\n            style={{ borderLeft: \"3px solid white\" }}\n          />\n        </SideContainer>\n        {bottom ? <Bottom>{bottom}</Bottom> : null}\n      </Board>\n    </Container>\n  )\n}\n\nexport default ScoreBoard\n","const colors = [\"0,0,255\", \"255,0,0\", \"0,255,0\", \"255,0,255\"]\n\nconst defaultDataSet = {\n  borderWidth: 1,\n}\n\nconst dataSet = (index) => {\n  const color = colors[index]\n  const backgroundColor = `rgba(${color},0.4)`\n  const borderColor = `rgba(${color},0.7)`\n  return {\n    ...defaultDataSet,\n    backgroundColor,\n    borderColor,\n  }\n}\n\nconst selectionData = (data) =>\n  Object.keys(data.MI_class_results || {}).reduce(\n    (all, x) => ({ ...all, [x]: data.MI_class_results[x].mi_auc }),\n    {}\n  )\n\nexport const configurationKeys = (configurations) =>\n  Object.keys(configurations).filter(\n    (x) => typeof configurations[x] === \"object\"\n  )\n\nconst fetchConfigurationData = async (configuration) => {\n  const key = (x) => `${x.flavor}_${x.dataset}_${x.architecture}_${x.train}`\n  const filepath = (name) => `./data/${name}.json`\n  const filekey = key(configuration)\n  let results\n  try {\n    const response = await fetch(filepath(filekey))\n    results = await response.json()\n  } catch (e) {\n    console.log(`No data file available for configuration ${filekey}`)\n    const response = await fetch(filepath(\"missing_data\"))\n    results = await response.json()\n  }\n  return [filekey, results]\n}\n\nexport const configurationData = async (configuration) => {\n  const [key, json] = await fetchConfigurationData(configuration)\n  return {\n    key,\n    data: selectionData(json),\n  }\n}\n\nexport const chartData = (selections) => {\n  const selectionKeys = configurationKeys(selections)\n  const hasData = selectionKeys.reduce(\n    (all, x) => all && \"data\" in selections[x],\n    true\n  )\n  if (hasData) {\n    const labels = [\n      ...new Set(\n        selectionKeys.reduce(\n          (all, x) => [...all, ...Object.keys(selections[x].data || {})],\n          []\n        )\n      ),\n    ].sort((a, b) => parseInt(a) > parseInt(b))\n    const keyData = selectionKeys.reduce(\n      (all, x) => ({\n        ...all,\n        [selections[x].key]: {\n          data: selections[x].data,\n          label: `MI AUC (${selections[x].flavor}/${selections[x].dataset}/${selections[x].architecture}/${selections[x].train})`.toUpperCase(),\n        },\n      }),\n      {}\n    )\n    return {\n      labels,\n      datasets: Object.keys(keyData).map((x, i) => {\n        return {\n          ...dataSet(i),\n          label: keyData[x].label,\n          data: labels.map((y) => keyData[x].data[y]),\n        }\n      }),\n    }\n  } else return {}\n}\n\nconst sample = (items, size) =>\n  items\n    .map((x) => ({ x, r: Math.random() }))\n    .sort((a, b) => a.r - b.r)\n    .map((a) => a.x)\n    .slice(0, size || items.length)\n\nexport const PRACTICE_ROUND_IMAGE_COUNT = 5\nexport const GAME_IMAGE_COUNT = 12\n\nconst sanitizeJson = (obj) => {\n  const stringToBooleanOrOriginal = (p) =>\n    p && (p === \"true\" || p === \"false\") ? p.toLowerCase() === \"true\" : p\n  return Object.keys(obj).reduce(\n    (all, x) => ({\n      ...all,\n      [x]: stringToBooleanOrOriginal(obj[x]),\n    }),\n    {}\n  )\n}\n\n// const PRACTICE_SETS = [1, 2]\n// const PRACTICE_SETS = [1, 2, 3, 4, 5]\n\nconst allGroups = (data) =>\n  data.reduce((all, x) => [...new Set([...all, ...(x.groups || [])])], [])\n\nconst practiceSet = (images, groupNumber) => {\n  // setIndex = isDef(setIndex)\n  //   ? setIndex\n  //   : PRACTICE_SETS[Math.floor(Math.random() * PRACTICE_SETS.length)]\n  return images.filter((x) => x.groups && x.groups.includes(groupNumber))\n}\n\nexport const gameData = async () => {\n  // const allOptions = await fetch(\n  //   \"https://gitlab-int.ctc.com/RECON-GURU/interact/-/snippets/72/raw/master/game.json\",\n  //   {\n  //     method: \"GET\",\n  //     mode: \"no-cors\",\n  //   }\n  // )\n  const allOptions = await fetch(`./data/game-data.json`)\n  const data = await allOptions.json()\n  const correctData = data.map(sanitizeJson)\n  return {\n    practiceOptions: allGroups(correctData).reduce(\n      (all, x) => ({ ...all, [x]: practiceSet(correctData, x) }),\n      {}\n    ),\n    gameOptions: sample(correctData, GAME_IMAGE_COUNT),\n  }\n}\n\nexport const isDefined = (x) => x !== null && x !== undefined\n","import PropTypes from \"prop-types\"\nimport styled from \"styled-components\"\nimport \"./Game.css\"\nimport { isDefined } from \"../../util/data\"\nimport { Range } from \"react-range\"\n\nconst CenteredOuter = styled.div`\n  display: flex;\n  justify-content: space-around;\n  flex-direction: column;\n  height: 100%;\n`\nconst CenteredInner = styled.div`\n  display: flex;\n  justify-content: space-around;\n  flex-direction: row;\n  width: 100%;\n`\n\nexport const Centered = ({ children }) => (\n  <CenteredOuter>\n    <CenteredInner>{children}</CenteredInner>\n  </CenteredOuter>\n)\n\nconst ToggleButtonCheckBoxWrapper = styled.div`\n  position: relative;\n  background-color: lightgray;\n  padding: 5px;\n  border-radius: 4px;\n`\n\nconst CheckButton = styled.button`\n  background: ${({ checked, color }) => (checked ? color : \"gray\")};\n  padding: 5px;\n  color: ${({ checked }) => (checked ? \"white\" : \"black\")};\n  outline: none;\n  border: none;\n  border-radius: ${({ left }) => (left ? \"4px 0 0 4px\" : \"0 4px 4px 0\")};\n  transition: text-shadow 0.25s ease;\n  &:hover {\n    cursor: pointer;\n    text-shadow: ${({ checked }) =>\n      checked ? \"1px 1px 1px black;\" : \"1px 1px 1px lightgray;\"};\n  }\n`\n\nexport const ToggleButton = ({\n  trueLabel = \"YES\",\n  falseLabel = \"NO\",\n  trueBgColor,\n  falseBgColor,\n  onToggle,\n  defaultValue,\n}) => {\n  return (\n    <ToggleButtonCheckBoxWrapper>\n      <CheckButton\n        checked={isDefined(defaultValue) && defaultValue}\n        color={trueBgColor}\n        onClick={() => onToggle(true)}\n        left={true}\n      >\n        {trueLabel}\n      </CheckButton>\n      <CheckButton\n        checked={isDefined(defaultValue) && !defaultValue}\n        color={falseBgColor}\n        onClick={() => onToggle(false)}\n        right={true}\n      >\n        {falseLabel}\n      </CheckButton>\n    </ToggleButtonCheckBoxWrapper>\n  )\n}\n\nToggleButton.propTypes = {\n  onToggle: PropTypes.func.isRequired,\n  trueLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  falseLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n}\n\nexport const GameButton = styled.button`\n  border: 1px solid lightgray;\n  text-transform: uppercase;\n  font-family: Futura, sans-serif;\n  font-size: 1.4rem;\n  padding: 5px;\n  border-bottom: 7px solid grey;\n  color: darkslategray;\n  margin-top: 10px;\n  border-radius: 10px 10px 2px 2px;\n  outline: none;\n  cursor: pointer;\n  &:disabled {\n    cursor: default;\n    color: lightgray;\n  }\n  &:hover {\n    text-shadow: 1px 1px 1px #aaa;\n  }\n`\n\nexport const Emoji = ({ className, style, label, symbol }) => {\n  const symbols = Array.isArray(symbol) ? symbol : [symbol]\n  return (\n    <span className={className} style={style} role=\"img\" aria-label={label}>\n      {symbols.map((x) => String.fromCodePoint(x))}\n    </span>\n  )\n}\n\nexport const Sidecar = styled.div`\n  background-color: white;\n`\n\nconst RangeContainer = styled.div`\n  padding: 5px;\n  margin: 5px;\n`\n\nexport const ControlLabel = styled.div`\n  margin-bottom: 10px;\n  font-size: 0.9rem;\n  text-align: center;\n`\n\nconst RangeTrack = styled.div`\n  height: 6px;\n  width: 100%;\n  background-color: #ccc;\n`\n\nconst RangeHandle = styled.div`\n  height: 18px;\n  width: 18px;\n  background-color: #999;\n  border: 1px solid #555;\n  font-size: 0.7rem;\n  text-align: center;\n  line-height: 1.7;\n  outline: none;\n  border-radius: 4px;\n`\n\nexport const RangeSlider = ({\n  value,\n  min,\n  max,\n  onChange,\n  step = 1,\n  label = null,\n}) => {\n  return (\n    <RangeContainer>\n      {label ? <ControlLabel>{label}</ControlLabel> : null}\n      <Range\n        step={step}\n        min={min}\n        max={max}\n        values={[value]}\n        onChange={(values) => {\n          const [_value] = values\n          if (_value !== value) {\n            onChange(_value)\n          }\n        }}\n        renderTrack={({ props, children }) => (\n          <RangeTrack {...props}>{children}</RangeTrack>\n        )}\n        renderThumb={({ props }) => (\n          <RangeHandle {...props}>{value}</RangeHandle>\n        )}\n      />\n    </RangeContainer>\n  )\n}\n","import { GameContext } from \"../../context/GameContext\"\nimport { useContext, useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport Gallery from \"react-grid-gallery\"\nimport CheckButton from \"react-grid-gallery/lib/CheckButton\"\nimport ScoreBoard from \"./Scoreboard\"\nimport { Centered, GameButton, Sidecar } from \"./Util\"\nimport { gameData, isDefined, GAME_IMAGE_COUNT } from \"../../util/data\"\nimport \"./Game.css\"\n\nconst SIZES = {\n  thumbnail: {\n    height: 32,\n    width: 32,\n  },\n  grid: {\n    width: 710,\n  },\n}\n\nconst generateGameData = async () => {\n  const _gameData = await gameData()\n  const images = _gameData.gameOptions.reduce(\n    (all, x, i) => ({ ...all, [i]: x }),\n    {}\n  )\n  return {\n    gameData: _gameData,\n    images,\n    correctAnswers: Object.keys(images)\n      .filter((i) => images[i].correct)\n      .map((i) => parseInt(i)),\n  }\n}\n\nconst labelStyle = {\n  padding: \"5px\",\n  fontSize: \"75%\",\n  color: \"white\",\n  background: \"rgba(0,0,0,0.5)\",\n}\n\nconst toImage = (image, index, tags = () => []) => {\n  const img = {\n    src: `img/${image.path}`,\n    thumbnail: `img/${image.path}`,\n    thumbnailWidth: SIZES.thumbnail.width,\n    thumbnailHeight: SIZES.thumbnail.height,\n    index,\n    correct: image.correct,\n    customOverlay: <SelectionsOverlay index={index} />,\n  }\n  img.tags = tags(img) || []\n  return img\n}\nconst toDeerImage = (img, index) =>\n  toImage(img, index, (_img) => [\n    {\n      value: `${img.label}`,\n      title: `COMPY Says: ${img.label}`,\n    },\n  ])\n\nconst findYouPlayer = (gameSettings) =>\n  gameSettings && gameSettings.players && gameSettings.players.length\n    ? gameSettings.players[0]\n    : null\n\nconst findCarnacPlayer = (gameSettings) =>\n  gameSettings && gameSettings.players && gameSettings.players.length\n    ? gameSettings.players[1]\n    : null\n\nconst SelectionsOverlayContainer = styled.div`\n  color: red;\n  font-weight: bold;\n  text-align: right;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: ${({ correct }) =>\n    correct ? \"rgba(75, 75, 75, 0.8)\" : \"rgba(75, 75, 75, 0.0)\"};\n  width: 100%;\n  height: 100%;\n`\n\nconst CheckButtonContainer = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0%;\n`\n\nconst SelectionsOverlay = ({ index }) => {\n  const [gameSettings] = useContext(GameContext)\n  const _carnac = findCarnacPlayer(gameSettings)\n  const _you = findYouPlayer(gameSettings)\n  return (\n    <SelectionsOverlayContainer\n      correct={isDefined(_you.score) && !gameSettings.images[index].correct}\n    >\n      {_carnac.score && _carnac.selections.includes(parseInt(index)) ? (\n        <CheckButtonContainer>\n          <CheckButton color={_carnac.color} isSelected={true} />\n        </CheckButtonContainer>\n      ) : null}\n    </SelectionsOverlayContainer>\n  )\n}\n\nconst Choices = () => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n\n  useEffect(() => {\n    resetGame(gameSettings, setGameSettings) // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const onSelectImage = (index) => {\n    const updated = { ...gameSettings }\n    const you = findYouPlayer(updated)\n    if (you.score) return\n    var img = updated.images[index]\n    if (img.hasOwnProperty(\"isSelected\")) img.isSelected = !img.isSelected\n    else img.isSelected = true\n    you.selections = updated.images\n      .map((x, index) => ({ ...x, index }))\n      .filter((x) => x.isSelected)\n      .map((x) => x.index)\n    setGameSettings(updated)\n  }\n\n  const you = findYouPlayer(gameSettings)\n  return (\n    <div>\n      <Gallery\n        images={gameSettings.images}\n        enableImageSelection={!you.score}\n        onSelectImage={onSelectImage}\n        onClickThumbnail={onSelectImage}\n        tagStyle={labelStyle}\n        showLightboxThumbnails={true}\n        enableLightbox={false}\n      />\n    </div>\n  )\n}\n\nconst resetGame = async (original, updateFn) => {\n  const updated = { ...original }\n  const currentGameData = await generateGameData()\n  updated.currentGameData = currentGameData\n  updated.images = Object.keys(currentGameData.images).map((i) =>\n    toDeerImage(currentGameData.images[i], i)\n  )\n  const _carnac = findCarnacPlayer(updated)\n  const _you = findYouPlayer(updated)\n  _carnac.score = null\n  _you.score = null\n\n  const carnacAnswers = () => {\n    return Object.keys(currentGameData.images)\n      .filter((i) => {\n        const img = currentGameData.images[i]\n        return (\n          (\"carnac\" in img && img.carnac) ||\n          (!(\"carnac\" in img) && img.label === \"deer\")\n        )\n      })\n      .map((i) => parseInt(i))\n  }\n  _carnac.selections = carnacAnswers()\n  _you.selections = []\n  updateFn(updated)\n}\n\nconst calculateScore = (gameData, selections) => {\n  const _selections = selections || []\n  const wrongAnswers = _selections.filter(\n    (x) => !gameData.correctAnswers.includes(x)\n  )\n  const omittedAnswers = gameData.correctAnswers.filter(\n    (x) => !_selections.includes(x)\n  )\n\n  return (\n    Object.keys(gameData.images).length -\n    wrongAnswers.length -\n    omittedAnswers.length\n  )\n}\n\nconst ChallengeCarnacContainer = styled.div`\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nconst ChallengeCarnac = ({ onClick }) => {\n  const [gameSettings] = useContext(GameContext)\n  const selectionCount = gameSettings.players[0].selections.length\n  return (\n    <ChallengeCarnacContainer>\n      <div>\n        <p>\n          COMPY has seen a lot of deer images before, and he is really good at\n          identifying a deer when he sees one.\n        </p>\n        <p>\n          Can you tell which of the following deer images COMPY may have seen?\n          There is at least one.\n        </p>\n        <p>Select them and then hit the \"Challenge Carnac\" button (below).</p>\n        <p>\n          You will be playing against Carnac and whomever gets more correct,\n          wins!\n        </p>\n        <p style={{ textAlign: \"center\", fontWeight: \"bold\" }}>\n          {selectionCount > 0\n            ? `${selectionCount} picture(s) selected`\n            : \"1 or more selections required to play\"}\n        </p>\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <GameButton onClick={onClick} disabled={selectionCount === 0}>\n          Challenge Carnac!\n        </GameButton>\n      </div>\n    </ChallengeCarnacContainer>\n  )\n}\n\nconst InformationContainer = styled(Sidecar)`\n  display: flex;\n  margin-top: 2px;\n  height: 99%;\n  border: 1px solid darkgray;\n  border-top-right-radius: 15px;\n  border-bottom-right-radius: 15px;\n`\n\nconst Information = () => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const carnac = findCarnacPlayer(gameSettings)\n\n  const loadScores = () => {\n    const updated = { ...gameSettings }\n    const _carnac = findCarnacPlayer(updated)\n    const _you = findYouPlayer(updated)\n    _carnac.score = calculateScore(\n      gameSettings.currentGameData,\n      _carnac.selections\n    )\n    _you.score = calculateScore(gameSettings.currentGameData, _you.selections)\n    setGameSettings(updated)\n  }\n  return (\n    <InformationContainer>\n      {carnac.score ? <Results /> : <ChallengeCarnac onClick={loadScores} />}\n    </InformationContainer>\n  )\n}\n\nconst ResultsContainer = styled.div`\n  width: 100%;\n  margin: 10px;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nconst Results = () => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const carnac = findCarnacPlayer(gameSettings)\n  const you = findYouPlayer(gameSettings)\n  const playAgain = () => resetGame(gameSettings, setGameSettings)\n  const winner = () =>\n    you.score > carnac.score ? you : you.score < carnac.score ? carnac : null\n  const winnerMessage = () => {\n    const _winner = winner()\n    return _winner\n      ? `The winner is ${_winner.name}!`\n      : `${you.name} tied ${carnac.name}!`\n  }\n  return (\n    <ResultsContainer>\n      <div style={{ marginTop: 15 }}>\n        <ScoreBoard\n          home={you}\n          away={carnac}\n          bottomDisplay={winnerMessage}\n          totalPossible={GAME_IMAGE_COUNT}\n        />\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"column\", width: \"100%\" }}>\n        <GameButton onClick={playAgain}>Play Again!</GameButton>\n      </div>\n    </ResultsContainer>\n  )\n}\n\nconst GameContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst FullGame = () => {\n  return (\n    <Centered>\n      <GameContainer>\n        <div style={{ minWidth: SIZES.grid.width, maxWidth: SIZES.grid.width }}>\n          <Choices />\n        </div>\n        <div style={{ maxWidth: 440, minWidth: 440 }}>\n          <Information />\n        </div>\n      </GameContainer>\n    </Centered>\n  )\n}\n\nexport default FullGame\n","import LeaderLine from \"leader-line-new\"\n\nexport const clean = (obj) =>\n  Object.keys(obj)\n    .filter((k) => obj[k] != null)\n    .reduce((a, k) => ({ ...a, [k]: obj[k] }), {})\n\nexport const styleDiv = (getDiv, style) => {\n  const div = getDiv()\n  Object.keys(style).forEach((k) => (div.style[k] = style[k]))\n}\n\nexport const isDef = (x) => x !== null && x !== undefined\n\n// https://stackoverflow.com/a/56749849/1072068\nexport const shuffle = (arr) =>\n  [...arr].reduceRight(\n    (\n      res,\n      _,\n      __,\n      s // eslint-disable-next-line no-sequences\n    ) => (res.push(s.splice(0 | (Math.random() * s.length), 1)[0]), res),\n    []\n  )\n\nexport const Connection = (fromId, toId, config) => {\n  const configOverrides = {\n    ...{ options: {}, drawMode: \"draw\" },\n    ...(config || {}),\n  }\n  const lineOptions = {\n    start: document.getElementById(fromId),\n    end: document.getElementById(toId),\n    hide: true,\n    path: \"straight\",\n    startSocket: \"right\",\n    endSocket: \"left\",\n    ...configOverrides.options,\n  }\n  const l = new LeaderLine(lineOptions)\n  l.show(configOverrides.drawMode)\n  return l\n}\n\nexport const HoverConnection = (fromId, toId, config) => {\n  const configOverrides = {\n    ...{ options: {}, drawMode: \"draw\" },\n    ...(config || {}),\n  }\n\n  const lineOptions = {\n    // start: document.getElementById(fromId),\n    start: LeaderLine.mouseHoverAnchor(document.getElementById(fromId)),\n    end: LeaderLine.pointAnchor(document.getElementById(toId), {\n      x: 60,\n      y: 20,\n    }),\n    hide: true,\n    path: \"straight\",\n    startPlug: \"square\",\n    startSocket: \"right\",\n    endSocket: \"left\",\n    ...configOverrides.options,\n  }\n  const l = new LeaderLine(lineOptions)\n  l.show(configOverrides.drawMode)\n  return l\n}\n\nexport const clearLines = (linesRef, noAnimate) => {\n  if (!linesRef.current) return\n  const lineKeys = Object.keys(linesRef.current.lines || {})\n  lineKeys.forEach((x) => {\n    linesRef.current.lines[x].remove()\n    // if (noAnimate) linesRef.current.lines[x].remove()\n    // else linesRef.current.lines[x].hide(\"draw\")\n    delete linesRef.current.lines[x]\n  })\n}\n\nexport const drawLine = (fromId, toId, linesRef, config) => {\n  if (!linesRef.current) return\n  const key = `${fromId}-${toId}`\n  if (!linesRef.current.lines) linesRef.current.lines = {}\n  if (linesRef.current.lines && linesRef.current.lines[key]) {\n    linesRef.current.lines[key].remove()\n  }\n  linesRef.current.lines[key] = Connection(fromId, toId, config)\n}\n\nexport const chain = async (fns, duration) => {\n  const delay = (t) =>\n    new Promise((resolve) => {\n      setTimeout(() => {\n        resolve()\n      }, t)\n    })\n\n  for (let x of fns) {\n    x()\n    await delay(duration || 0)\n  }\n}\n","import { useState, useEffect } from \"react\"\n\n// https://usehooks.com/useWindowSize/\nconst useWindowSize = () => {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  })\n\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      })\n    }\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize)\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize()\n\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize)\n  }, []) // Empty array ensures that effect is only run on mount\n\n  return windowSize\n}\n\nexport default useWindowSize\n","import { useEffect, useRef, useMemo } from \"react\"\nimport styled from \"styled-components\"\nimport PlainDraggable from \"plain-draggable\"\n// import LeaderLine from \"leader-line-new\"\nimport { shuffle, Connection } from \"../../util/misc\"\nimport useWindowSize from \"../../hooks/useWindowSize\"\n\nconst SIZES = {\n  tile: {\n    height: 100,\n    width: 100,\n  },\n}\n\nconst DraggableImageBase = styled.div`\n  height: ${SIZES.tile.height}px;\n  width: ${SIZES.tile.width}px;\n  border: 1px solid slategray;\n  border-radius: 5px;\n  background-image: ${({ src }) => `url(${src})`};\n  background-size: cover;\n`\n\nconst DraggableImageElement = styled(DraggableImageBase)`\n  z-index: 99;\n  position: absolute;\n  opacity: 95%;\n  border: 1px solid black;\n`\n\nconst DraggableImagePlaceholder = styled(DraggableImageBase)``\n\nconst between = (x, min, max) => x >= min && x <= max\nconst pointInBox = (point, box) =>\n  between(point.left, box.left, box.right) &&\n  between(point.top, box.top, box.bottom)\n\nconst findTarget = (targets, dropLocation) =>\n  targets\n    .map((x) => {\n      const rect = x.getBoundingClientRect()\n      return {\n        id: x.id,\n        top: rect.y,\n        left: rect.x,\n        bottom: rect.y + rect.height,\n        right: rect.x + rect.width,\n      }\n    })\n    .filter((x) => pointInBox(dropLocation, x))\n    .map((x) => x.id)\n    .slice(0, 1)\n    .shift()\n\n// const Connection = (fromId, toId, options = {}) => {\n//   const l = new LeaderLine(\n//     document.getElementById(fromId),\n//     document.getElementById(toId),\n//     {\n//       hide: true,\n//       path: \"straight\",\n//       startSocket: \"right\",\n//       endSocket: \"left\",\n//       ...options,\n//     }\n//   )\n//   l.show(\"draw\")\n//   return l\n// }\n\nconst moveDraggable = (draggable) => {\n  const correctPosition = document\n    .getElementById(draggable.target || draggable.source)\n    .getBoundingClientRect()\n  draggable.left = correctPosition.x\n  draggable.top = correctPosition.y\n}\n\nconst DraggableImage = ({\n  index,\n  image,\n  targetIds,\n  correctTarget,\n  onDrag = () => null,\n}) => {\n  const windowSize = useWindowSize()\n  const imagePlaceholderId = `image${index}`\n  const draggableId = `draggable${index}`\n  const draggableDomRef = useRef()\n  const draggableRef = useRef()\n  useEffect(() => {\n    if (!draggableDomRef || !draggableDomRef.current) return\n    const d = new PlainDraggable(draggableDomRef.current)\n    d.containment = document.getElementById(\"root\")\n    d.source = imagePlaceholderId\n    draggableRef.current = d\n    let snapped = false\n    const targets = targetIds.map((x) => document.getElementById(x))\n    d.snap = {\n      targets,\n      gravity: 50,\n      edge: \"inside\",\n    }\n    d.onDrag = (moveTo) => {\n      snapped = moveTo.snapped\n      onDrag(true)\n    }\n    d.onDragEnd = (moveTo) => {\n      if (snapped) {\n        if (d.line) d.line.remove()\n        d.target = findTarget(targets, moveTo)\n        if (imagePlaceholderId && d.target) {\n          d.line = Connection(imagePlaceholderId, draggableId, {\n            options: {\n              color: correctTarget === d.target ? \"green\" : \"red\",\n            },\n          })\n        } else {\n          console.log(\"no valid target\")\n        }\n      } else {\n        reset()\n      }\n      onDrag(false)\n      moveDraggable(d)\n    }\n\n    const reset = () => {\n      if (d) {\n        if (d.line) {\n          d.line.remove()\n          d.line = null\n        }\n        d.target = null\n      }\n    }\n    const cleanup = () => {\n      if (d) {\n        reset()\n        d.remove()\n      }\n    }\n\n    moveDraggable(d)\n    return cleanup // Remove line on unmount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  useEffect(() => moveDraggable(draggableRef.current), [windowSize])\n  return (\n    <>\n      <DraggableImagePlaceholder\n        id={imagePlaceholderId}\n        src={`match-img/${image}`}\n        draggable={false}\n        alt={image}\n      />\n      <DraggableImageElement\n        src={`match-img/${image}`}\n        id={draggableId}\n        alt={image}\n        ref={draggableDomRef}\n      />\n    </>\n  )\n}\n\nconst DraggableContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n`\n\nconst DraggableTargetDrop = styled(DraggableImageBase)`\n  background-color: #ddd;\n  border: 1px dashed black;\n`\n\nconst DraggableTarget = ({ id, image, dragging }) => {\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n      <DraggableTargetDrop id={id} dragging={dragging} />\n      <DraggableImageBase\n        src={`match-img/${image}`}\n        alt={image}\n        style={{ marginLeft: 10 }}\n      />\n    </div>\n  )\n}\n\nconst SideContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  background-color: slategray;\n  padding: 25px;\n  border-radius: 10px;\n  margin: 20px 0;\n`\n\nconst toKey = (x, index) => `${x}_${index}`\n\nconst Title = styled.div`\n  margin-top: 50px;\n  font-size: 3rem;\n  text-shadow: 2px 2px 2px slategray;\n`\n\nconst titles = {\n  learn: \"Learn to Match\",\n  easy: \"Easy Match Game\",\n  hard: \"Hard Match Game\",\n}\n\nconst MatchLayout = ({ matches, gameMode }) => {\n  const findTargetId = (image) =>\n    Object.keys(matches).find((key) => matches[key] === image)\n\n  const sources = Object.values(matches)\n  const targetIds = shuffle(Object.keys(matches))\n  return (\n    <DraggableContainer>\n      <SideContainer>\n        {sources.map((x, i) => (\n          <DraggableImage\n            key={toKey(x, i)}\n            index={i}\n            image={x}\n            targetIds={targetIds}\n            correctTarget={findTargetId(x)}\n          />\n        ))}\n      </SideContainer>\n      <Title>{titles[gameMode] || \"Match Game\"}</Title>\n      <SideContainer key={new Date().getTime()}>\n        {targetIds.map((x, i) => (\n          <DraggableTarget key={toKey(x, i)} id={x} image={x} />\n        ))}\n      </SideContainer>\n    </DraggableContainer>\n  )\n}\n\nconst Match = ({ gameMode = \"easy\", matchCount = 5 }) => {\n  const allImages = useMemo(\n    () => ({\n      \"bird_image_1.png\": {\n        match: {\n          learn: \"bird_image_1.png\",\n          easy: \"match_game_cifar_robust_images_bird_threshold_512.png\",\n          hard: \"match_game_cifar_diluted_robust_images_bird_threshold_512.png\",\n        },\n      },\n      \"cat_image_18.png\": {\n        match: {\n          learn: \"cat_image_18.png\",\n          easy: \"match_game_cifar_robust_images_cat_threshold_512.png\",\n          hard: \"match_game_cifar_diluted_robust_images_cat_threshold_512.png\",\n        },\n      },\n      \"deer_image_13.png\": {\n        match: {\n          learn: \"deer_image_13.png\",\n          easy: \"match_game_cifar_robust_images_deer_threshold_512.png\",\n          hard: \"match_game_cifar_diluted_robust_images_deer_threshold_512.png\",\n        },\n      },\n      \"dog_image_16.png\": {\n        match: {\n          learn: \"dog_image_16.png\",\n          easy: \"match_game_cifar_robust_images_dog_threshold_512.png\",\n          hard: \"match_game_cifar_diluted_robust_images_dog_threshold_512.png\",\n        },\n      },\n      \"horse_image_16.png\": {\n        match: {\n          learn: \"horse_image_16.png\",\n          easy: \"match_game_cifar_robust_images_horse_threshold_512.png\",\n          hard:\n            \"match_game_cifar_diluted_robust_images_horse_threshold_512.png\",\n        },\n      },\n      \"boat_image_10.png\": {\n        match: {\n          learn: \"boat_image_10.png\",\n          easy: \"match_game_cifar_robust_images_boat_threshold_512.png\",\n          hard: \"match_game_cifar_diluted_robust_images_boat_threshold_512.png\",\n        },\n      },\n    }),\n    []\n  )\n  const gameImageKeys = shuffle(Object.keys(allImages)).slice(0, matchCount)\n  const matches = gameImageKeys.reduce(\n    (all, x) => ({ ...all, [x]: allImages[x].match[gameMode] }),\n    {}\n  )\n  return <MatchLayout matches={matches} gameMode={gameMode} />\n}\n\nexport default Match\n","import { GameContext } from \"../../context/GameContext\"\nimport { useContext, useState, useEffect, useRef, useMemo } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport styled from \"styled-components\"\nimport { gameData, isDefined } from \"../../util/data\"\nimport { clean, styleDiv, isDef } from \"../../util/misc\"\nimport {\n  Centered,\n  ToggleButton,\n  GameButton,\n  Sidecar,\n  RangeSlider,\n  ControlLabel,\n} from \"./Util\"\nimport { PieChart } from \"react-minimal-pie-chart\"\nimport SimpleImageSlider from \"react-simple-image-slider\"\nimport Select from \"react-select\"\nimport \"./Game.css\"\n\nconst PRACTICE_IMAGE_SIZE = {\n  container: {\n    width: 661,\n    height: 600,\n  },\n  image: {\n    width: 300,\n    height: 300,\n  },\n}\n\nconst AI_NAME = \"COMPY\"\nconst COLORS = {\n  yes: \"#4caf50\",\n  no: \"#dc004d\",\n  neutral: \"antiquewhite\",\n}\n\nconst resetGame = async (original, updateFn, setCurrentIndex, demo) => {\n  const updated = { ...original }\n  updated.version = isDefined(updated.version) ? updated.version + 1 : 1\n  updated.practiceRoundNumber = demo\n    ? 3\n    : updated.practiceRoundNumber === 1\n    ? 2\n    : 1\n  // updated.practiceRoundNumber = updated.practiceRoundNumber === 1 ? 2 : 1\n  // updated.practiceRoundNumber = 3\n  console.log(`Practice reset to Round ${updated.practiceRoundNumber}`)\n  const currentGameData = await generateGameData(updated.practiceRoundNumber)\n  if (updated.practiceRound && Object.keys(updated.practiceRound).length) {\n    updated.previousPracticeRounds.push({ ...updated.practiceRound })\n  }\n  updated.currentGameData = currentGameData\n  setCurrentIndex(0)\n  updated.practiceRound = currentGameData.scrollingImages.reduce(\n    (all, x, i) => ({\n      ...all,\n      [x.path]: { ...x },\n    }),\n    {}\n  )\n  updateFn(updated)\n}\n\nconst generateGameData = async (practiceRoundNumber) => {\n  const _gameData = await gameData()\n  const images = _gameData.practiceOptions[practiceRoundNumber].reduce(\n    (all, x, i) => ({ ...all, [i]: x }),\n    {}\n  )\n  const scrollingImages = Object.keys(images).map((i) => ({\n    ...images[i],\n    url: `img/${images[i].path}`,\n  }))\n  return {\n    gameData: _gameData,\n    images,\n    scrollingImages,\n    correctAnswers: Object.keys(images)\n      .filter((i) => images[i].correct)\n      .map((i) => parseInt(i)),\n  }\n}\n\nconst answer = (property, gameSettings, img) =>\n  !(img in gameSettings.practiceRound)\n    ? null\n    : gameSettings.practiceRound[img][property]\n\nconst allQuestionsAnswered = (gameSettings) =>\n  Object.keys(gameSettings.practiceRound).reduce(\n    (all, x) => all && isDefined(gameSettings.practiceRound[x].seenbefore),\n    true\n  )\n\nconst PracticeResultContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px 0 10px 10px;\n  border-top: 1px solid lightgray;\n  background-color: ${(props) => (props.current ? \"lightgray\" : \"none\")};\n  transition: background-color 1s ease;\n`\n\nconst PracticeResultTitle = styled.b`\n  color: ${(props) => props.color};\n  &:before {\n    content: \"${(props) => (props.current ? \"> \" : \"\")}\";\n  }\n`\n\nconst PracticeResult = ({\n  question: { path, correct, agree, seenbefore },\n  questionNumber,\n  isCurrentImage,\n}) => {\n  const answer = !isDefined(seenbefore)\n    ? \"waiting\"\n    : (seenbefore && correct) || (!seenbefore && !correct)\n    ? \"correct\"\n    : \"incorrect\"\n  const displaySettings = {\n    waiting: {\n      text: \"Waiting on your guess...\",\n    },\n    correct: {\n      text: `You know ${AI_NAME} pretty well!`,\n      color: COLORS.yes,\n    },\n    incorrect: {\n      text: `Sorry, you don't know ${AI_NAME} very well.`,\n      color: COLORS.no,\n    },\n  }\n  const display = displaySettings[answer]\n  return (\n    <PracticeResultContainer current={isCurrentImage}>\n      <PracticeResultTitle\n        color={display.color}\n        current={isCurrentImage}\n        title={path}\n      >\n        Image {questionNumber}\n      </PracticeResultTitle>\n      <div>{display.text}</div>\n    </PracticeResultContainer>\n  )\n}\n\nconst EndButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`\nconst EndButtons = ({ resetGame }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const challengeCarnac = () => {\n    const updated = { ...gameSettings }\n    updated.previousPracticeRounds.push({ ...updated.practiceRound })\n    updated.practiceRound = {}\n    setGameSettings(updated)\n  }\n  return (\n    <EndButtonsContainer>\n      <GameButton onClick={resetGame}>More Practice</GameButton>\n      <Link to=\"/game\">\n        <GameButton onClick={challengeCarnac}>Challenge Carnac!</GameButton>\n      </Link>\n    </EndButtonsContainer>\n  )\n}\n\nconst PracticeResultsContainer = styled(Sidecar)`\n  border-top: 1px solid slategray;\n  border-bottom: 1px solid slategray;\n  border-right: 1px solid slategray;\n  border-top-right-radius: 15px;\n  padding: 10px;\n  border-bottom-right-radius: 15px;\n  min-width: 350px;\n  max-width: 350px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nconst PracticeResultsTitle = styled.div`\n  border-bottom: 2px solid darkgray;\n  font-size: 1.9rem;\n  font-weight: 500;\n  text-align: center;\n  padding-bottom: 12px;\n  margin: 10px 0;\n  text-shadow: 2px 2px 2px slategray;\n`\n\nconst PracticeResultsSubtitle = styled.h4`\n  margin: 10px;\n`\n\nconst PracticeResults = ({ resetGame, currentImageIndex, demo }) => {\n  const [gameSettings] = useContext(GameContext)\n  return (\n    <PracticeResultsContainer>\n      <div>\n        <PracticeResultsTitle>\n          Practice Round {!demo ? gameSettings.practiceRoundNumber : null}\n        </PracticeResultsTitle>\n        <PracticeResultsSubtitle>\n          Make a selection for each image:\n        </PracticeResultsSubtitle>\n        {Object.keys(gameSettings.practiceRound).map((x, i) => (\n          <PracticeResult\n            key={i}\n            questionNumber={i + 1}\n            isCurrentImage={i === currentImageIndex}\n            question={gameSettings.practiceRound[x]}\n          />\n        ))}\n      </div>\n      <div>\n        {!demo && allQuestionsAnswered(gameSettings) ? (\n          <EndButtons resetGame={resetGame} />\n        ) : null}\n      </div>\n    </PracticeResultsContainer>\n  )\n}\n\nconst ImageSliderOverrideStyles = ({ images, currentIndex }) => {\n  const [gameSettings] = useContext(GameContext)\n  const Selectors = {\n    bullet: (index) =>\n      `#practice-container button[data-id*=\"bullet\"]:nth-child(${index + 1})`,\n    image: () =>\n      '#practice-container div[style*=\"background-size: cover\"][style*=\"background-image:\"][style*=\".png\"]',\n  }\n\n  const _bulletStyle = (index, colors) => {\n    const border =\n      currentIndex === index ? \"; border: 2px solid blue !important;\" : \"\"\n    // return `#practice-container button[data-id*=\"bullet\"]:nth-child(${\n    //   index + 1\n    // }) { background: linear-gradient(90deg, ${colors[0]} 50%, ${\n    //   colors[1]\n    // } 50%) !important; ${border} }\n    //   `\n    return `${Selectors.bullet(index)} { background-color: ${\n      colors[0]\n    } !important; ${border} }\n        `\n  }\n  // const bulletStyle = (index, colors) =>\n  //   bulletContainerChildIndices\n  //     .map((i) => _bulletStyle(i, index, colors))\n  //     .join(\"\\n\")\n  // const bulletStyle = _bulletStyle(index, colors)\n  const bulletStyles = () =>\n    images.map((_, i) => {\n      // const agree = answer(\"agree\", gameSettings, images[i].path)\n      const seenbefore = answer(\"seenbefore\", gameSettings, images[i].path)\n      const toColor = (x) => (x == null ? \"white\" : x ? COLORS.yes : COLORS.no)\n      // return _bulletStyle(i, [toColor(agree), toColor(seenbefore)])\n      return _bulletStyle(i, [toColor(seenbefore)])\n    })\n\n  const imageSize = {\n    width:\n      PRACTICE_IMAGE_SIZE.image.width / PRACTICE_IMAGE_SIZE.container.width,\n    height:\n      PRACTICE_IMAGE_SIZE.image.height / PRACTICE_IMAGE_SIZE.container.height,\n  }\n  const imagePercent = {\n    width: parseInt(imageSize.width * 100),\n    height: parseInt(imageSize.height * 100),\n  }\n  const paddingLeft =\n    (PRACTICE_IMAGE_SIZE.container.width - PRACTICE_IMAGE_SIZE.image.width) / 2\n  const paddingTop =\n    (PRACTICE_IMAGE_SIZE.container.height - PRACTICE_IMAGE_SIZE.image.height) /\n    2\n\n  const imageStyles = () => [\n    `${Selectors.image()} {left: ${paddingLeft}px !important; top: ${paddingTop}px !important; width: ${\n      imagePercent.width\n    }% !important; height: ${\n      imagePercent.height\n    }% !important; border-radius: 5px; box-shadow: 0 0 5px #000000;}`,\n  ]\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: [...bulletStyles(), ...imageStyles()].join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst QuestionWithButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: slategray;\n  color: white;\n  padding: 10px;\n  border-radius: 10px;\n  height: 60px;\n  margin-bottom: 45px;\n  pointer-events: all;\n  &:first-child {\n    margin-left: 15px;\n  }\n  &:last-child {\n    margin-right: 15px;\n  }\n`\nconst QuestionWithButtonsButtonContainer = styled.div`\n  padding-top: 5px;\n  padding-bottom: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`\nconst QuestionText = styled.div`\n  font-size: 0.9rem;\n`\nconst QuestionWithButtons = ({ question, onAnswer, defaultValue }) => (\n  <QuestionWithButtonsContainer>\n    <QuestionText>{question}</QuestionText>\n    <QuestionWithButtonsButtonContainer>\n      <ToggleButton\n        defaultValue={defaultValue}\n        onToggle={onAnswer}\n        trueBgColor={COLORS.yes}\n        falseBgColor={COLORS.no}\n        // trueLabel={<Emoji symbol=\"0x2714\" />}\n        // falseLabel={<Emoji symbol=\"0x2716\" />}\n        trueLabel=\"YES\"\n        falseLabel=\"NO\"\n      />\n    </QuestionWithButtonsButtonContainer>\n  </QuestionWithButtonsContainer>\n)\n\nconst TuningSideTileContainer = styled.div`\n  position: absolute;\n  z-index: 2;\n  top: 130px;\n  width: 180px;\n  height: 295px;\n`\n\nconst TuningSideTile = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: slategray;\n  padding: 10px;\n  color: white;\n  border-radius: 15px;\n  width: 75%;\n  text-align: center;\n`\n\nconst ProbabilityOuterContainer = styled(TuningSideTileContainer)`\n  right: 0px;\n`\n\nconst Probability = ({ previousLabel, label, value }) => {\n  const percent = (value * 100).toFixed(1)\n  return (\n    <ProbabilityOuterContainer>\n      <Centered>\n        <TuningSideTile>\n          <div>\n            {AI_NAME} says <br />\n            <PictureLabel\n              changed={isDef(previousLabel) && label !== previousLabel}\n            >\n              {label}\n            </PictureLabel>{\" \"}\n            with a confidence of\n          </div>\n          <div style={{ margin: \"0 30px 0 30px\" }}>\n            <PieChart\n              animate\n              reveal={100}\n              data={[\n                { value: percent, color: \"#ccc\" },\n                { value: 100 - percent, color: \"#777\", hideLabel: true },\n              ]}\n              totalValue={100}\n              lineWidth={30}\n              label={({ dataEntry }) =>\n                dataEntry.hideLabel ? null : `${dataEntry.value}%`\n              }\n              labelStyle={{\n                fontSize: \"1.1rem\",\n                fill: \"white\",\n              }}\n              labelPosition={0}\n            />\n          </div>\n        </TuningSideTile>\n      </Centered>\n    </ProbabilityOuterContainer>\n  )\n}\n\nconst TuningsOuterContainer = styled(TuningSideTileContainer)`\n  left: 0px;\n`\n\nconst TuningSelectContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n`\n\nconst TuningSelect = (props) => {\n  const selectStyles = {\n    container: (provided) => ({ ...provided, width: \"100%\" }),\n    indicatorSeparator: (provided) => ({ ...provided, display: \"none\" }),\n    option: (provided, { data }) => ({\n      ...provided,\n      textAlign: \"left\",\n      whiteSpace: \"nowrap\",\n      color: \"black\",\n      fontSize: \"0.9rem\",\n      \":before\": {\n        content: `${data.icon ? `'${data.icon}'` : \"''\"}`,\n        width: \"15px\",\n        padding: \"0 5px 0 0 !important\",\n        display: \"inline-block\",\n        textAlign: \"center\",\n      },\n    }),\n    menu: (provided) => ({\n      ...provided,\n      width: \"fit-content\",\n    }),\n    singleValue: (provided) => ({\n      ...provided,\n      fontSize: \"0.8rem\",\n    }),\n  }\n\n  return <Select styles={selectStyles} isSearchable={false} {...props} />\n}\n\nconst Tunings = ({ image, getImageDiv, onLoadImageVariant }) => {\n  const defaultStyle = {\n    noise: 0,\n  }\n  const [styles, setStyles] = useState(defaultStyle)\n  const [selectedVariant, setSelectedVariant] = useState(null)\n  const changeImage = (key) =>\n    styleDiv(getImageDiv, {\n      transition: \"none\",\n      \"background-image\":\n        !styles[key] && key in image.variants && \"path\" in image.variants[key]\n          ? `url(\"img/${image.variants[key].path}\")`\n          : `url(\"img/${image.path}\")`,\n    })\n\n  const variantLabel = (key) => {\n    return (image.variants[key] || image).label\n  }\n  const resetImage = () => {\n    console.log(\"Resetting image....\")\n    changeImage(\"unknown\")\n    onLoadImageVariant({})\n    setStyles({ ...defaultStyle })\n  }\n\n  const updateImage = (key, additionalStyles = {}) => {\n    const toggle = !styles[key]\n    changeImage(key)\n    onLoadImageVariant(\n      clean({\n        probability: toggle\n          ? key in image.variants\n            ? image.variants[key].probability\n            : null\n          : null,\n        label: variantLabel(key),\n      })\n    )\n    setStyles({ ...defaultStyle, [key]: toggle, ...additionalStyles })\n  }\n  const addNoise = (noiseLevel) =>\n    updateImage(`noise${noiseLevel}`, { noise: noiseLevel })\n\n  const augmentVariants = Object.keys(image.variants || {}).filter(\n    (x) => !x.startsWith(\"noise\")\n  )\n  const optionDecorations = {\n    hflip: {\n      label: () => \"Horizontal Flip\",\n      icon: () => \"\\\\21C4\",\n    },\n    vflip: {\n      label: () => \"Vertical Flip\",\n      icon: () => \"\\\\21C5\",\n    },\n    \"rot*\": {\n      label: (x) => `${x.replace(\"rot\", \"Rotate \")}°`,\n      icon: () => \"\\\\21BB\",\n    },\n  }\n\n  const noop = () => undefined\n  const decorate = (object, property, decoration, key) =>\n    (object[property] = (decoration[property] || noop)(key))\n\n  const decorateOption = (key) => {\n    const defaults = {\n      value: key,\n      label: key,\n      fn: updateImage.bind(null, key),\n    }\n    let decoration = undefined\n    if (key in optionDecorations) {\n      decoration = optionDecorations[key]\n    } else {\n      const decorationKey = Object.keys(optionDecorations)\n        .filter((x) => x.includes(\"*\"))\n        .find((x) => key.startsWith(x.replace(\"*\", \"\")))\n      if (decorationKey) {\n        decoration = optionDecorations[decorationKey]\n      }\n    }\n\n    if (decoration) {\n      decorate(defaults, \"label\", decoration, key)\n      decorate(defaults, \"icon\", decoration, key)\n    }\n\n    return defaults\n  }\n\n  const options = [\n    {\n      value: \"normal\",\n      label: \"Normal\",\n      fn: resetImage,\n    },\n    ...augmentVariants.map(decorateOption),\n  ]\n\n  const noiseLevelVariants = Object.keys(image.variants || {})\n    .filter((x) => x.startsWith(\"noise\"))\n    .map((x) => parseInt(x.replace(\"noise\", \"\")))\n  const noiseLevels = [0, ...noiseLevelVariants]\n\n  return (\n    <TuningsOuterContainer>\n      <Centered>\n        <TuningSideTile>\n          <ControlLabel>Apply Filter:</ControlLabel>\n          <TuningSelectContainer>\n            <TuningSelect\n              options={options}\n              value={selectedVariant || options[0]}\n              onChange={(x) => {\n                setSelectedVariant(x)\n                x.fn()\n              }}\n            />\n          </TuningSelectContainer>\n          <RangeSlider\n            label=\"Add Noise:\"\n            step={1}\n            min={0}\n            max={Math.max(...noiseLevels)}\n            value={styles.noise}\n            onChange={(level) => {\n              setSelectedVariant(null)\n              addNoise(level)\n            }}\n          />\n        </TuningSideTile>\n      </Centered>\n    </TuningsOuterContainer>\n  )\n}\n\nconst Caption = styled.div`\n  position: absolute;\n  z-index: 5;\n  background-color: slategray;\n  color: white;\n  padding: 8px;\n  height: 35px;\n  border-bottom-right-radius: 8px;\n  border-top-left-radius: 15px;\n  font-size: 1.4rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n`\n\nconst SwitchModeContainer = styled.div`\n  position: absolute;\n  right: 0;\n  z-index: 5;\n  background-color: slategray;\n  color: white;\n  padding: 8px;\n  border-bottom-left-radius: 8px;\n  font-size: 1.2rem;\n  height: 35px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n`\n\nconst SwitchModeButton = styled.button`\n  border: 0;\n  outline: none;\n  background: none;\n  font-size: 1.2rem;\n  color: ${({ selected }) => (selected ? \"black\" : \"white\")};\n  flex: 1;\n  font-family: Futura;\n  transition: text-shadow 0.25s ease;\n  &:hover {\n    cursor: pointer;\n    text-shadow: 1px 1px 1px black;\n  }\n`\n\nconst SwitchMode = ({ mode, onSwitchMode }) => {\n  const labels = {\n    trick: \"Back to Game\",\n  }\n  // const label = mode in labels ? labels[mode] : `Trick ${AI_NAME}?`\n  const label = mode in labels ? labels[mode] : `Learn More`\n  const toModes = {\n    trick: null,\n  }\n  const toMode = mode in toModes ? toModes[mode] : \"trick\"\n  return (\n    <SwitchModeContainer>\n      <SwitchModeButton onClick={() => onSwitchMode(toMode)}>\n        {label}\n      </SwitchModeButton>\n    </SwitchModeContainer>\n  )\n}\n\nconst PracticeVoteButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  position: absolute;\n  pointer-events: none;\n  width: 100%;\n  bottom: 0px;\n  z-index: 1;\n`\n\nconst PictureLabel = styled.div`\n  border-radius: 5px;\n  display: inline-block;\n  padding-left: 4px;\n  padding-right: 4px;\n  color: ${(props) => (props.changed ? \"white\" : \"#333\")};\n  background-color: ${(props) => (props.changed ? \"#dc004d\" : \"white\")};\n  border: 1px solid lightgray;\n  border-color: ${(props) => (props.changed ? \"antiquewhite\" : \"lightgray\")};\n  transition: background-color 1s ease;\n  font-style: italic;\n`\n\nconst ImageControls = ({ getImageDiv, images, index, onChange }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const fallbackProbability = 0.5\n  const [displayMode, setDisplayMode] = useState(null)\n  const [loadedImage, setLoadedImage] = useState({})\n  const image = images[index]\n  const defaultLoadedImageState = useMemo(\n    () =>\n      image\n        ? {\n            probability: image.probability || fallbackProbability,\n            label: image.label,\n          }\n        : { probability: fallbackProbability, label: \"unknown\" },\n    [image]\n  )\n  useEffect(() => {\n    setLoadedImage(defaultLoadedImageState)\n  }, [index, defaultLoadedImageState])\n\n  if (!images) return null\n\n  const resetImage = () => {\n    styleDiv(getImageDiv, {\n      \"background-image\": `url(\"img/${image.path}\")`,\n    })\n    setLoadedImage(defaultLoadedImageState)\n  }\n  const onClickUpdateProperty = (property, guessed) => {\n    const updated = { ...gameSettings }\n    updated.practiceRound[images[index].path][property] = guessed\n    setGameSettings(updated)\n  }\n  // const onAgreementClick = onClickUpdateProperty.bind(null, \"agree\")\n  const onSeenBeforeClick = onClickUpdateProperty.bind(null, \"seenbefore\")\n\n  const question = gameSettings.practiceRound[images[index].path]\n  const caption =\n    loadedImage.label === \"deer\" ? (\n      <div>This is a deer, and {AI_NAME} agrees</div>\n    ) : (\n      <div>\n        This is a deer, but {AI_NAME} thinks its a{\" \"}\n        <PictureLabel\n          changed={\n            isDef(loadedImage.previousLabel) &&\n            loadedImage.label !== loadedImage.previousLabel\n          }\n          title={`Previous: ${loadedImage.previousLabel || \"none\"}`}\n        >\n          {loadedImage.label}\n        </PictureLabel>\n      </div>\n    )\n  return (\n    <>\n      {displayMode !== \"trick\" ? <Caption>{caption}</Caption> : null}\n      {images[index].variants ? (\n        <SwitchMode\n          mode={displayMode}\n          onSwitchMode={(mode) => {\n            resetImage()\n            setDisplayMode(mode)\n            onChange(clean({ displayMode: mode }))\n          }}\n        />\n      ) : null}\n      {displayMode && displayMode === \"trick\" ? (\n        <Tunings\n          image={images[index]}\n          getImageDiv={getImageDiv}\n          onLoadImageVariant={(x) => {\n            setLoadedImage({\n              ...defaultLoadedImageState,\n              ...x,\n              previousLabel: loadedImage.label,\n            })\n            onChange({ ...defaultLoadedImageState, ...x, displayMode })\n          }}\n          probability={loadedImage.probability}\n        />\n      ) : null}\n      {displayMode && displayMode === \"trick\" ? (\n        <Probability\n          value={loadedImage.probability}\n          previousLabel={loadedImage.previousLabel}\n          label={loadedImage.label}\n        />\n      ) : null}\n      <ImageSliderOverrideStyles images={images} currentIndex={index} />\n      {displayMode !== \"trick\" ? (\n        <PracticeVoteButtonsContainer>\n          {/* <QuestionWithButtons\n            question=\"Do you agree with COMPY?\"\n            onAnswer={onAgreementClick.bind(null)}\n            defaultValue={question.agree}\n          /> */}\n          <QuestionWithButtons\n            question={`Do you think ${AI_NAME} was trained on this image?`}\n            onAnswer={onSeenBeforeClick.bind(null)}\n            defaultValue={question.seenbefore}\n          />\n        </PracticeVoteButtonsContainer>\n      ) : null}\n    </>\n  )\n}\n\nconst PracticeContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst PracticeGameContainer = styled.div`\n  position: relative;\n`\n\nconst Practice = ({ demo, hideSideBar }) => {\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const [imageState, setImageState] = useState({})\n  const reset = () =>\n    resetGame(gameSettings, setGameSettings, setCurrentIndex, demo)\n  const sliderRef = useRef()\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(reset, [])\n\n  const currentImage = () => {\n    const img = sliderRef.current.querySelectorAll(\n      'div[style*=\"background-image:\"][style*=\".png\"]'\n    )[1] // Take the second image, the first is the transition image\n    return img\n  }\n\n  if (\n    !gameSettings.currentGameData ||\n    !gameSettings.currentGameData.scrollingImages\n  )\n    return null\n\n  return gameSettings.currentGameData ? (\n    <Centered>\n      <PracticeContainer id=\"practice-container\">\n        <PracticeGameContainer ref={sliderRef}>\n          <ImageControls\n            getImageDiv={currentImage}\n            images={gameSettings.currentGameData.scrollingImages}\n            index={currentIndex}\n            onChange={setImageState}\n          />\n          <SimpleImageSlider\n            key={gameSettings.version}\n            width={PRACTICE_IMAGE_SIZE.container.width}\n            height={PRACTICE_IMAGE_SIZE.container.height}\n            images={gameSettings.currentGameData.scrollingImages}\n            showBullets={imageState.displayMode !== \"trick\"}\n            showNavs={imageState.displayMode !== \"trick\"}\n            navStyle={2}\n            onStartSlide={(idx) => {\n              setCurrentIndex(idx - 1)\n            }}\n            style={{\n              borderBottomLeftRadius: !hideSideBar ? 15 : null,\n              borderTopLeftRadius: !hideSideBar ? 15 : null,\n              backgroundColor: null,\n              border: \"1px solid slategray\",\n            }}\n          />\n        </PracticeGameContainer>\n        {!hideSideBar ? (\n          <PracticeResults\n            resetGame={reset}\n            currentImageIndex={currentIndex}\n            demo={demo}\n          />\n        ) : null}\n      </PracticeContainer>\n    </Centered>\n  ) : null\n}\n\nexport default Practice\n","import { Centered, GameButton } from \"./Util\"\nimport styled from \"styled-components\"\nimport { Link } from \"react-router-dom\"\nimport ReactTooltip from \"react-tooltip\"\n\nconst Container = styled.div`\n  border-radius: 10px;\n  background-color: antiquewhite;\n  box-shadow: 0 0 4px gray;\n  text-align: center;\n  padding: 40px;\n`\n\nconst Title = styled.h1`\n  font-family: Futura;\n  font-size: 4rem;\n`\n\nconst GameCards = styled.div`\n  display: inline;\n`\n\nconst GameCardContainer = styled.div`\n  display: inline-block;\n  border: 1px solid gray;\n  background-color: lightslategray;\n  color: white;\n  text-shadow: 2px 2px 2px darkslategray;\n  border-radius: 15px;\n  padding: 10px;\n  /* width: 180px; */\n  margin-right: 10px;\n  box-shadow: 1px 1px 4px grey;\n`\n\nconst GameCardTitle = styled.div`\n  font-size: 1.6rem;\n  margin: 15px;\n`\n\nconst GameCardButton = styled(GameButton)`\n  margin-right: 10px;\n`\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  margin-right: -10px;\n`\n\nconst GameCard = ({ title, links }) => {\n  return (\n    <GameCardContainer>\n      <GameCardTitle>{title}</GameCardTitle>\n      <ButtonContainer>\n        {links.map((x) => (\n          <Link key={x.to} to={x.to}>\n            <GameCardButton\n              {...{ \"data-tip\": x.disabled ? \"Coming soon\" : null }}\n            >\n              {x.title || \"Play\"}\n            </GameCardButton>\n          </Link>\n        ))}\n      </ButtonContainer>\n      <ReactTooltip effect=\"solid\" />\n    </GameCardContainer>\n  )\n}\n\nconst games = [\n  {\n    title: \"20 Questions\",\n    links: [\n      { title: \"Learn\", to: \"/practice\" },\n      { title: \"Play\", to: \"/game\" },\n    ],\n  },\n  {\n    title: \"Match Game\",\n    links: [\n      { title: \"Learn\", to: \"/match/learn\" },\n      { title: \"Easy\", to: \"/match/easy\" },\n      { title: \"Hard\", to: \"/match/hard\" },\n    ],\n  },\n]\n\nconst Stack = styled.div`\n  display: flex;\n  flex-direction: column;\n`\nconst OrScroll = styled.div`\n  margin: 20px;\n  text-align: center;\n  &::after {\n    font-size: 1.4rem;\n    content: \"or scroll down to learn the story behind the games...\";\n  }\n`\n\nconst Menu = () => {\n  return (\n    <>\n      <Centered>\n        <Stack>\n          <Container>\n            <Title>Play A Game</Title>\n            <GameCards>\n              {games.map((x) => (\n                <GameCard key={x.title} {...x} />\n              ))}\n            </GameCards>\n            {/* <p title={`Running in ${process.env.NODE_ENV} mode`}>\n          COMPY has seen a lot of deer images before, and he is really good at\n          identifying a deer when he sees one.\n        </p>\n        <p>\n          Can you tell which of the following deer images COMPY may have seen?\n        </p>\n        <p>\n          Click Practice to scroll through the pictures one at a time and test\n          your knowledge about COMPY.\n        </p>\n        <p>\n          When you are ready, you can click Play to play a game of who knows\n          COMPY best.\n        </p>\n        */}\n          </Container>\n          <OrScroll />\n        </Stack>\n      </Centered>\n    </>\n  )\n}\n\nexport default Menu\n","import { useRef, useEffect } from \"react\"\n\n// https://blog.logrocket.com/how-to-get-previous-props-state-with-react-hooks/\nconst usePrevious = (value) => {\n  const ref = useRef()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n\nexport default usePrevious\n","import React, { useState } from \"react\"\n\nconst bgImage =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAQMAAAC3R49OAAAABlBMVEX5+fn///8pDrwNAAAAFElEQVQI12NgsP/AQAz+f4CBGAwAJIIdTTn0+w0AAAAASUVORK5CYII=\"\n\nconst dimension = (x) => (isNaN(x) || !x ? null : x)\n\nconst Difference = ({ before, after, height, width, alt, handleImgLoad }) => {\n  const style = {\n    position: \"relative\",\n  }\n  const beforeStyle = {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n  }\n  const afterStyle = {\n    ...beforeStyle,\n  }\n\n  return (\n    <div className=\"ImageDiff_inner--difference\" style={style}>\n      <div className=\"ImageDiff__before\" style={beforeStyle}>\n        <img\n          src={before}\n          alt={alt}\n          height={height}\n          width={width}\n          onLoad={handleImgLoad}\n        />\n      </div>\n      <div className=\"ImageDiff__after\" style={afterStyle}>\n        <img\n          src={after}\n          alt={alt}\n          height={height}\n          width={width}\n          style={{ mixBlendMode: \"difference\" }}\n          onLoad={handleImgLoad}\n        />\n      </div>\n    </div>\n  )\n}\n\nconst Fade = ({ before, after, height, width, alt, handleImgLoad, value }) => {\n  let style = {\n    backgroundImage: `url(${bgImage})`,\n    height,\n    width,\n    margin: 0,\n    position: \"absolute\",\n  }\n\n  let beforeStyle = {\n    ...style,\n  }\n\n  let afterStyle = {\n    opacity: 1 - value,\n    ...style,\n  }\n\n  return (\n    <div className=\"ImageDiff__inner--fade\" style={style}>\n      <div className=\"ImageDiff__before\" style={beforeStyle}>\n        <img\n          src={before}\n          alt=\"\"\n          height={height}\n          width={width}\n          onLoad={handleImgLoad}\n        />\n      </div>\n      <div className=\"ImageDiff__after\" style={afterStyle}>\n        <img\n          src={after}\n          alt={alt}\n          height={height}\n          width={width}\n          onLoad={handleImgLoad}\n        />\n      </div>\n    </div>\n  )\n}\n\nconst Swipe = ({\n  before,\n  after,\n  height = 0,\n  width = 0,\n  alt = \"\",\n  handleImgLoad,\n  value,\n}) => {\n  let style = {\n    backgroundImage: `url(${bgImage})`,\n    width,\n    height,\n    margin: 0,\n    position: \"absolute\",\n  }\n\n  let beforeStyle = {\n    ...style,\n  }\n\n  let afterStyle = {\n    right: 0,\n    ...style,\n  }\n\n  let swipePadding = 2\n  let swiperStyle = {\n    borderLeft: \"1px solid #999\",\n    height: height + swipePadding,\n    margin: 0,\n    overflow: \"hidden\",\n    position: \"absolute\",\n    right: -swipePadding,\n    width: width * (1 - value),\n  }\n\n  return (\n    <div className=\"ImageDiff__inner--swipe\" style={style}>\n      <div className=\"ImageDiff__before\" style={beforeStyle}>\n        <img\n          src={before}\n          alt={alt}\n          height={dimension(height)}\n          width={dimension(width)}\n          onLoad={handleImgLoad}\n        />\n      </div>\n      <div className=\"ImageDiff--swiper\" style={swiperStyle}>\n        <div className=\"ImageDiff__after\" style={afterStyle}>\n          <img\n            src={after}\n            alt=\"\"\n            height={dimension(height)}\n            width={dimension(width)}\n            onLoad={handleImgLoad}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst ImageDiff = (props) => {\n  const {\n    type,\n    height,\n    width,\n    value = 0,\n    style,\n    slider,\n    animate,\n    animation,\n  } = props\n  const [imageStyle, setImageStyle] = useState({ ...style, height, width })\n  const [diffValue, setDiffValue] = useState(value)\n\n  React.useEffect(() => {\n    if (animate || animation) {\n      const { start = diffValue, end = 1, step = 0.02, delay = 50 } =\n        animation || {}\n\n      if (\n        (value > end && start + step <= end) ||\n        (value < end && start + step >= end)\n      ) {\n        setDiffValue(end)\n      } else setTimeout(() => setDiffValue(start + step), delay)\n    }\n  }, [value, diffValue, animate, animation])\n\n  const handleImgLoad = (e) => {\n    if (!height && !width) {\n      const { height, width } = e.target\n      setImageStyle({ ...style, height, width })\n    }\n  }\n\n  const viewProps = {\n    ...props,\n    ...imageStyle,\n    value: diffValue,\n    handleImgLoad,\n  }\n  // console.log(viewProps)\n\n  const views = {\n    difference: <Difference {...viewProps} />,\n    fade: <Fade {...viewProps} />,\n    swipe: <Swipe {...viewProps} />,\n  }\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: imageStyle.width,\n      }}\n    >\n      <div\n        className=\"ImageDiff\"\n        style={{ display: \"inline-block\", ...imageStyle }}\n      >\n        {views[type] || views[\"difference\"]}\n      </div>\n      {slider ? (\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          value={diffValue}\n          onInput={(e) => setDiffValue(e.target.value)}\n        />\n      ) : null}\n    </div>\n  )\n}\n\nexport default ImageDiff\n","import React, { useState } from \"react\"\nimport styled from \"styled-components\"\nimport { Emoji } from \"./game/Util\"\n\n// Inspired by https://github.com/distillpub/post--communicating-with-interactive-articles/blob/master/src/diagrams/horse.svelte\n\nconst Container = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n  background-color: whitesmoke;\n`\nconst PictureAndInformation = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\nconst Picture = styled.img`\n  margin: 25px;\n  height: 250px;\n  width: auto;\n  border-radius: 5px;\n`\nconst Information = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 15px 15px 0;\n  /* padding: 15px; */\n`\nconst Controls = styled.div`\n  display: flex;\n  flex-direction: row;\n`\nconst Slides = styled.div`\n  text-align: center;\n  padding: 10px;\n  border-top: 1px solid gray;\n`\nconst Slide = styled.img`\n  height: 100px;\n  width: auto;\n  margin-right: 5px;\n  cursor: crosshair;\n  padding-bottom: 3px;\n  border-bottom: ${({ selected }) =>\n    selected ? \"5px solid midnightblue\" : \"5px solid rgba(0,0,0,0)\"};\n`\n\nconst Rotated = ({ rotation = 90, children, style }) => (\n  <div style={{ ...style, transform: `rotate(${rotation}deg)` }}>\n    {children}\n  </div>\n)\n\nconst RotatedText = (props) => (\n  <Rotated style={{ fontSize: props.size }} {...props}></Rotated>\n)\n\nconst StyledAnimateButton = styled.button`\n  border: 2px solid slategray;\n  border-radius: 50%;\n  outline: none;\n  height: 30px;\n  width: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ButtonSymbols = {\n  play: <Emoji symbol=\"0x25B6\" style={{ paddingLeft: 3 }} />,\n  pause: <RotatedText size={23}>=</RotatedText>,\n}\n\nconst AnimateButton = ({ status = \"stopped\", onClick }) => {\n  const stateSymbols = {\n    stopped: ButtonSymbols.play,\n    playing: ButtonSymbols.pause,\n  }\n  return (\n    <StyledAnimateButton onClick={onClick}>\n      {stateSymbols[status]}\n    </StyledAnimateButton>\n  )\n}\n\nconst ImageAnimation = ({ images, info, width, delay = 150 }) => {\n  const [selectedIndex, setSelectedIndex] = useState(0)\n  const [animating, setAnimating] = useState(false)\n  React.useEffect(() => {\n    if (animating) {\n      const nextIndex =\n        selectedIndex < images.length - 1 ? selectedIndex + 1 : 0\n      setTimeout(() => setSelectedIndex(nextIndex), delay)\n    }\n  }, [animating, selectedIndex, setSelectedIndex, images, delay])\n\n  return (\n    <Container style={{ width }}>\n      <PictureAndInformation>\n        <Picture src={images[selectedIndex]} alt=\"\" />\n        <Information>\n          <div>{info}</div>\n          <Controls>\n            <AnimateButton\n              selectedIndex={selectedIndex}\n              status={animating ? \"playing\" : \"stopped\"}\n              onClick={() => setAnimating(!animating)}\n            />\n            <input\n              type=\"range\"\n              min={0}\n              max={images.length - 1}\n              step={1}\n              value={selectedIndex}\n              style={{ outline: \"none\" }}\n              onInput={(e) => setSelectedIndex(parseInt(e.target.value))}\n            />\n          </Controls>\n        </Information>\n      </PictureAndInformation>\n      <Slides>\n        {images.map((x, i) => (\n          <Slide\n            key={`slide-${i}`}\n            src={x}\n            onMouseOver={() => {\n              if (!animating) setSelectedIndex(i)\n            }}\n            selected={i === selectedIndex}\n          />\n        ))}\n      </Slides>\n    </Container>\n  )\n}\n\nexport default ImageAnimation\n","import { useState, useEffect, useRef } from \"react\"\nimport { Scrollama, Step } from \"react-scrollama\"\nimport { chain, clearLines, drawLine } from \"../util/misc\"\n\nimport { usePrevious } from \"../hooks\"\nimport ImageDiff from \"../components/ImageDiff\"\nimport ImageAnimation from \"../components/ImageAnimation\"\n\nimport styled from \"styled-components\"\nimport AnimEvent from \"anim-event\"\n\nimport Practice from \"../components/game/Practice\"\n\nconst ImageTitle = styled.h4`\n  text-align: center;\n  margin: 0 0 5px 0;\n`\n\nconst Scroller = styled.div`\n  flex-basis: 100%;\n`\n\nconst ScrollContainer = styled.div`\n  padding: 40vh 2vw 70vh;\n  display: flex;\n  justify-content: space-between;\n`\n\nconst ScrollContainer2 = styled.div`\n  display: flex;\n  justify-content: space-between;\n`\n\nconst ScrollyHeaderSection = styled.h2``\nconst ScrollyContentSection = styled.div``\nconst ScrollyImageSection = styled.img`\n  margin-top: 20px;\n  position: sticky;\n  top: 10px;\n  height: 50%;\n`\n\nconst ScrollySection = ({\n  title,\n  img,\n  status,\n  children,\n  contentWidth = \"60%\",\n  imageWidth = \"35%\",\n}) => {\n  return (\n    <div>\n      <ScrollyHeaderSection>{title}</ScrollyHeaderSection>\n      <ScrollContainer2>\n        <ScrollyContentSection style={{ flexBasis: contentWidth }}>\n          {children}\n        </ScrollyContentSection>\n        {img ? (\n          <ScrollyImageSection\n            id=\"big-puppy-collection\"\n            src={`story-img/${img}`}\n            style={{ flexBasis: imageWidth }}\n          />\n        ) : null}\n      </ScrollContainer2>\n    </div>\n  )\n}\n\nconst ScrollySectionLeftImage = ({\n  title,\n  img,\n  status,\n  children,\n  imageWidth = \"35%\",\n  contentWidth = \"60%\",\n}) => {\n  return (\n    <div>\n      <ScrollyHeaderSection>{title}</ScrollyHeaderSection>\n      <ScrollContainer2>\n        {img ? (\n          <ScrollyImageSection\n            src={`story-img/${img}`}\n            style={{ flexBasis: imageWidth }}\n          />\n        ) : null}\n        <ScrollyContentSection style={{ flexBasis: contentWidth }}>\n          {children}\n        </ScrollyContentSection>\n      </ScrollContainer2>\n    </div>\n  )\n}\n\n// const ScrollySectionBackgroundImageContainer = styled.div`\n//   margin-bottom: 20vh;\n//   /* background-attachment: fixed; */\n//   /* background-repeat: no-repeat; */\n//   background-size: contain;\n//   background-position: center center;\n//   background-image: ${({ img }) => `url(story-img/${img})`};\n// `\n\n// const ScrollySectionBackgroundImage = ({ title, img, children }) => {\n//   return (\n//     <ScrollySectionBackgroundImageContainer img={img}>\n//       <ScrollyHeaderSection>{title}</ScrollyHeaderSection>\n//       {children}\n//     </ScrollySectionBackgroundImageContainer>\n//   )\n// }\n\nconst RowFlexContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: ${({ valign = \"center\" }) => valign};\n`\n\nconst FlowCharts = {\n  validate: (elements) => {\n    const issues = []\n    elements.forEach((x) => {\n      if (!x.id && !x.props.id)\n        issues.push(`FlowChart element [${x.type}] is missing id`)\n    })\n    return issues\n  },\n  hasPosition: (x) =>\n    x.style &&\n    (\"top\" in x.style ||\n      \"bottom\" in x.style ||\n      \"left\" in x.style ||\n      \"right\" in x.style),\n  hasPositionedElements: (elements) =>\n    elements.reduce((all, x) => all || FlowCharts.hasPosition(x), false),\n  hasUserDefinedLinks: (elements) =>\n    elements.reduce((all, x) => all || \"links\" in x, false),\n  buildLinks: (elements) => {\n    const userDefined = FlowCharts.hasUserDefinedLinks(elements)\n    if (userDefined) {\n      return elements\n        .map((x) =>\n          (Object.keys(x.links || {}) || []).map((l) => ({\n            from: x.id,\n            to: l,\n            config: x.links[l],\n          }))\n        )\n        .flat()\n    } else {\n      // Build links from element to element in order given\n      return elements.reduce((all, x, i) => {\n        if (i === elements.length - 1) return all\n        return [...all, { from: x.props.id, to: elements[i + 1].props.id }]\n      }, [])\n    }\n  },\n}\n\nconst FlowChartElementContainer = styled.div`\n  display: flex;\n  justify-content: space-around;\n  & * {\n    display: block;\n  }\n`\n\nconst FlowChart = ({\n  name,\n  elements,\n  size,\n  style,\n  startAnimating,\n  visible,\n  chainLinkAnimation,\n  betweenLinkDelay = 0,\n}) => {\n  const prevAnimated = usePrevious(startAnimating)\n  const shouldAnimate = startAnimating && startAnimating !== prevAnimated\n  const flowRef = useRef()\n  const handleScroll = AnimEvent.add(() => {\n    if (!flowRef.current) return\n    Object.values(flowRef.current.lines || {}).forEach((line) =>\n      line.position()\n    )\n  })\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll)\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll)\n      clearLines(flowRef)\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  const issues = FlowCharts.validate(elements)\n  if (issues.length) {\n    console.error(issues.join(\"\\n\"))\n  }\n  const lineConfig = (override) => ({\n    options: {\n      path: \"straight\",\n      startSocket: \"auto\",\n      endSocket: \"auto\",\n      ...override,\n    },\n  })\n\n  const links = FlowCharts.buildLinks(elements)\n\n  useEffect(() => {\n    if (shouldAnimate) {\n      if (chainLinkAnimation) {\n        const fns = links.map((x) =>\n          drawLine.bind(null, x.from, x.to, flowRef, lineConfig(x.config))\n        )\n        chain(fns, betweenLinkDelay)\n      } else {\n        links.forEach((x) =>\n          drawLine(x.from, x.to, flowRef, lineConfig(x.config))\n        )\n      }\n    } else if (!visible) {\n      clearLines(flowRef)\n    }\n  })\n\n  const containerStyle = FlowCharts.hasPositionedElements(elements)\n    ? { position: \"relative\", ...size }\n    : {\n        display: \"flex\",\n        justifyContent: \"space-evenly\",\n        alignItems: \"center\",\n        flex: 1,\n      }\n\n  const elementStyle = (x) =>\n    FlowCharts.hasPosition(x) ? { position: \"absolute\", ...x.style } : null\n\n  return (\n    <RowFlexContainer ref={flowRef} style={style}>\n      <div style={containerStyle}>\n        {elements.map((x, i) => (\n          <FlowChartElementContainer\n            key={`${name}-${i}`}\n            id={x.id}\n            style={elementStyle(x)}\n          >\n            {x.element ? x.element : x}\n          </FlowChartElementContainer>\n        ))}\n      </div>\n    </RowFlexContainer>\n  )\n}\n\nconst WeaknessWithAI = (props) => {\n  return (\n    <ScrollySectionLeftImage\n      title=\"The Weakness with AI (a Scrollytelling Perspective)\"\n      img=\"weakness.png\"\n      contentWidth=\"78%\"\n      imageWidth=\"20%\"\n      {...props}\n    >\n      <p>\n        The ability of deep neural network (DNN) machine learning (ML) models to\n        achieve human or above-human task performance is a result of the\n        availability of vast amounts of data. As organizations dedicate\n        expensive resources to data acquisition, processing, labeling and\n        storage and training of DNNs, the data must be treated as sensitive\n        proprietary information. These facts are often expressed as “data is the\n        new oil” and “data is the new source code,” respectively. However,\n        recent demonstrations have shown how DNN characteristics and behaviors\n        can be leveraged by malicious actors to make the DNN reveal, learn, or\n        do the wrong thing. To see how DNNs can be exploited, we will first set\n        the stage with an example of a successful machine learning application\n        within the field of computer vision.\n      </p>\n      <p>\n        However, recent demonstrations have shown how DNN characteristics and\n        behaviors can be leveraged by malicious actors to make the DNN reveal,\n        learn, or do the wrong thing. To see how DNNs can be exploited, we will\n        first set the stage with an example of a successful machine learning\n        application within the field of computer vision.\n      </p>\n    </ScrollySectionLeftImage>\n  )\n}\n\nconst LabelTile = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 10px solid blue;\n  font-size: 1.2em;\n  background-color: white;\n  padding: 30px;\n`\n\nconst PuppiesToFoodFlowChart = ({ status }) => (\n  <FlowChart\n    name=\"puppies-or-food-flow\"\n    elements={[\n      <img src=\"story-img/puppy.png\" id=\"puppies-or-food-1\" alt=\"\" />,\n      <img\n        src=\"story-img/weakness.png\"\n        id=\"puppies-or-food-2\"\n        alt=\"\"\n        style={{ height: \"60%\", width: \"60%\" }}\n      />,\n      <LabelTile id=\"puppies-or-food-3\">food</LabelTile>,\n    ]}\n    visible={status && status.visible}\n    startAnimating={status && status.visible}\n    chainLinkAnimation={true}\n    betweenLinkDelay={1000}\n  />\n)\n\nconst PuppiesVsCroissantsImages = ({ status }) => (\n  <RowFlexContainer valign=\"start\">\n    <ImageDiff\n      before=\"story-img/2puppies.png\"\n      after=\"story-img/2croissants.png\"\n      type=\"swipe\"\n      value={0.5}\n      slider\n      // animation={\n      //   status && status.visible && status.progress > 0.5\n      //     ? { end: 0, step: -0.02 }\n      //     : null\n      // }\n      // slider\n    />\n    <ImageDiff\n      before=\"story-img/2puppies.png\"\n      after=\"story-img/2croissants.png\"\n      type=\"fade\"\n      slider\n    />\n    {/* <ImageDiff\n      before=\"story-img/2puppies.png\"\n      after=\"story-img/2croissants.png\"\n      type=\"difference\"\n    /> */}\n  </RowFlexContainer>\n)\n\nconst PuppiesOrFood = (props) => {\n  const { status } = props\n  // useEffect(() => {\n  //   HoverConnection(\"from\", \"big-puppy-collection\")\n  // }, [])\n  return (\n    <ScrollySection\n      title=\"Puppies or Food?\"\n      img=\"puppies-or-food.png\"\n      contentWidth=\"50%\"\n      imageWidth=\"48%\"\n      {...props}\n    >\n      <p>\n        In computer vision, the DNN task is to take a new image and categorize\n        it into one of several known classes that it has been trained on. On the\n        screen, there are a number of images, some of which are puppies, and\n        some of which are food. Modern day machine learning models can typically\n        perform this classification task so well that it is easy to forget that\n        this is not a solved problem.\n      </p>\n      <p>\n        These specific images were collated by Karen Zack, with the Twitter\n        handle of “@teenybiscuit.” It is interesting that you may not be able to\n        classify each images can be with the same level of ease or confidence.\n        (add action) You can also take these images and pass them through modern\n        deep neural networks to see how they perform. Don’t be surprised to\n        learn that some of them may also get confused. (add action and ability\n        to pass them through the model…selection bar above?) These images\n        indicate that DNNs learn how to identify objects in ways similar to\n        human vision, for instance, color, shape, or texture. [action here with\n        the image to point out each one of these using different images from the\n        matrix above ].\n      </p>\n      <p>\n        However, within the computer vision / deep learning field there is not a\n        common understanding of what these models are learning.\n      </p>\n      <PuppiesToFoodFlowChart status={status} />\n      <p>\n        Beyond their inherent fun and quality of fooling modern day models,\n        there are a few other lessons that these images highlight. First, you\n        should be aware that for any model, similar examples can always be found\n        – ones that make a model do the wrong thing despite our attempts to make\n        them extremely accurate. This means that it is likely that our\n        application can be intentionally circumvented by those using it, with\n        possibly unexpected things occurring. This presents a security\n        vulnerability.\n      </p>\n      <p>\n        We can try to avoid this vulnerability while also increasing the\n        accuracy by training with examples such as these two:\n      </p>\n      <PuppiesVsCroissantsImages status={status} />\n      <p>\n        While learning, the model must extract more information about these two\n        images in order to correctly. Often, the model learns characteristics of\n        the specific images, often storing what we would consider sensitive\n        information. When this occurs, the model may exhibit different output\n        behavior depending upon the input. This indicates that the DNN is\n        leaking information about specific images, revealing the wrong thing,\n        which is a privacy vulnerability.\n      </p>\n      <h4>ML is inherently fragile with unstable behavior</h4>\n      <p>\n        All of these observations point out a key characteristic of modern day\n        deep neural networks – they are inherently fragile and will exhibit\n        unstable behavior. This cannot be avoided and must be considered when\n        building and deploying applications.\n      </p>\n    </ScrollySection>\n  )\n}\n\nconst TitledElement = ({ title, children, bottom = false }) => (\n  <div\n    style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}\n  >\n    {title && !bottom ? <ImageTitle>{title}</ImageTitle> : null}\n    {children}\n    {title && bottom ? <ImageTitle>{title}</ImageTitle> : null}\n  </div>\n)\n\nconst MiaFlowChart = ({ status, style }) => (\n  <FlowChart\n    name=\"mia-layout\"\n    size={{ height: 400, width: 700 }}\n    style={style}\n    elements={[\n      {\n        id: \"mia-flow-horse\",\n        element: (\n          <TitledElement>\n            <img src=\"story-img/horse.png\" alt=\"\" />\n          </TitledElement>\n        ),\n        style: { top: 150 },\n        links: {\n          \"mia-flow-target-model\": {\n            startSocket: \"top\",\n            endSocket: \"left\",\n            size: 10,\n            color: \"midnightblue\",\n            endLabel: \"Classify\",\n            path: \"grid\",\n          },\n        },\n      },\n      {\n        id: \"mia-flow-target-model\",\n        element: (\n          <TitledElement title=\"Target Model\">\n            <img src=\"story-img/target-model.png\" alt=\"\" />\n          </TitledElement>\n        ),\n        style: { left: 250, top: 10 },\n        links: {\n          \"mia-flow-bar-chart\": {\n            path: \"straight\",\n            color: \"black\",\n          },\n        },\n      },\n      {\n        id: \"mia-flow-bar-chart\",\n        element: (\n          <TitledElement title=\"Yes or No?\" bottom>\n            <img src=\"story-img/bar-chart.png\" alt=\"\" />\n          </TitledElement>\n        ),\n        style: { right: 0 },\n      },\n      {\n        id: \"mia-flow-compliance-officer\",\n        element: (\n          <TitledElement title=\"Compliance Officer\" bottom>\n            <img src=\"story-img/compliance-officer.png\" alt=\"\" />\n          </TitledElement>\n        ),\n        style: { left: 250, bottom: 0 },\n        links: {\n          \"mia-flow-horse\": {\n            startSocket: \"left\",\n            endSocket: \"bottom\",\n            size: 10,\n            color: \"midnightblue\",\n            path: \"grid\",\n          },\n          \"mia-flow-bar-chart\": {\n            startSocket: \"right\",\n            endSocket: \"bottom\",\n            size: 10,\n            color: \"midnightblue\",\n            path: \"grid\",\n          },\n        },\n      },\n    ]}\n    visible={status && status.visible}\n    startAnimating={status && status.visible}\n  />\n)\n\nconst MembershipInferenceAttack = (props) => {\n  const { status } = props\n  return (\n    <div>\n      <ScrollyHeaderSection>\n        Membership Inference Attack (MIA)\n      </ScrollyHeaderSection>\n      <ScrollContainer2>\n        <ScrollyContentSection style={{ flexBasis: \"70%\" }}>\n          <MiaFlowChart\n            status={status}\n            style={{ position: \"sticky\", top: 10 }}\n          />\n        </ScrollyContentSection>\n        <ScrollyContentSection style={{ flexBasis: \"30%\" }}>\n          <p>\n            In the membership inference attack, we want to answer the question\n            of whether this specific piece of data was in the training data set\n            for the machine learning model. Here, one does not necessarily need\n            to not have access to the original data set, though we have the\n            ability to query the model with input data and obtain the outputs.\n          </p>\n          <p>\n            There are several operational scenarios in which we need to answer\n            this question. First, we may have a deployed model that has been\n            supporting an application for some time. If the data point was used\n            to train that model, it could make the model noncompliant and we\n            would have to terminate its use. Furthermore, any actions previously\n            taken or data previously collected based upon the model could also\n            be noncompliant. Right now, legal precedence says to throw out the\n            model and any evidence that may have been collected with it.\n          </p>\n          <p>\n            Second, you may have a trained a model using a small amount of data\n            that was collected with NTM and as such, it has a higher\n            classification given its relationship to intent, sources, methods\n            and TTPs. You do not own the data and it others naturally have valid\n            access to it. Also, this model will be deployed into 3rd party\n            spaces that you do not control. If that sensitive data can be\n            readily identified from the model output, it puts NTM at risk.\n          </p>\n        </ScrollyContentSection>\n      </ScrollContainer2>\n    </div>\n  )\n}\n\nconst ModelInversionAttack = (props) => {\n  return (\n    <div>\n      <ScrollyHeaderSection>Model Inversion Attack</ScrollyHeaderSection>\n      <ScrollContainer2>\n        <ScrollyContentSection style={{ flexBasis: \"100%\" }}>\n          <ReverseEngineeringDataPrototypes width=\"60vw\" />\n        </ScrollyContentSection>\n      </ScrollContainer2>\n    </div>\n  )\n}\n\nconst ReverseEngineeringDataPrototypes = (props) => (\n  <RowFlexContainer>\n    <ImageAnimation\n      images={[\n        \"story-img/match_game_cifar_robust_images_deer_threshold_1.png\",\n        \"story-img/match_game_cifar_robust_images_deer_threshold_16.png\",\n        \"story-img/match_game_cifar_robust_images_deer_threshold_32.png\",\n        \"story-img/match_game_cifar_robust_images_deer_threshold_64.png\",\n        \"story-img/match_game_cifar_robust_images_deer_threshold_128.png\",\n        \"story-img/match_game_cifar_robust_images_deer_threshold_256.png\",\n      ]}\n      info={\n        <>\n          <h3>Reverse Engineering Data Prototypes</h3>\n          <p style={{ fontSize: \".85rem\", color: \"lightslategray\" }}>\n            The model inversion attack seeks to reconstruct representations of\n            the training data in order to glean information about sensitive\n            data-collection tools, techniques and tradecraft. For computer\n            vision models, inversion can produce image representations for every\n            class label in the model. The interactive figure below demonstrates\n            real images formed during an inversion of the deer class. The\n            inversion process is an optimization problem similar to that used to\n            train the model in the first place. Here, the image inversion is\n            randomly initialized and a new image is saved at each stage. In the\n            early stages of inversion optimization, these images typically\n            remain gray and not visually interpretable and thus we refer to\n            these generated images \"gray data\". However, as the inversion\n            process continues, these images can have significant elements that\n            are human interpretable.\n          </p>\n        </>\n      }\n      {...props}\n    />\n  </RowFlexContainer>\n)\n\nconst TwentyQuestions = (props) => {\n  return (\n    <ScrollySection\n      title=\"A game of 20 Questions...\"\n      contentWidth=\"100%\"\n      imageWidth=\"0\"\n      {...props}\n    >\n      <p>\n        Highlight (possibly with the coin flip analogy) that if the DNN did not\n        leak any information, there would be no way for another to answer this\n        question better than a random guess of yes/no. The most basic strategy\n        insert practice rounds here to help the user devise the Gap strategy and\n        understand the most basic type of Membership Inference then, maybe,\n        offer them an opportunity to play a full game and compare their\n        performance to that random guessing. Insert short text content about the\n        Gap advantage.\n      </p>\n    </ScrollySection>\n  )\n}\n\nconst cleanupLeaderLines = () =>\n  // Due to animation, some leader lines are left behind\n  Array.from(document.getElementsByClassName(\"leader-line\")).forEach((x) =>\n    x.remove()\n  )\n\nconst Story = () => {\n  const [viewState, setViewState] = useState({})\n\n  useEffect(() => {\n    return () => cleanupLeaderLines()\n  }, [])\n\n  const onStepEnter = ({ data }) => {\n    const updated = { ...viewState, currentView: data }\n    if (!(data in updated)) updated[data] = {}\n    updated[data].visible = true\n    setViewState(updated)\n  }\n\n  const onStepExit = ({ data }) => {\n    const updated = { ...viewState }\n    if (!(data in updated)) updated[data] = {}\n    updated[data].visible = false\n    setViewState(updated)\n  }\n\n  const onStepProgress = ({ data, progress }) => {\n    const updated = { ...viewState }\n    if (!(data in updated)) updated[data] = {}\n    updated[data].visible = true\n    updated[data].progress = progress\n    setViewState(updated)\n  }\n\n  return (\n    <>\n      <ScrollContainer>\n        <Scroller>\n          <Scrollama\n            onStepEnter={onStepEnter}\n            onStepExit={onStepExit}\n            progress\n            onStepProgress={onStepProgress}\n          >\n            <Step data=\"weakness\">\n              <div>\n                <WeaknessWithAI status={viewState[\"weakness\"]} />\n              </div>\n            </Step>\n            <Step data=\"puppies-or-food\">\n              <div>\n                <PuppiesOrFood status={viewState[\"puppies-or-food\"]} />\n              </div>\n            </Step>\n            <Step data=\"mia\">\n              <div>\n                <MembershipInferenceAttack status={viewState[\"mia\"]} />\n              </div>\n            </Step>\n            <Step data=\"20q\">\n              <div\n                style={{\n                  marginBottom: \"10vh\",\n                }}\n              >\n                <TwentyQuestions status={viewState[\"20q\"]} />\n                <Practice demo />\n              </div>\n            </Step>\n            <Step data=\"model-inversion-attack\">\n              <div>\n                <ModelInversionAttack\n                  status={viewState[\"model-inversion-attack\"]}\n                />\n              </div>\n            </Step>\n          </Scrollama>\n        </Scroller>\n      </ScrollContainer>\n    </>\n  )\n}\n\nexport default Story\n","import { GameContextProvider } from \"../context/GameContext\"\nimport { useState } from \"react\"\nimport { withRouter } from \"react-router-dom\"\nimport CheckButton from \"react-grid-gallery/lib/CheckButton\"\nimport { Fab, Action } from \"react-tiny-fab\"\nimport \"react-tiny-fab/dist/styles.css\"\nimport FullGame from \"../components/game/FullGame\"\nimport Match from \"../components/game/Match\"\nimport Practice from \"../components/game/Practice\"\nimport Menu from \"../components/game/Menu\"\nimport Story from \"../components/Story\"\nimport { Emoji } from \"../components/game/Util\"\nimport Modal from \"react-modal\"\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\"\n\nModal.setAppElement(\"#root\")\n\nconst PageHeader = ({ title, subtitle }) => {\n  const styles = {\n    container: {\n      marginBottom: 5,\n    },\n    title: {\n      fontSize: 20,\n      fontWeight: \"bold\",\n    },\n    subtitle: {\n      fontSize: 14,\n      color: \"gray\",\n    },\n  }\n  return (\n    <div style={styles.container}>\n      <div style={styles.title}>{title}</div>\n      <span style={styles.subtitle}>{subtitle}</span>\n    </div>\n  )\n}\n\nconst GameModal = withRouter(({ history }) => {\n  const [isModalOpen, setModalOpen] = useState(false)\n  const toggleModal = () => setModalOpen(!isModalOpen)\n  const returnToMenu = () => history.push(\"/\")\n\n  return (\n    <>\n      <Modal\n        isOpen={isModalOpen}\n        onRequestClose={toggleModal}\n        contentLabel=\"My dialog\"\n      >\n        <PageHeader\n          title=\"A game of 16 questions…beat Carnac!\"\n          subtitle=\"AI Jimmy is really good at identifying the object in images that he\n            has seen before. Select (check) which of the following images you\n            think Jimmy remembers. You will be playing against Carnac and who\n            ever gets more correct, wins!\"\n        />\n        <button\n          onClick={toggleModal}\n          style={{\n            position: \"absolute\",\n            top: 5,\n            right: 5,\n            border: 0,\n            background: \"none\",\n          }}\n        >\n          <CheckButton color=\"black\" isSelected={true} />\n        </button>\n      </Modal>\n      <Fab\n        alwaysShowTitle={true}\n        mainButtonStyles={{\n          backgroundColor: \"slategray\",\n        }}\n        icon=\". . .\"\n      >\n        <Action text=\"Back to Game Menu\" onClick={returnToMenu}>\n          <Emoji symbol=\"0x21A9\" />\n        </Action>\n      </Fab>\n    </>\n  )\n})\n\nconst GameView = () => {\n  return (\n    <GameContextProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/practice\">\n            <Practice />\n          </Route>\n          <Route path=\"/match/learn\">\n            <Match gameMode=\"learn\" />\n          </Route>\n          <Route path=\"/match/easy\">\n            <Match gameMode=\"easy\" />\n          </Route>\n          <Route path=\"/match/hard\">\n            <Match gameMode=\"hard\" />\n          </Route>\n          <Route path=\"/game\">\n            <FullGame />\n          </Route>\n          <Route path=\"/\">\n            <Menu />\n            <Story />\n          </Route>\n        </Switch>\n        <GameModal />\n      </Router>\n    </GameContextProvider>\n  )\n}\n\nexport default GameView\n","import \"./App.css\"\n// import PickView from \"./views/PickView\"\nimport GameView from \"./views/GameView\"\n\nconst App = () => {\n  return (\n    <GameView />\n    // <PickView />\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}