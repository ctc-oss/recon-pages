{"version":3,"sources":["context/GameContext.js","components/game/Scoreboard.js","util/data.js","components/game/Util.js","components/game/FullGame.js","hooks/useWindowSize.js","components/game/Match.js","util/misc.js","components/game/Practice.js","components/game/Menu.js","views/GameView.js","App.js","reportWebVitals.js","index.js"],"names":["GameContext","createContext","GameContextProvider","props","useState","players","name","color","selections","score","images","previousPracticeRounds","practiceRound","gameSettings","setGameSettings","Provider","value","children","Container","styled","div","Board","SideContainer","Side","Team","ScoreContainer","Score","Bottom","ScoreBoard","home","away","bottomDisplay","totalPossible","ScoreboardSide","player","style","scoreDisplay","percentageDisplay","toFixed","bottom","borderLeft","sanitizeJson","obj","Object","keys","reduce","all","x","p","toLowerCase","gameData","a","fetch","allOptions","json","data","correctData","map","practiceOptions","filter","groups","includes","gameOptions","items","size","r","Math","random","sort","b","slice","length","isDefined","undefined","CenteredOuter","CenteredInner","Centered","ToggleButtonCheckBoxWrapper","CheckButton","button","checked","left","ToggleButton","trueLabel","falseLabel","trueBgColor","falseBgColor","onToggle","defaultValue","onClick","right","GameButton","Emoji","className","label","symbol","role","aria-label","String","fromCodePoint","Sidecar","RangeContainer","RangeLabel","RangeTrack","RangeHandle","RangeSlider","min","max","onChange","step","values","_value","renderTrack","renderThumb","SIZES","height","width","generateGameData","_gameData","i","correctAnswers","correct","parseInt","labelStyle","padding","fontSize","background","toDeerImage","img","index","image","tags","src","path","thumbnail","thumbnailWidth","thumbnailHeight","customOverlay","toImage","_img","title","findYouPlayer","findCarnacPlayer","SelectionsOverlayContainer","CheckButtonContainer","SelectionsOverlay","useContext","_carnac","_you","isSelected","Choices","useEffect","resetGame","onSelectImage","updated","you","hasOwnProperty","enableImageSelection","onClickThumbnail","tagStyle","showLightboxThumbnails","enableLightbox","original","updateFn","currentGameData","carnacAnswers","carnac","calculateScore","_selections","wrongAnswers","omittedAnswers","ChallengeCarnacContainer","ChallengeCarnac","selectionCount","textAlign","fontWeight","display","flexDirection","disabled","InformationContainer","Information","ResultsContainer","Results","marginTop","_winner","GameContainer","FullGame","minWidth","maxWidth","useWindowSize","windowSize","setWindowSize","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","DraggableImageBase","DraggableImageElement","DraggableImagePlaceholder","between","findTarget","targets","dropLocation","rect","getBoundingClientRect","id","top","y","box","point","shift","DraggableImageContainer","ReactDOM","createPortal","document","getElementById","moveDraggable","draggable","correctPosition","target","source","DraggableImage","targetIds","imagePlaceholderId","draggableDomRef","useRef","draggableRef","current","d","PlainDraggable","snapped","snap","edge","onDrag","moveTo","onDragEnd","line","remove","fromId","toId","options","LeaderLine","startPlugColor","endPlugColor","gradient","Connection","alt","ref","DraggableContainer","DraggableTarget","toKey","Match","clean","k","styleDiv","getDiv","forEach","PRACTICE_IMAGE_SIZE","container","AI_NAME","COLORS","scrollingImages","url","answer","property","allQuestionsAnswered","seenbefore","PracticeResultContainer","PracticeResult","question","agree","questionNumber","isCurrentImage","waiting","text","incorrect","EndButtonsContainer","EndButtons","to","push","PracticeResultsContainer","PracticeResultsTitle","PracticeResults","currentImageIndex","margin","ImageSliderOverrideStyles","currentIndex","bulletContainerChildIndices","bulletStyle","colors","containerIndex","border","join","imageSize","imagePercent","paddingLeft","paddingTop","dangerouslySetInnerHTML","__html","_","toColor","QuestionWithButtonsContainer","QuestionWithButtonsButtonContainer","QuestionText","QuestionWithButtons","onAnswer","ProbabilityContainer","Probability","percent","animate","reveal","hideLabel","totalValue","lineWidth","dataEntry","fill","labelPosition","TuningsContainer","TuningSelectContainer","TuningSelect","selectStyles","provided","indicatorsContainer","option","whiteSpace","content","icon","menu","singleValue","styles","isSearchable","Tunings","getImageDiv","onLoadImageVariant","defaultStyle","noise","setStyles","selectedVariant","setSelectedVariant","changeImage","key","transition","variants","variantLabel","updateImage","additionalStyles","toggle","probability","augmentVariants","startsWith","optionDecorations","hflip","vflip","replace","noop","decorate","object","decoration","fn","console","log","defaults","bind","decorationKey","find","noiseLevelVariants","noiseLevels","level","noiseLevel","Caption","SwitchModeContainer","SwitchModeButton","selected","SwitchMode","mode","onSwitchMode","labels","trick","toModes","toMode","PracticeVoteButtonsContainer","containerSize","containerSidePadding","PictureLabel","changed","ImageControls","displayMode","setDisplayMode","loadedImage","setLoadedImage","defaultLoadedImageState","useMemo","onClickUpdateProperty","guessed","onAgreementClick","onSeenBeforeClick","position","previousLabel","setCurrentIndex","version","PracticeContainer","Practice","imageState","setImageState","reset","sliderRef","showBullets","showNavs","navStyle","onStartSlide","idx","borderBottomLeftRadius","borderTopLeftRadius","backgroundColor","Title","h1","ButtonContainer","Menu","process","Modal","setAppElement","PageHeader","subtitle","marginBottom","GameModal","withRouter","history","isModalOpen","setModalOpen","toggleModal","isOpen","onRequestClose","contentLabel","alwaysShowTitle","mainButtonStyles","GameView","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode"],"mappings":"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","file":"static/js/main.2c85133d.chunk.js","sourcesContent":["import { useState, createContext } from \"react\"\n\nexport const GameContext = createContext()\n\nexport const GameContextProvider = (props) => {\n  const [gameSettings, setGameSettings] = useState({\n    players: [\n      { name: \"YOU\", color: \"green\", selections: [], score: null },\n      {\n        name: \"CARNAC\",\n        color: \"red\",\n        selections: [],\n        score: null,\n      },\n    ],\n    images: [],\n    previousPracticeRounds: [],\n    practiceRound: {},\n  })\n\n  return (\n    <GameContext.Provider value={[gameSettings, setGameSettings]}>\n      {props.children}\n    </GameContext.Provider>\n  )\n}\n","import styled from \"styled-components\"\n\nconst Container = styled.div`\n  margin-top: 2px;\n  background-color: #444;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  font-family: Futura;\n  min-width: 400px;\n  max-width: 400px;\n  width: 400px;\n`\n\nconst Board = styled.div`\n  margin: 6px;\n  border: 5px solid white;\n  border-radius: 10px;\n  flex-direction: row;\n`\n\nconst SideContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst Side = styled.div`\n  flex: 1;\n  text-align: center;\n`\nconst Team = styled.div`\n  padding: 10px;\n  text-align: center;\n  font-size: 24pt;\n  border-bottom: 5px solid white;\n  margin: 0;\n  font-weight: bold;\n`\nconst ScoreContainer = styled.div`\n  padding: 10px;\n`\nconst Score = styled.div`\n  font-size: 48pt;\n  font-family: Impact, sans-serif;\n`\nconst Bottom = styled.div`\n  font-size: 18;\n  padding: 5px;\n  border-top: 5px solid white;\n  font-weight: bold;\n  text-align: center;\n`\n\nconst ScoreBoard = ({\n  home,\n  away,\n  bottomDisplay = () => \"\",\n  totalPossible = 0,\n}) => {\n  const ScoreboardSide = ({ player, style = {} }) => {\n    const scoreDisplay =\n      totalPossible > 0 ? `${player.score} / ${totalPossible}` : player.score\n    const percentageDisplay =\n      totalPossible > 0 ? (\n        <div>({((player.score / totalPossible) * 100).toFixed()}%)</div>\n      ) : null\n    return (\n      <Side style={style}>\n        <Team style={{ color: player.color }}>{player.name}</Team>\n        <ScoreContainer>\n          <Score>{scoreDisplay}</Score>\n          {percentageDisplay}\n        </ScoreContainer>\n      </Side>\n    )\n  }\n\n  const bottom = bottomDisplay()\n\n  return (\n    <Container>\n      <Board>\n        <SideContainer>\n          <ScoreboardSide player={home} />\n          <ScoreboardSide\n            player={away}\n            style={{ borderLeft: \"3px solid white\" }}\n          />\n        </SideContainer>\n        {bottom ? <Bottom>{bottom}</Bottom> : null}\n      </Board>\n    </Container>\n  )\n}\n\nexport default ScoreBoard\n","const colors = [\"0,0,255\", \"255,0,0\", \"0,255,0\", \"255,0,255\"]\n\nconst defaultDataSet = {\n  borderWidth: 1,\n}\n\nconst dataSet = (index) => {\n  const color = colors[index]\n  const backgroundColor = `rgba(${color},0.4)`\n  const borderColor = `rgba(${color},0.7)`\n  return {\n    ...defaultDataSet,\n    backgroundColor,\n    borderColor,\n  }\n}\n\nconst selectionData = (data) =>\n  Object.keys(data.MI_class_results || {}).reduce(\n    (all, x) => ({ ...all, [x]: data.MI_class_results[x].mi_auc }),\n    {}\n  )\n\nexport const configurationKeys = (configurations) =>\n  Object.keys(configurations).filter(\n    (x) => typeof configurations[x] === \"object\"\n  )\n\nconst fetchConfigurationData = async (configuration) => {\n  const key = (x) => `${x.flavor}_${x.dataset}_${x.architecture}_${x.train}`\n  const filepath = (name) => `./data/${name}.json`\n  const filekey = key(configuration)\n  let results\n  try {\n    const response = await fetch(filepath(filekey))\n    results = await response.json()\n  } catch (e) {\n    console.log(`No data file available for configuration ${filekey}`)\n    const response = await fetch(filepath(\"missing_data\"))\n    results = await response.json()\n  }\n  return [filekey, results]\n}\n\nexport const configurationData = async (configuration) => {\n  const [key, json] = await fetchConfigurationData(configuration)\n  return {\n    key,\n    data: selectionData(json),\n  }\n}\n\nexport const chartData = (selections) => {\n  const selectionKeys = configurationKeys(selections)\n  const hasData = selectionKeys.reduce(\n    (all, x) => all && \"data\" in selections[x],\n    true\n  )\n  if (hasData) {\n    const labels = [\n      ...new Set(\n        selectionKeys.reduce(\n          (all, x) => [...all, ...Object.keys(selections[x].data || {})],\n          []\n        )\n      ),\n    ].sort((a, b) => parseInt(a) > parseInt(b))\n    const keyData = selectionKeys.reduce(\n      (all, x) => ({\n        ...all,\n        [selections[x].key]: {\n          data: selections[x].data,\n          label: `MI AUC (${selections[x].flavor}/${selections[x].dataset}/${selections[x].architecture}/${selections[x].train})`.toUpperCase(),\n        },\n      }),\n      {}\n    )\n    return {\n      labels,\n      datasets: Object.keys(keyData).map((x, i) => {\n        return {\n          ...dataSet(i),\n          label: keyData[x].label,\n          data: labels.map((y) => keyData[x].data[y]),\n        }\n      }),\n    }\n  } else return {}\n}\n\nconst sample = (items, size) =>\n  items\n    .map((x) => ({ x, r: Math.random() }))\n    .sort((a, b) => a.r - b.r)\n    .map((a) => a.x)\n    .slice(0, size || items.length)\n\nexport const PRACTICE_ROUND_IMAGE_COUNT = 5\nexport const GAME_IMAGE_COUNT = 12\n\nconst sanitizeJson = (obj) => {\n  const stringToBooleanOrOriginal = (p) =>\n    p && (p === \"true\" || p === \"false\") ? p.toLowerCase() === \"true\" : p\n  return Object.keys(obj).reduce(\n    (all, x) => ({\n      ...all,\n      [x]: stringToBooleanOrOriginal(obj[x]),\n    }),\n    {}\n  )\n}\n\n// const PRACTICE_SETS = [1, 2, 3, 4, 5]\n\nconst practiceSet = (images) => {\n  // const setIndex =\n  //   PRACTICE_SETS[Math.floor(Math.random() * PRACTICE_SETS.length)]\n  const setIndex = 2\n  return images.filter((x) => x.groups && x.groups.includes(setIndex))\n}\n\nexport const gameData = async () => {\n  // const allOptions = await fetch(\n  //   \"https://gitlab-int.ctc.com/RECON-GURU/interact/-/snippets/72/raw/master/game.json\",\n  //   {\n  //     method: \"GET\",\n  //     mode: \"no-cors\",\n  //   }\n  // )\n  const allOptions = await fetch(`./data/game-data.json`)\n  const data = await allOptions.json()\n  const correctData = data.map(sanitizeJson)\n  return {\n    practiceOptions: practiceSet(correctData),\n    gameOptions: sample(correctData, GAME_IMAGE_COUNT),\n  }\n}\n\nexport const isDefined = (x) => x !== null && x !== undefined\n","import PropTypes from \"prop-types\"\nimport styled from \"styled-components\"\nimport \"./Game.css\"\nimport { isDefined } from \"../../util/data\"\nimport { Range } from \"react-range\"\n\nconst CenteredOuter = styled.div`\n  display: flex;\n  justify-content: space-around;\n  flex-direction: column;\n  height: 100%;\n`\nconst CenteredInner = styled.div`\n  display: flex;\n  justify-content: space-around;\n  flex-direction: row;\n  width: 100%;\n`\n\nexport const Centered = ({ children }) => (\n  <CenteredOuter>\n    <CenteredInner>{children}</CenteredInner>\n  </CenteredOuter>\n)\n\nconst ToggleButtonCheckBoxWrapper = styled.div`\n  position: relative;\n  background-color: lightgray;\n  padding: 5px;\n  border-radius: 4px;\n`\n\nconst CheckButton = styled.button`\n  background: ${({ checked, color }) => (checked ? color : \"gray\")};\n  padding: 5px;\n  color: ${({ checked }) => (checked ? \"white\" : \"black\")};\n  outline: none;\n  border: none;\n  border-radius: ${({ left }) => (left ? \"4px 0 0 4px\" : \"0 4px 4px 0\")};\n  transition: text-shadow 0.25s ease;\n  &:hover {\n    cursor: pointer;\n    text-shadow: ${({ checked }) =>\n      checked ? \"1px 1px 1px black;\" : \"1px 1px 1px lightgray;\"};\n  }\n`\n\nexport const ToggleButton = ({\n  trueLabel = \"YES\",\n  falseLabel = \"NO\",\n  trueBgColor,\n  falseBgColor,\n  onToggle,\n  defaultValue,\n}) => {\n  return (\n    <ToggleButtonCheckBoxWrapper>\n      <CheckButton\n        checked={isDefined(defaultValue) && defaultValue}\n        color={trueBgColor}\n        onClick={() => onToggle(true)}\n        left={true}\n      >\n        {trueLabel}\n      </CheckButton>\n      <CheckButton\n        checked={isDefined(defaultValue) && !defaultValue}\n        color={falseBgColor}\n        onClick={() => onToggle(false)}\n        right={true}\n      >\n        {falseLabel}\n      </CheckButton>\n    </ToggleButtonCheckBoxWrapper>\n  )\n}\n\nToggleButton.propTypes = {\n  onToggle: PropTypes.func.isRequired,\n  trueLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  falseLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n}\n\nexport const GameButton = styled.button`\n  border: 1px solid lightgray;\n  text-transform: uppercase;\n  font-family: Futura, sans-serif;\n  font-size: 1.4rem;\n  padding: 5px;\n  border-bottom: 5px solid grey;\n  color: darkslategray;\n  margin-top: 10px;\n  cursor: pointer;\n  &:disabled {\n    cursor: auto;\n    color: lightgray;\n  }\n`\n\nexport const Emoji = ({ className, style, label, symbol }) => (\n  <span className={className} style={style} role=\"img\" aria-label={label}>\n    {String.fromCodePoint(symbol)}\n  </span>\n)\n\nexport const Sidecar = styled.div`\n  background-color: white;\n`\n\nconst RangeContainer = styled.div`\n  padding: 5px;\n`\n\nconst RangeLabel = styled.div`\n  margin-bottom: 10px;\n  font-size: 0.75rem;\n  text-align: center;\n`\n\nconst RangeTrack = styled.div`\n  height: 6px;\n  width: 100%;\n  background-color: #ccc;\n`\n\nconst RangeHandle = styled.div`\n  height: 18px;\n  width: 18px;\n  background-color: #999;\n  border: 1px solid #555;\n  font-size: 0.7rem;\n  text-align: center;\n  line-height: 1.7;\n  outline: none;\n  border-radius: 4px;\n`\n\nexport const RangeSlider = ({\n  value,\n  min,\n  max,\n  onChange,\n  step = 1,\n  label = null,\n}) => {\n  return (\n    <RangeContainer>\n      {label ? <RangeLabel>{label}</RangeLabel> : null}\n      <Range\n        step={step}\n        min={min}\n        max={max}\n        values={[value]}\n        onChange={(values) => {\n          const [_value] = values\n          if (_value !== value) {\n            onChange(_value)\n          }\n        }}\n        renderTrack={({ props, children }) => (\n          <RangeTrack {...props}>{children}</RangeTrack>\n        )}\n        renderThumb={({ props }) => (\n          <RangeHandle {...props}>{value}</RangeHandle>\n        )}\n      />\n    </RangeContainer>\n  )\n}\n","import { GameContext } from \"../../context/GameContext\"\nimport { useContext, useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport Gallery from \"react-grid-gallery\"\nimport CheckButton from \"react-grid-gallery/lib/CheckButton\"\nimport ScoreBoard from \"./Scoreboard\"\nimport { Centered, GameButton, Sidecar } from \"./Util\"\nimport { gameData, isDefined, GAME_IMAGE_COUNT } from \"../../util/data\"\nimport \"./Game.css\"\n\nconst SIZES = {\n  thumbnail: {\n    height: 32,\n    width: 32,\n  },\n  grid: {\n    width: 710,\n  },\n}\n\nconst generateGameData = async () => {\n  const _gameData = await gameData()\n  const images = _gameData.gameOptions.reduce(\n    (all, x, i) => ({ ...all, [i]: x }),\n    {}\n  )\n  return {\n    gameData: _gameData,\n    images,\n    correctAnswers: Object.keys(images)\n      .filter((i) => images[i].correct)\n      .map((i) => parseInt(i)),\n  }\n}\n\nconst labelStyle = {\n  padding: \"5px\",\n  fontSize: \"75%\",\n  color: \"white\",\n  background: \"rgba(0,0,0,0.5)\",\n}\n\nconst toImage = (image, index, tags = () => []) => {\n  const img = {\n    src: `img/${image.path}`,\n    thumbnail: `img/${image.path}`,\n    thumbnailWidth: SIZES.thumbnail.width,\n    thumbnailHeight: SIZES.thumbnail.height,\n    index,\n    correct: image.correct,\n    customOverlay: <SelectionsOverlay index={index} />,\n  }\n  img.tags = tags(img) || []\n  return img\n}\nconst toDeerImage = (img, index) =>\n  toImage(img, index, (_img) => [\n    {\n      value: `${img.label}`,\n      title: `COMPY Says: ${img.label}`,\n    },\n  ])\n\nconst findYouPlayer = (gameSettings) =>\n  gameSettings && gameSettings.players && gameSettings.players.length\n    ? gameSettings.players[0]\n    : null\n\nconst findCarnacPlayer = (gameSettings) =>\n  gameSettings && gameSettings.players && gameSettings.players.length\n    ? gameSettings.players[1]\n    : null\n\nconst SelectionsOverlayContainer = styled.div`\n  color: red;\n  font-weight: bold;\n  text-align: right;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: ${({ correct }) =>\n    correct ? \"rgba(75, 75, 75, 0.8)\" : \"rgba(75, 75, 75, 0.0)\"};\n  width: 100%;\n  height: 100%;\n`\n\nconst CheckButtonContainer = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0%;\n`\n\nconst SelectionsOverlay = ({ index }) => {\n  const [gameSettings] = useContext(GameContext)\n  const _carnac = findCarnacPlayer(gameSettings)\n  const _you = findYouPlayer(gameSettings)\n  return (\n    <SelectionsOverlayContainer\n      correct={isDefined(_you.score) && !gameSettings.images[index].correct}\n    >\n      {_carnac.score && _carnac.selections.includes(parseInt(index)) ? (\n        <CheckButtonContainer>\n          <CheckButton color={_carnac.color} isSelected={true} />\n        </CheckButtonContainer>\n      ) : null}\n    </SelectionsOverlayContainer>\n  )\n}\n\nconst Choices = () => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n\n  useEffect(() => {\n    resetGame(gameSettings, setGameSettings) // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const onSelectImage = (index) => {\n    const updated = { ...gameSettings }\n    const you = findYouPlayer(updated)\n    if (you.score) return\n    var img = updated.images[index]\n    if (img.hasOwnProperty(\"isSelected\")) img.isSelected = !img.isSelected\n    else img.isSelected = true\n    you.selections = updated.images\n      .map((x, index) => ({ ...x, index }))\n      .filter((x) => x.isSelected)\n      .map((x) => x.index)\n    setGameSettings(updated)\n  }\n\n  const you = findYouPlayer(gameSettings)\n  return (\n    <div>\n      <Gallery\n        images={gameSettings.images}\n        enableImageSelection={!you.score}\n        onSelectImage={onSelectImage}\n        onClickThumbnail={onSelectImage}\n        tagStyle={labelStyle}\n        showLightboxThumbnails={true}\n        enableLightbox={false}\n      />\n    </div>\n  )\n}\n\nconst resetGame = async (original, updateFn) => {\n  const updated = { ...original }\n  const currentGameData = await generateGameData()\n  updated.currentGameData = currentGameData\n  updated.images = Object.keys(currentGameData.images).map((i) =>\n    toDeerImage(currentGameData.images[i], i)\n  )\n  const _carnac = findCarnacPlayer(updated)\n  const _you = findYouPlayer(updated)\n  _carnac.score = null\n  _you.score = null\n\n  const carnacAnswers = () => {\n    return Object.keys(currentGameData.images)\n      .filter((i) => {\n        const img = currentGameData.images[i]\n        return (\n          (\"carnac\" in img && img.carnac) ||\n          (!(\"carnac\" in img) && img.label === \"deer\")\n        )\n      })\n      .map((i) => parseInt(i))\n  }\n  _carnac.selections = carnacAnswers()\n  _you.selections = []\n  updateFn(updated)\n}\n\nconst calculateScore = (gameData, selections) => {\n  const _selections = selections || []\n  const wrongAnswers = _selections.filter(\n    (x) => !gameData.correctAnswers.includes(x)\n  )\n  const omittedAnswers = gameData.correctAnswers.filter(\n    (x) => !_selections.includes(x)\n  )\n\n  return (\n    Object.keys(gameData.images).length -\n    wrongAnswers.length -\n    omittedAnswers.length\n  )\n}\n\nconst ChallengeCarnacContainer = styled.div`\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nconst ChallengeCarnac = ({ onClick }) => {\n  const [gameSettings] = useContext(GameContext)\n  const selectionCount = gameSettings.players[0].selections.length\n  return (\n    <ChallengeCarnacContainer>\n      <div>\n        <p>\n          COMPY has seen a lot of deer images before, and he is really good at\n          identifying a deer when he sees one.\n        </p>\n        <p>\n          Can you tell which of the following deer images COMPY may have seen?\n          There is at least one.\n        </p>\n        <p>Select them and then hit the \"Challenge Carnac\" button (below).</p>\n        <p>\n          You will be playing against Carnac and whomever gets more correct,\n          wins!\n        </p>\n        <p style={{ textAlign: \"center\", fontWeight: \"bold\" }}>\n          {selectionCount > 0\n            ? `${selectionCount} picture(s) selected`\n            : \"1 or more selections required to play\"}\n        </p>\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <GameButton onClick={onClick} disabled={selectionCount === 0}>\n          Challenge Carnac!\n        </GameButton>\n      </div>\n    </ChallengeCarnacContainer>\n  )\n}\n\nconst InformationContainer = styled(Sidecar)`\n  display: flex;\n  margin-top: 2px;\n  height: 99%;\n  border: 1px solid darkgray;\n  border-top-right-radius: 15px;\n  border-bottom-right-radius: 15px;\n`\n\nconst Information = () => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const carnac = findCarnacPlayer(gameSettings)\n\n  const loadScores = () => {\n    const updated = { ...gameSettings }\n    const _carnac = findCarnacPlayer(updated)\n    const _you = findYouPlayer(updated)\n    _carnac.score = calculateScore(\n      gameSettings.currentGameData,\n      _carnac.selections\n    )\n    _you.score = calculateScore(gameSettings.currentGameData, _you.selections)\n    setGameSettings(updated)\n  }\n  return (\n    <InformationContainer>\n      {carnac.score ? <Results /> : <ChallengeCarnac onClick={loadScores} />}\n    </InformationContainer>\n  )\n}\n\nconst ResultsContainer = styled.div`\n  width: 100%;\n  margin: 10px;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nconst Results = () => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const carnac = findCarnacPlayer(gameSettings)\n  const you = findYouPlayer(gameSettings)\n  const playAgain = () => resetGame(gameSettings, setGameSettings)\n  const winner = () =>\n    you.score > carnac.score ? you : you.score < carnac.score ? carnac : null\n  const winnerMessage = () => {\n    const _winner = winner()\n    return _winner\n      ? `The winner is ${_winner.name}!`\n      : `${you.name} tied ${carnac.name}!`\n  }\n  return (\n    <ResultsContainer>\n      <div style={{ marginTop: 15 }}>\n        <ScoreBoard\n          home={you}\n          away={carnac}\n          bottomDisplay={winnerMessage}\n          totalPossible={GAME_IMAGE_COUNT}\n        />\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"column\", width: \"100%\" }}>\n        <GameButton onClick={playAgain}>Play Again!</GameButton>\n      </div>\n    </ResultsContainer>\n  )\n}\n\nconst GameContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst FullGame = () => {\n  return (\n    <Centered>\n      <GameContainer>\n        <div style={{ minWidth: SIZES.grid.width, maxWidth: SIZES.grid.width }}>\n          <Choices />\n        </div>\n        <div style={{ maxWidth: 440, minWidth: 440 }}>\n          <Information />\n        </div>\n      </GameContainer>\n    </Centered>\n  )\n}\n\nexport default FullGame\n","import { useState, useEffect } from \"react\"\n\n// https://usehooks.com/useWindowSize/\nconst useWindowSize = () => {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  })\n\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      })\n    }\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize)\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize()\n\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize)\n  }, []) // Empty array ensures that effect is only run on mount\n\n  return windowSize\n}\n\nexport default useWindowSize\n","import ReactDOM from \"react-dom\"\nimport PlainDraggable from \"plain-draggable\"\nimport LeaderLine from \"leader-line-new\"\nimport { useEffect, useRef } from \"react\"\nimport styled from \"styled-components\"\nimport \"./Game.css\"\nimport useWindowSize from \"../../hooks/useWindowSize\"\n\nconst SIZES = {\n  tile: {\n    height: 100,\n    width: 100,\n  },\n}\n\nconst DraggableImageBase = styled.img`\n  height: ${SIZES.tile.height}px;\n  width: ${SIZES.tile.width}px;\n  border: 1px solid slategray;\n  border-radius: 5px;\n`\n\nconst DraggableImageElement = styled(DraggableImageBase)`\n  z-index: 99;\n  position: absolute;\n  opacity: 75%;\n`\n\nconst DraggableImagePlaceholder = styled(DraggableImageBase)`\n  /* z-index: 99; */\n  /* position: absolute; */\n`\n\nconst between = (x, min, max) => x >= min && x <= max\nconst pointInBox = (point, box) =>\n  between(point.left, box.left, box.right) &&\n  between(point.top, box.top, box.bottom)\n\nconst findTarget = (targets, dropLocation) =>\n  targets\n    .map((x) => {\n      const rect = x.getBoundingClientRect()\n      return {\n        id: x.id,\n        top: rect.y,\n        left: rect.x,\n        bottom: rect.y + rect.height,\n        right: rect.x + rect.width,\n      }\n    })\n    .filter((x) => pointInBox(dropLocation, x))\n    .map((x) => x.id)\n    .slice(0, 1)\n    .shift()\n\nconst Connection = (fromId, toId, options = {}) =>\n  new LeaderLine(\n    document.getElementById(fromId),\n    document.getElementById(toId),\n    {\n      startPlugColor: \"slategray\",\n      endPlugColor: \"slategray\",\n      gradient: true,\n      ...options,\n    }\n  )\n\nconst DraggableImageContainer = ({ children }) => {\n  return ReactDOM.createPortal(children, document.getElementById(\"root\"))\n}\n\nconst moveDraggable = (draggable) => {\n  const correctPosition = document\n    .getElementById(draggable.target || draggable.source)\n    .getBoundingClientRect()\n  draggable.left = correctPosition.x\n  draggable.top = correctPosition.y\n}\n\nconst DraggableImage = ({ index, image, targetIds }) => {\n  const windowSize = useWindowSize()\n  const imagePlaceholderId = `image${index}`\n  const draggableDomRef = useRef()\n  const draggableRef = useRef()\n  useEffect(() => {\n    if (!draggableDomRef || !draggableDomRef.current) return\n    const targets = targetIds.map((x) => document.getElementById(x))\n    const d = new PlainDraggable(draggableDomRef.current)\n    d.source = imagePlaceholderId\n    draggableRef.current = d\n    let snapped = false\n    moveDraggable(d)\n    d.snap = {\n      targets,\n      edge: \"inside\",\n    }\n    d.onDrag = (moveTo) => {\n      snapped = moveTo.snapped\n    }\n    d.onDragEnd = (moveTo) => {\n      if (snapped) {\n        if (d.line) d.line.remove()\n        d.target = findTarget(targets, moveTo)\n        d.line = Connection(imagePlaceholderId, d.target)\n      }\n      moveDraggable(d)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  useEffect(() => moveDraggable(draggableRef.current), [windowSize])\n  return (\n    <>\n      <DraggableImagePlaceholder\n        id={imagePlaceholderId}\n        src={`img/${image}`}\n        alt={image}\n      />\n      <DraggableImageContainer>\n        <DraggableImageElement\n          src={`img/${image}`}\n          alt={image}\n          ref={draggableDomRef}\n        />\n      </DraggableImageContainer>\n    </>\n  )\n}\n\nconst DraggableContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n`\n\nconst DraggableTarget = styled(DraggableImageBase)`\n  background-color: #ddd;\n`\n\nconst images = [\n  \"cifar10_82_deer_in.png\",\n  \"cifar10_1615_deer_in.png\",\n  \"cifar10_1615_deer_in.png\",\n  \"cifar10_82_deer_in.png\",\n]\nconst targetIds = images.map((x, i) => `target${i}`)\n\nconst SideContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  background-color: lightgray;\n  padding: 25px;\n  border-radius: 10px;\n  margin: 20px 0;\n`\n\nconst toKey = (x, index) => `${x}_${index}`\n\nconst Match = () => {\n  return (\n    <DraggableContainer>\n      <SideContainer>\n        {images.map((x, i) => (\n          <DraggableImage\n            key={toKey(x, i)}\n            index={i}\n            image={x}\n            targetIds={targetIds}\n          />\n        ))}\n      </SideContainer>\n      <div>Match Em</div>\n      <SideContainer>\n        {targetIds.map((x, i) => (\n          <DraggableTarget key={toKey(x, i)} id={x} index={i} />\n        ))}\n      </SideContainer>\n    </DraggableContainer>\n  )\n}\n\nexport default Match\n","export const clean = (obj) =>\n  Object.keys(obj)\n    .filter((k) => obj[k] != null)\n    .reduce((a, k) => ({ ...a, [k]: obj[k] }), {})\n\nexport const styleDiv = (getDiv, style) => {\n  const div = getDiv()\n  Object.keys(style).forEach((k) => (div.style[k] = style[k]))\n}\n\nexport const isDef = (x) => x !== null && x !== undefined\n","import { GameContext } from \"../../context/GameContext\"\nimport { useContext, useState, useEffect, useRef, useMemo } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { gameData, isDefined } from \"../../util/data\"\nimport { clean, styleDiv, isDef } from \"../../util/misc\"\nimport {\n  Centered,\n  ToggleButton,\n  GameButton,\n  Emoji,\n  Sidecar,\n  RangeSlider,\n} from \"./Util\"\nimport { PieChart } from \"react-minimal-pie-chart\"\nimport SimpleImageSlider from \"react-simple-image-slider\"\nimport Select from \"react-select\"\nimport styled from \"styled-components\"\nimport \"./Game.css\"\n\nconst PRACTICE_IMAGE_SIZE = {\n  container: {\n    width: 660,\n    height: 560,\n  },\n  image: {\n    width: 300,\n    height: 300,\n  },\n}\n\nconst AI_NAME = \"COMPY\"\nconst COLORS = {\n  yes: \"#4caf50\",\n  no: \"#dc004d\",\n  neutral: \"antiquewhite\",\n}\n\nconst generateGameData = async () => {\n  const _gameData = await gameData()\n  const images = _gameData.practiceOptions.reduce(\n    (all, x, i) => ({ ...all, [i]: x }),\n    {}\n  )\n  const scrollingImages = Object.keys(images).map((i) => ({\n    ...images[i],\n    url: `img/${images[i].path}`,\n  }))\n  return {\n    gameData: _gameData,\n    images,\n    scrollingImages,\n    correctAnswers: Object.keys(images)\n      .filter((i) => images[i].correct)\n      .map((i) => parseInt(i)),\n  }\n}\n\nconst answer = (property, gameSettings, img) =>\n  !(img in gameSettings.practiceRound)\n    ? null\n    : gameSettings.practiceRound[img][property]\n\nconst allQuestionsAnswered = (gameSettings) =>\n  Object.keys(gameSettings.practiceRound).reduce(\n    (all, x) => all && isDefined(gameSettings.practiceRound[x].seenbefore),\n    true\n  )\n\nconst PracticeResultContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 10px;\n  border-top: 1px solid lightgray;\n  padding-top: 10px;\n`\nconst PracticeResult = ({\n  question: { path, correct, agree, seenbefore },\n  questionNumber,\n  isCurrentImage,\n}) => {\n  const answer =\n    !isDefined(agree) || !isDefined(seenbefore)\n      ? \"waiting\"\n      : (seenbefore && correct) || (!seenbefore && !correct)\n      ? \"correct\"\n      : \"incorrect\"\n  const displaySettings = {\n    waiting: {\n      text: \"Waiting on your guesses...\",\n      color: \"black\",\n    },\n    correct: {\n      text: `You know ${AI_NAME} well!`,\n      color: COLORS.yes,\n    },\n    incorrect: {\n      text: `Sorry, you don't know ${AI_NAME} very well...`,\n      color: COLORS.no,\n    },\n  }\n  const display = displaySettings[answer]\n  return (\n    <PracticeResultContainer>\n      <b style={{ color: display.color }} title={path}>\n        {isCurrentImage ? \"> \" : \"\"} Image {questionNumber}\n      </b>\n      <div>{display.text}</div>\n    </PracticeResultContainer>\n  )\n}\n\nconst EndButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  /* align-items: center; */\n`\nconst EndButtons = ({ resetGame }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const challengeCarnac = () => {\n    const updated = { ...gameSettings }\n    updated.previousPracticeRounds.push({ ...updated.practiceRound })\n    updated.practiceRound = {}\n    setGameSettings(updated)\n  }\n  return (\n    <EndButtonsContainer>\n      <GameButton onClick={resetGame}>More Practice</GameButton>\n      <Link to=\"/game\">\n        <GameButton onClick={challengeCarnac}>Challenge Carnac!</GameButton>\n      </Link>\n    </EndButtonsContainer>\n  )\n}\n\nconst PracticeResultsContainer = styled(Sidecar)`\n  border-top: 1px solid slategray;\n  border-bottom: 1px solid slategray;\n  border-right: 1px solid slategray;\n  border-top-right-radius: 15px;\n  padding: 10px;\n  border-bottom-right-radius: 15px;\n  min-width: 350px;\n  max-width: 350px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nconst PracticeResultsTitle = styled.div`\n  border-bottom: 2px solid darkgray;\n  font-size: 1.9rem;\n  font-weight: 500;\n  text-align: center;\n  padding-bottom: 12px;\n  margin: 10px 0;\n  text-shadow: 2px 2px 2px slategray;\n`\n\nconst PracticeResults = ({ resetGame, currentImageIndex }) => {\n  const [gameSettings] = useContext(GameContext)\n  return (\n    <PracticeResultsContainer>\n      <div>\n        <PracticeResultsTitle>Practice Round</PracticeResultsTitle>\n        <h4 style={{ margin: 10 }}>Make a selection for each image:</h4>\n        {Object.keys(gameSettings.practiceRound).map((x, i) => (\n          <PracticeResult\n            key={i}\n            questionNumber={i + 1}\n            isCurrentImage={i === currentImageIndex}\n            question={gameSettings.practiceRound[x]}\n          />\n        ))}\n      </div>\n      <div>\n        {allQuestionsAnswered(gameSettings) ? (\n          <EndButtons resetGame={resetGame} />\n        ) : null}\n      </div>\n    </PracticeResultsContainer>\n  )\n}\n\nconst ImageSliderOverrideStyles = ({ images, currentIndex }) => {\n  const [gameSettings] = useContext(GameContext)\n  const bulletContainerChildIndices = [3, 4]\n  const style = (containerIndex, index, colors) => {\n    const border =\n      currentIndex === index ? \"; border: 2px solid blue !important\" : \"\"\n    return `#practice-container > div:nth-child(1) > div:nth-child(2) > div > div:nth-child(${containerIndex}) > button:nth-child(${\n      index + 1\n    }) { background: linear-gradient(90deg, ${colors[0]} 50%, ${\n      colors[1]\n    } 50%) !important; ${border} }\n      `\n  }\n  const bulletStyle = (index, colors) =>\n    bulletContainerChildIndices.map((i) => style(i, index, colors)).join(\"\\n\")\n  const bulletStyles = () =>\n    images.map((_, i) => {\n      const agree = answer(\"agree\", gameSettings, images[i].path)\n      const seenbefore = answer(\"seenbefore\", gameSettings, images[i].path)\n      const toColor = (x) =>\n        x == null ? \"inherit\" : x ? COLORS.yes : COLORS.no\n      return bulletStyle(i, [toColor(agree), toColor(seenbefore)])\n    })\n\n  const imageSize = {\n    width:\n      PRACTICE_IMAGE_SIZE.image.width / PRACTICE_IMAGE_SIZE.container.width,\n    height:\n      PRACTICE_IMAGE_SIZE.image.height / PRACTICE_IMAGE_SIZE.container.height,\n  }\n  const imagePercent = {\n    width: parseInt(imageSize.width * 100),\n    height: parseInt(imageSize.height * 100),\n  }\n  const paddingLeft =\n    (PRACTICE_IMAGE_SIZE.container.width - PRACTICE_IMAGE_SIZE.image.width) / 2\n  const paddingTop =\n    (PRACTICE_IMAGE_SIZE.container.height - PRACTICE_IMAGE_SIZE.image.height) /\n    2\n\n  const imageStyles = () => [\n    `#practice-container > div:nth-child(1) > div:nth-child(2) > div > div:nth-child(1) > div {left: ${paddingLeft}px !important; top: ${paddingTop}px !important; width: ${imagePercent.width}% !important; height: ${imagePercent.height}% !important; border-radius: 5px; box-shadow: 0 0 5px #000000;}`,\n  ]\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: [...bulletStyles(), ...imageStyles()].join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst QuestionWithButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: slategray;\n  color: white;\n  padding: 10px;\n  border-radius: 10px;\n  height: 60px;\n`\nconst QuestionWithButtonsButtonContainer = styled.div`\n  padding-top: 5px;\n  padding-bottom: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`\nconst QuestionText = styled.div`\n  font-size: 0.9rem;\n`\nconst QuestionWithButtons = ({ question, onAnswer, defaultValue, index }) => (\n  <QuestionWithButtonsContainer>\n    <QuestionText>{question}</QuestionText>\n    <QuestionWithButtonsButtonContainer>\n      <ToggleButton\n        defaultValue={defaultValue}\n        onToggle={onAnswer}\n        trueBgColor={COLORS.yes}\n        falseBgColor={COLORS.no}\n        trueLabel={<Emoji symbol=\"0x2714\" />}\n        falseLabel={<Emoji symbol=\"0x2716\" />}\n      />\n    </QuestionWithButtonsButtonContainer>\n  </QuestionWithButtonsContainer>\n)\n\nconst ProbabilityContainer = styled.div`\n  position: absolute;\n  z-index: 2;\n  background-color: slategray;\n  top: 130px;\n  padding: 10px;\n  left: 40px;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  border-radius: 15px;\n  width: 85px;\n  height: 85px;\n  text-align: center;\n`\nconst Probability = ({ value }) => {\n  const percent = (value * 100).toFixed(1)\n  return (\n    <ProbabilityContainer>\n      <div>Probability</div>\n      <PieChart\n        animate\n        reveal={100}\n        data={[\n          { value: percent, color: \"#ccc\" },\n          { value: 100 - percent, color: \"#777\", hideLabel: true },\n        ]}\n        totalValue={100}\n        lineWidth={30}\n        label={({ dataEntry }) =>\n          dataEntry.hideLabel ? null : `${dataEntry.value}%`\n        }\n        labelStyle={{\n          fontSize: \"1.1rem\",\n          fill: \"white\",\n        }}\n        labelPosition={0}\n      />\n    </ProbabilityContainer>\n  )\n}\n\nconst TuningsContainer = styled.div`\n  position: absolute;\n  z-index: 2;\n  background-color: slategray;\n  top: 320px;\n  padding: 15px;\n  left: 20px;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  border-radius: 15px;\n  width: 110px;\n`\n\nconst TuningSelectContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n`\n\nconst TuningSelect = (props) => {\n  const selectStyles = {\n    container: (provided) => ({ ...provided, width: \"100%\" }),\n    indicatorsContainer: (provided) => ({ ...provided, display: \"none\" }),\n    option: (provided, { data }) => ({\n      ...provided,\n      whiteSpace: \"nowrap\",\n      color: \"black\",\n      \":before\": {\n        content: `${data.icon ? `'${data.icon}'` : \"''\"}`,\n        width: \"15px\",\n        padding: \"0 5px 0 0 !important\",\n        display: \"inline-block\",\n        textAlign: \"center\",\n      },\n    }),\n    menu: (provided) => ({\n      ...provided,\n      width: \"fit-content\",\n    }),\n    singleValue: (provided) => ({\n      ...provided,\n      fontSize: \"0.8rem\",\n    }),\n  }\n\n  return <Select styles={selectStyles} isSearchable={false} {...props} />\n}\n\nconst Tunings = ({ image, getImageDiv, onLoadImageVariant }) => {\n  const defaultStyle = {\n    noise: 0,\n  }\n  const [styles, setStyles] = useState(defaultStyle)\n  const [selectedVariant, setSelectedVariant] = useState(null)\n  const changeImage = (key) =>\n    styleDiv(getImageDiv, {\n      transition: \"none\",\n      \"background-image\":\n        !styles[key] && key in image.variants && \"path\" in image.variants[key]\n          ? `url(\"img/${image.variants[key].path}\")`\n          : `url(\"img/${image.path}\")`,\n    })\n\n  const variantLabel = (key) => {\n    return (image.variants[key] || image).label\n  }\n  const resetImage = () => {\n    console.log(\"Resetting image....\")\n    changeImage(\"unknown\")\n    onLoadImageVariant({})\n    setStyles({ ...defaultStyle })\n  }\n\n  const updateImage = (key, additionalStyles = {}) => {\n    const toggle = !styles[key]\n    changeImage(key)\n    onLoadImageVariant(\n      clean({\n        probability: toggle\n          ? key in image.variants\n            ? image.variants[key].probability\n            : null\n          : null,\n        label: variantLabel(key),\n      })\n    )\n    setStyles({ ...defaultStyle, [key]: toggle, ...additionalStyles })\n  }\n  const addNoise = (noiseLevel) =>\n    updateImage(`noise${noiseLevel}`, { noise: noiseLevel })\n\n  const augmentVariants = Object.keys(image.variants || {}).filter(\n    (x) => !x.startsWith(\"noise\")\n  )\n  const optionDecorations = {\n    hflip: {\n      label: () => \"Horizontal Flip\",\n      icon: () => \"\\\\21C4\",\n    },\n    vflip: {\n      label: () => \"Vertical Flip\",\n      icon: () => \"\\\\21C5\",\n    },\n    \"rot*\": {\n      label: (x) => `${x.replace(\"rot\", \"Rotate \")}°`,\n      icon: () => \"\\\\21BB\",\n    },\n  }\n\n  const noop = () => undefined\n  const decorate = (object, property, decoration, key) =>\n    (object[property] = (decoration[property] || noop)(key))\n\n  const decorateOption = (key) => {\n    const defaults = {\n      value: key,\n      label: key,\n      fn: updateImage.bind(null, key),\n    }\n    let decoration = undefined\n    if (key in optionDecorations) {\n      decoration = optionDecorations[key]\n    } else {\n      const decorationKey = Object.keys(optionDecorations)\n        .filter((x) => x.includes(\"*\"))\n        .find((x) => key.startsWith(x.replace(\"*\", \"\")))\n      if (decorationKey) {\n        decoration = optionDecorations[decorationKey]\n      }\n    }\n\n    if (decoration) {\n      decorate(defaults, \"label\", decoration, key)\n      decorate(defaults, \"icon\", decoration, key)\n    }\n\n    return defaults\n  }\n\n  const options = [\n    {\n      value: \"normal\",\n      label: \"Normal\",\n      fn: resetImage,\n    },\n    ...augmentVariants.map(decorateOption),\n  ]\n\n  const noiseLevelVariants = Object.keys(image.variants || {})\n    .filter((x) => x.startsWith(\"noise\"))\n    .map((x) => parseInt(x.replace(\"noise\", \"\")))\n  const noiseLevels = [0, ...noiseLevelVariants]\n\n  return (\n    <TuningsContainer>\n      <TuningSelectContainer>\n        <TuningSelect\n          options={options}\n          value={selectedVariant || options[0]}\n          onChange={(x) => {\n            setSelectedVariant(x)\n            x.fn()\n          }}\n        />\n      </TuningSelectContainer>\n      <RangeSlider\n        label=\"Add Noise:\"\n        step={1}\n        min={0}\n        max={Math.max(...noiseLevels)}\n        value={styles.noise}\n        onChange={(level) => {\n          setSelectedVariant(null)\n          addNoise(level)\n        }}\n      />\n    </TuningsContainer>\n  )\n}\n\nconst Caption = styled.div`\n  position: absolute;\n  z-index: 5;\n  background-color: slategray;\n  color: white;\n  padding: 8px;\n  border-bottom-right-radius: 8px;\n  border-top-left-radius: 15px;\n  font-size: 1.4rem;\n`\n\nconst SwitchModeContainer = styled.div`\n  position: absolute;\n  right: 0;\n  z-index: 5;\n  background-color: slategray;\n  color: white;\n  padding: 8px;\n  border-bottom-left-radius: 15px;\n  font-size: 1.2rem;\n  line-height: 1.7;\n`\n\nconst SwitchModeButton = styled.button`\n  border: 0;\n  outline: none;\n  background: none;\n  font-size: 1.2rem;\n  color: ${({ selected }) => (selected ? \"black\" : \"white\")};\n  flex: 1;\n  font-family: Futura;\n  transition: text-shadow 0.25s ease;\n  &:hover {\n    cursor: pointer;\n    text-shadow: 1px 1px 1px black;\n  }\n`\n\nconst SwitchMode = ({ mode, onSwitchMode }) => {\n  const labels = {\n    trick: \"Back to Game\",\n  }\n  const label = mode in labels ? labels[mode] : `Trick ${AI_NAME}?`\n  const toModes = {\n    trick: null,\n  }\n  const toMode = mode in toModes ? toModes[mode] : \"trick\"\n  return (\n    <SwitchModeContainer>\n      <SwitchModeButton onClick={() => onSwitchMode(toMode)}>\n        {label}\n      </SwitchModeButton>\n    </SwitchModeContainer>\n  )\n}\n\nconst PracticeVoteButtonsContainer = styled.div(\n  ({ containerSize, containerSidePadding }) => `\n  width: ${containerSize.width - containerSidePadding * 2}px;\n  height: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  position: absolute;\n  padding: 0 ${containerSidePadding}px;\n  top: ${containerSize.height - containerSidePadding - 80}px;\n  z-index: 1;\n    `\n)\n\nconst PictureLabel = styled.div`\n  border-radius: 5px;\n  display: inline-block;\n  padding-left: 4px;\n  padding-right: 4px;\n  color: ${(props) => (props.changed ? \"white\" : \"#333\")};\n  background-color: ${(props) => (props.changed ? \"#dc004d\" : \"white\")};\n  border: 1px solid lightgray;\n  border-color: ${(props) => (props.changed ? \"antiquewhite\" : \"lightgray\")};\n  transition: background-color 1s ease;\n`\n\nconst ImageControls = ({ getImageDiv, images, index, onChange }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const fallbackProbability = 0.5\n  const [displayMode, setDisplayMode] = useState(null)\n  const [loadedImage, setLoadedImage] = useState({})\n  const image = images[index]\n  const defaultLoadedImageState = useMemo(\n    () =>\n      image\n        ? {\n            probability: image.probability || fallbackProbability,\n            label: image.label,\n          }\n        : { probability: fallbackProbability, label: \"unknown\" },\n    [image]\n  )\n  useEffect(() => {\n    setLoadedImage(defaultLoadedImageState)\n  }, [index, defaultLoadedImageState])\n\n  if (!images) return null\n\n  const resetImage = () => {\n    styleDiv(getImageDiv, {\n      \"background-image\": `url(\"img/${image.path}\")`,\n    })\n  }\n  const onClickUpdateProperty = (property, guessed) => {\n    const updated = { ...gameSettings }\n    updated.practiceRound[images[index].path][property] = guessed\n    setGameSettings(updated)\n  }\n  const onAgreementClick = onClickUpdateProperty.bind(null, \"agree\")\n  const onSeenBeforeClick = onClickUpdateProperty.bind(null, \"seenbefore\")\n\n  const containerSidePadding = 10\n  const question = gameSettings.practiceRound[images[index].path]\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Caption>\n        {AI_NAME} thinks this is a{\" \"}\n        <PictureLabel\n          changed={\n            isDef(loadedImage.previousLabel) &&\n            loadedImage.label !== loadedImage.previousLabel\n          }\n          title={`Previous: ${loadedImage.previousLabel || \"none\"}`}\n        >\n          {loadedImage.label}\n        </PictureLabel>\n      </Caption>\n      {images[index].variants ? (\n        <SwitchMode\n          mode={displayMode}\n          onSwitchMode={(mode) => {\n            resetImage()\n            setDisplayMode(mode)\n            onChange(clean({ displayMode: mode }))\n          }}\n        />\n      ) : null}\n      {displayMode && displayMode === \"trick\" ? (\n        <Tunings\n          image={images[index]}\n          getImageDiv={getImageDiv}\n          onLoadImageVariant={(x) => {\n            setLoadedImage({\n              ...defaultLoadedImageState,\n              ...x,\n              previousLabel: loadedImage.label,\n            })\n            onChange({ ...defaultLoadedImageState, ...x, displayMode })\n          }}\n          probability={loadedImage.probability}\n        />\n      ) : null}\n      {displayMode && displayMode === \"trick\" ? (\n        <Probability value={loadedImage.probability} />\n      ) : null}\n      <ImageSliderOverrideStyles images={images} currentIndex={index} />\n      {displayMode !== \"trick\" ? (\n        <PracticeVoteButtonsContainer\n          containerSize={PRACTICE_IMAGE_SIZE.container}\n          containerSidePadding={containerSidePadding}\n        >\n          <QuestionWithButtons\n            question=\"Do you agree with COMPY?\"\n            onAnswer={onAgreementClick.bind(null)}\n            defaultValue={question.agree}\n            index={index}\n          />\n          <QuestionWithButtons\n            question={`Has ${AI_NAME} seen this before?`}\n            onAnswer={onSeenBeforeClick.bind(null)}\n            defaultValue={question.seenbefore}\n            index={index}\n          />\n        </PracticeVoteButtonsContainer>\n      ) : null}\n    </div>\n  )\n}\n\nconst resetGame = async (original, updateFn, setCurrentIndex) => {\n  console.log(\"Game reset\")\n  const updated = { ...original }\n  updated.version = isDefined(updated.version) ? updated.version + 1 : 1\n  const currentGameData = await generateGameData()\n  if (updated.practiceRound && Object.keys(updated.practiceRound).length) {\n    updated.previousPracticeRounds.push({ ...updated.practiceRound })\n  }\n  updated.currentGameData = currentGameData\n  setCurrentIndex(0)\n  updated.practiceRound = currentGameData.scrollingImages.reduce(\n    (all, x, i) => ({\n      ...all,\n      [x.path]: { ...x },\n    }),\n    {}\n  )\n  updateFn(updated)\n}\n\nconst PracticeContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`\nconst Practice = () => {\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const [imageState, setImageState] = useState({})\n  const reset = () => resetGame(gameSettings, setGameSettings, setCurrentIndex)\n  const sliderRef = useRef()\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(reset, [])\n\n  const currentImage = () =>\n    sliderRef.current.children[1].children[0].children[0].children[0]\n\n  if (\n    !gameSettings.currentGameData ||\n    !gameSettings.currentGameData.scrollingImages\n  )\n    return null\n\n  return gameSettings.currentGameData ? (\n    <Centered>\n      <PracticeContainer id=\"practice-container\">\n        <div ref={sliderRef}>\n          <ImageControls\n            getImageDiv={currentImage}\n            images={gameSettings.currentGameData.scrollingImages}\n            index={currentIndex}\n            onChange={setImageState}\n          />\n          <SimpleImageSlider\n            key={gameSettings.version}\n            width={PRACTICE_IMAGE_SIZE.container.width}\n            height={PRACTICE_IMAGE_SIZE.container.height}\n            images={gameSettings.currentGameData.scrollingImages}\n            showBullets={imageState.displayMode !== \"trick\"}\n            showNavs={imageState.displayMode !== \"trick\"}\n            navStyle={2}\n            onStartSlide={(idx) => {\n              setCurrentIndex(idx - 1)\n            }}\n            style={{\n              borderBottomLeftRadius: 15,\n              borderTopLeftRadius: 15,\n              backgroundColor: null,\n              border: \"1px solid slategray\",\n            }}\n          />\n        </div>\n        <PracticeResults resetGame={reset} currentImageIndex={currentIndex} />\n      </PracticeContainer>\n    </Centered>\n  ) : null\n}\n\nexport default Practice\n","import { Centered, GameButton } from \"./Util\"\nimport styled from \"styled-components\"\nimport { Link } from \"react-router-dom\"\n\nconst Container = styled.div`\n  border-radius: 10px;\n  background-color: antiquewhite;\n  box-shadow: 0 0 4px gray;\n  text-align: center;\n  padding: 40px;\n`\n\nconst Title = styled.h1`\n  font-family: Futura;\n  font-size: 4rem;\n  &:before,\n  &:after {\n    content: \"\\\\01f9d9\"; // :mage:\n  }\n`\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n`\n\nconst Menu = () => {\n  return (\n    <Centered>\n      <Container>\n        <Title>CHALLENGE CARNAC!</Title>\n        <p title={`Running in ${process.env.NODE_ENV} mode`}>\n          COMPY has seen a lot of deer images before, and he is really good at\n          identifying a deer when he sees one.\n        </p>\n        <p>\n          Can you tell which of the following deer images COMPY may have seen?\n        </p>\n        <p>\n          Click Practice to scroll through the pictures one at a time and test\n          your knowledge about COMPY.\n        </p>\n        <p>\n          When you are ready, you can click Play to play a game of who knows\n          COMPY best.\n        </p>\n        <ButtonContainer>\n          <Link to=\"/practice\">\n            <GameButton>Practice</GameButton>\n          </Link>\n          {/* <Link to=\"/match\">\n            <GameButton>Match</GameButton>\n          </Link> */}\n          <Link to=\"/game\">\n            <GameButton>Game</GameButton>\n          </Link>\n        </ButtonContainer>\n      </Container>\n    </Centered>\n  )\n}\n\nexport default Menu\n","import { GameContextProvider } from \"../context/GameContext\"\nimport { useState } from \"react\"\nimport { withRouter } from \"react-router-dom\"\nimport CheckButton from \"react-grid-gallery/lib/CheckButton\"\nimport { Fab, Action } from \"react-tiny-fab\"\nimport \"react-tiny-fab/dist/styles.css\"\nimport FullGame from \"../components/game/FullGame\"\nimport Match from \"../components/game/Match\"\nimport Practice from \"../components/game/Practice\"\nimport Menu from \"../components/game/Menu\"\nimport Modal from \"react-modal\"\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\"\n\nModal.setAppElement(\"#root\")\n\nconst PageHeader = ({ title, subtitle }) => {\n  const styles = {\n    container: {\n      marginBottom: 5,\n    },\n    title: {\n      fontSize: 20,\n      fontWeight: \"bold\",\n    },\n    subtitle: {\n      fontSize: 14,\n      color: \"gray\",\n    },\n  }\n  return (\n    <div style={styles.container}>\n      <div style={styles.title}>{title}</div>\n      <span style={styles.subtitle}>{subtitle}</span>\n    </div>\n  )\n}\n\nconst GameModal = withRouter(({ history }) => {\n  const [isModalOpen, setModalOpen] = useState(false)\n  const toggleModal = () => setModalOpen(!isModalOpen)\n  const returnToMenu = () => history.push(\"/\")\n\n  return (\n    <>\n      <Modal\n        isOpen={isModalOpen}\n        onRequestClose={toggleModal}\n        contentLabel=\"My dialog\"\n      >\n        <PageHeader\n          title=\"A game of 16 questions…beat Carnac!\"\n          subtitle=\"AI Jimmy is really good at identifying the object in images that he\n            has seen before. Select (check) which of the following images you\n            think Jimmy remembers. You will be playing against Carnac and who\n            ever gets more correct, wins!\"\n        />\n        <button\n          onClick={toggleModal}\n          style={{\n            position: \"absolute\",\n            top: 5,\n            right: 5,\n            border: 0,\n            background: \"none\",\n          }}\n        >\n          <CheckButton color=\"black\" isSelected={true} />\n        </button>\n      </Modal>\n      <Fab\n        alwaysShowTitle={true}\n        mainButtonStyles={{\n          backgroundColor: \"slategray\",\n        }}\n        icon=\". . .\"\n      >\n        {/* <Action text=\"Info\" onClick={toggleModal}>\n          i\n        </Action> */}\n        <Action text=\"Menu\" onClick={returnToMenu}>\n          m\n        </Action>\n      </Fab>\n    </>\n  )\n})\n\nconst GameView = () => {\n  return (\n    <GameContextProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/practice\">\n            <Practice />\n          </Route>\n          <Route path=\"/match\">\n            <Match />\n          </Route>\n          <Route path=\"/game\">\n            <FullGame />\n          </Route>\n          <Route path=\"/\">\n            <Menu />\n          </Route>\n        </Switch>\n        <GameModal />\n      </Router>\n    </GameContextProvider>\n  )\n}\n\nexport default GameView\n","import \"./App.css\"\n// import PickView from \"./views/PickView\"\nimport GameView from \"./views/GameView\"\n\nconst App = () => {\n  return (\n    <GameView />\n    // <PickView />\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}