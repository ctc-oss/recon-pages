{"version":3,"sources":["context/GameContext.js","components/game/Scoreboard.js","util/data.js","util/misc.js","components/game/InformationTooltip.js","components/game/Util.js","components/game/TwentyQuestions.js","components/game/Match.js","components/game/TwentyQuestionsPractice.js","components/game/Menu.js","components/chart/LabelOnlyDistanceChartSet.js","components/chart/ExperimentLabelOnlyCharts.js","components/ImageNoise.js","components/story/ImageClasses.js","components/story/TargetModel.js","components/ImageAnimation.js","components/story/InputOutput.js","components/story/ReverseEngineeringDataPrototypesDiagram.js","components/story/FlowChart.js","components/story/MiaFlowChart.js","components/StretchText.js","components/Story.js","context/PickContext.js","util/questions.js","components/pick/Pick.js","components/ideas/riskScores/utils.js","components/ideas/riskScores/Radar.js","components/ideas/riskScores/ParallelCoordinates.js","components/ideas/riskScores/Legend.js","components/ideas/riskScores/Filter.js","components/ideas/RiskScores.js","components/game/PlayingCard.js","components/ideas/Blackjack.js","components/ideas/Ideas.js","views/GameView.js","App.js","reportWebVitals.js","index.js"],"names":["GameContext","createContext","GameContextProvider","props","useState","players","name","color","selections","score","images","previousPracticeRounds","practiceRound","gameSettings","setGameSettings","Provider","value","children","scoreDisplays","styled","div","player","totalPossible","percentage","toFixed","sample","items","size","map","x","r","Math","random","sort","a","b","slice","length","sanitizeJson","obj","Object","keys","reduce","all","p","toLowerCase","cleanObject","filter","key","allGroups","data","Set","groups","practiceSet","groupNumber","includes","gameData","path","snippetId","fetchPath","fetch","allOptions","json","correctData","practiceOptions","gameOptions","matchData","match","easy","hard","isDefined","undefined","filterObject","predicate","k","clean","styleDiv","getDiv","style","forEach","isDef","isEmpty","arr","shuffle","reduceRight","res","_","__","s","push","splice","randomItem","values","chain","console","log","bind","fns","duration","delay","t","Promise","resolve","setTimeout","StyledInstructions","Instructions","StyledInformationButton","button","InformationTooltip","triggerText","triggerStyle","id","Date","now","floor","getContent","effect","place","data-for","data-tip","CenteredOuter","CenteredInner","Centered","ToggleButtonCheckBoxWrapper","CheckButton","checked","backgroundColor","left","ToggleButton","trueLabel","falseLabel","trueBgColor","falseBgColor","onToggle","defaultValue","onClick","right","GameButton","Emoji","className","label","symbol","symbols","Array","isArray","role","aria-label","String","fromCodePoint","Sidecar","StyledRangeSlider","ControlLabel","position","RangeTrack","RangeHandle","RangeSlider","min","max","onChange","step","labelPosition","handleStyle","_label","_value","renderTrack","renderThumb","marginTop","height","StyledGameTitle","GameTitle","information","fadeIn","keyframes","StyledAnswerSvg","WrongAnswerX","width","strokeWidth","stroke","fill","rx","strokeLinecap","cornerPadding","viewBox","y","x1","y1","x2","y2","RightAnswerCheck","strokeLinejoin","checkPoints","cx","cy","points","join","SIZES","generateGameData","gameMode","gameDataModel","_gameData","i","correctAnswers","correct","parseInt","labelStyle","padding","fontSize","background","marginRight","toDeerImage","img","index","image","tags","src","thumbnail","thumbnailWidth","thumbnailHeight","customOverlay","toImage","_img","title","findYouPlayer","StyledAnswersOverlay","AnswerOverlay","AnswersOverlay","useContext","_you","shouldShowAnswers","Choices","noise","settings","useEffect","resetGame","originalImages","noiseKey","variant","variants","hasVariant","onSelectImage","updated","you","hasOwnProperty","isSelected","enableImageSelection","onClickThumbnail","tagStyle","showLightboxThumbnails","enableLightbox","mode","original","updateFn","currentGameData","StyledControls","StyledControlEnd","Score","Controls","onSettingsUpdated","noiseLevel","setNoiseLevel","setScore","showRetryButton","setShowRetryButton","selectionCount","level","_selections","wrongAnswers","omittedAnswers","calculateScore","disabled","StyledGame","Game","GameInformation","TwentyQuestions","setSettings","marginBottom","_settings","DraggableImageBase","StyledDraggableImage","DraggableImage","correctTargets","onGuess","draggableId","useDrag","type","item","end","monitor","dropResult","getDropResult","guess","source","target","collect","isDragging","drag","opacity","alt","ref","DraggableContainer","ClearImageSelectionButton","DraggableTargetDrop","DraggableTarget","matches","onClearSelection","useDrop","accept","drop","canDrop","isOver","isActive","from","find","to","display","flexDirection","backgroundImage","marginLeft","SideContainer","MiddleSection","GameInfo","learn","matchCount","choiceCount","ScoreBoard","guesses","textAlign","incorrect","RetryButton","won","Options","onGameOver","onRetry","setWon","buttonText","setButtonText","document","getElementsByClassName","total","text","maxStrikes","toKey","MatchLayout","model","setDisabled","targetHasGuess","targets","useMemo","sources","setMatches","resetGuesses","useCallback","setGuesses","lastGuess","setLastGuess","sourceId","prev","onClearGuess","getTime","start","animateDrawing","Match","retries","setRetries","setModel","allImages","setAllImages","resetModel","initialMatches","initialChoices","extraCount","flat","extraChoices","attempt","_matchData","getMatchData","DndProvider","backend","HTML5Backend","PRACTICE_IMAGE_SIZE","AI_NAME","COLORS","setCurrentIndex","demo","version","practiceRoundNumber","scrollingImages","url","allQuestionsAnswered","seenbefore","StyledPracticeResult","current","PracticeResultTitle","PracticeResult","question","agree","questionNumber","isCurrentImage","answer","waiting","StyledEndButtons","EndButtons","StylePracticeResults","PracticeResultsTitle","PracticeResultsSubtitle","h4","PracticeResults","currentImageIndex","ImageSliderOverrideStyles","currentIndex","Selectors","imageSize","imagePercent","paddingLeft","paddingTop","dangerouslySetInnerHTML","__html","property","colors","border","_bulletStyle","StyledQuestionWithButtons","StyledQuestionWithButtonsButton","QuestionText","QuestionWithButtons","onAnswer","StyledTuningSideTile","TuningSideTile","StyledProbability","Probability","previousLabel","percent","PictureLabel","changed","margin","animate","reveal","hideLabel","totalValue","lineWidth","dataEntry","StyledTuningsOuter","StyledTuningSelect","TuningSelect","selectStyles","container","provided","indicatorSeparator","option","whiteSpace","content","icon","menu","singleValue","styles","isSearchable","Tunings","getImageDiv","onLoadImageVariant","defaultStyle","setStyles","selectedVariant","setSelectedVariant","changeImage","transition","variantLabel","updateImage","additionalStyles","toggle","probability","augmentVariants","startsWith","optionDecorations","hflip","vflip","replace","noop","decorate","object","decoration","options","fn","defaults","decorationKey","noiseLevelVariants","noiseLevels","Caption","StyledSwitchMode","SwitchModeButton","selected","SwitchMode","onSwitchMode","labels","trick","toModes","toMode","StyledPracticeVoteButtons","ImageControls","displayMode","setDisplayMode","loadedImage","setLoadedImage","defaultLoadedImageState","onSeenBeforeClick","guessed","caption","StyledPractice","StyledPracticeGame","TwentyQuestionsPractice","hideSideBar","imageState","setImageState","reset","sliderRef","useRef","querySelectorAll","showBullets","showNavs","navStyle","onStartSlide","idx","borderBottomLeftRadius","borderTopLeftRadius","Container","Title","h1","GameCards","GameCardContainer","GameCardTitle","GameCardButton","ButtonContainer","GameCard","links","games","Stack","OrScroll","Menu","ChartData","results","starter","g","range","threshold","totalFn","result","ChartContainer","reducePropWithFn","propKey","cumulative","v","d","Thresholds","maxXValue","maxYValue","minXValue","minYValue","pointsAtThreshold","series","Threshold","dataRange","xScale","yScale","columnWidth","columnX1","columnY1","columnX2","columnY2","minXEdge","maxXEdge","linePadding","columnPolyPoints","leftAreaPolyPoints","rightAreaPolyPoints","polyPoints","leftOfSliderLabel","rightOfSliderLabel","outsideAreaColor","rightLabelX","leftLabelX","isNaN","textAnchor","Fragment","dominantBaseline","Lines","top","bottom","datum","enablePoints","enableSlices","axisLeft","tickValues","legend","legendOffset","legendPosition","layers","StyledChartTitle","WaffleDot","borderWidth","borderColor","onHover","onLeave","onMouseEnter","onMouseMove","onMouseLeave","Waffle","rows","sqrt","columns","cellComponent","fillDirection","emptyColor","PieCenter","dataWithArc","centerX","centerY","PieCenterPercent","Pie","showTotal","innerRadius","QuadChart","LegendPart","swatch","borderRadius","colorPosition","justifyContent","Legend","gridTemplateColumns","FlexDiv","FlexColumns","FlexRows","ChartSet","models","sliderStep","sliderLabel","setThreshold","legendModel","mainChartWidth","smallChartHeight","main","outline","quad1","quad2","quad3","quad4","Colors","LegendModel","correctRate","test_results","target_test_fgs_incorrect","train_results","target_train_fgs_correct","ChartModels","target_train_fgs_acc","target_test_fgs_acc","target_train_fgs_incorrect","target_test_fgs_correct","ExperimentLabelOnlyDisanceChartSet","nodeSize","defaultNoise","bottomLabel","rawData","setRawData","setModels","setNoise","zeroResult","target_train_acc","target_train_correct","target_train_incorrect","target_test_acc","target_test_correct","target_test_incorrect","getRawData","LabelOnlyDistanceChartSet","toNoiseImage","StyledImageTile","StyledImageTileImage","rounded","StyledImageLabel","ImageTile","ImageTiles","tileSize","ImageNoise","imageSetNumber","rawImages","setRawImages","setImages","noiseLevelRange","setNoiseLevelRange","_rawImages","getImageData","noisyImages","sliderMin","sliderMax","Model","tagSize","count","StyledImg","Image","details","imageWidth","onSelect","hovered","setHovered","onMouseOver","onMouseOut","boxShadow","Images","Tag","ImageClasses","setSelected","alignItems","alignContent","minSize","maxSize","renderer","tag","customRenderer","Models","PuppiesToFood","yValues","arrows","MIA","defaultCircleProps","circleProps","column","override","rowIndex","Column","clickables","defaultProps","clickable","circleIsClickable","cursor","TargetModelArrow","col","_model","lineY","yValue","lineEndX","markerEnd","TargetModelDiagram","additionalShapes","clickableCircles","onClickCircle","xmlns","markerWidth","markerHeight","refX","refY","orient","c","PictureAndInformation","Picture","Information","Slides","Slide","Rotated","rotation","transform","RotatedText","StyledAnimateButton","ButtonSymbols","play","pause","AnimateButton","status","stateSymbols","stopped","playing","StyledAnimateSlider","ImageAnimation","imageAlt","info","onChangeImage","ImageWrapper","selectedIndex","setSelectedIndex","animating","setAnimating","selectIndex","nextIndex","onInput","e","StyledOutputDiagram","Columns","0","middlex","1","2","3","OutputDiagramColumn","heightOffset","OutputDiagram","selectedColumn","columnHeight","colIndex","ry","font","Output","lineProps","StyledImageWrapper","LineLabel","CircleArrowSourcePositions","bottomness","default","InputOutput","onColumnIndexChanged","circleArrowSource","setCircleArrowSource","setSelectedColumn","circleArrowSourceProps","minWidth","TargetModel","split","_y","startAnchor","offset","rightness","imageNumbers","imageSets","_class","Component","selectedClass","setSelectedClass","selectedImage","setSelectedImage","RowFlexContainer","valign","defaultLinkConfig","head","FlowCharts","validate","elements","issues","hasPosition","hasPositionedElements","hasUserDefinedLinks","buildLinks","l","config","StyledFlowChartElement","FlowChart","startAnimating","visible","chainLinkAnimation","betweenLinkDelay","shouldAnimate","setLinks","error","linkId","containerStyle","flex","elementStyle","element","startSocket","endAnchor","endSocket","headSize","ImageTitle","TitledElement","bordered","MiaFlowChart","endLabel","lightsteelblue","cornflowerblue","khaki","lightsalmon","StyledText","span","expanded","StretchText","nested","setExpanded","colorKey","_style","ScrollerContainer","Scroller","ScrollContainer","ScrollyHeaderSection","align","ScrollyContentSection","ScrollyStickySection","Footer","ScrollySectionWithBackgroundImage","sizePercent","imageOpacity","progress","WeaknessWithAI","stepOpacityStyle","LabelTile","PuppiesToFoodFlowChart","PuppiesVsCroissantsImages","before","after","slider","VerticalSpacer","PuppiesOrFoodImage","cover","Covers","securityPrivacyConcerns","clipPath","hoverShape","hoverTexture","hoverColor","_default","StyledHoverLink","HoverLink","offHover","PuppiesOrFoodHoverLink","setCover","StepContainer","PuppiesOrFoodStepContainer","currentView","viewName","PuppiesOrFood","setCurrentView","flexBasis","onStepEnter","onStepExit","href","rel","MembershipInferenceAttack","ModelInversionAttack","ReverseEngineeringDataPrototypes","ReverseEngineeringDataPrototypesDiagram","LabelOnlyAttackThreshold","ExperimentLabelOnlyCharts","DebuggerTitle","Debugger","viewState","hide","zIndex","Story","debugScrolling","currentViewState","setCurrentViewState","setViewState","view","onStepProgress","debug","PickContext","PickContextProvider","configurations","setConfigurations","questions","location","inline","link","description","imageryDataScientist","retrainWithNewData","trainWithExistingModel","complianceOfficer","OptionButton","Option","Question","configKey","currentConfigKey","setCurrentConfigKey","currentConfig","inlineOptions","linksKey","linkKey","contentStyle","outerStyle","onClickOption","Pick","FEATURES","InnerFilterLabel","TriState","o","RangeSelect","RANGE_COLORS","useFormikContext","setFieldValue","rangeValues","fontFamily","getTrackBackground","DEFAULT_FILTER","dataSet","DEFAULT_DATA_POINTS","DATA_POINT_KEYS","test_acc","train_acc","train_time_secs","mptl_all_acc","mptl_out_acc","mptl_in_acc","mptl_far_weighted","art_blackbox_all_acc","art_blackbox_out_acc","art_blackbox_in_acc","best_attack","best_attack_all_acc","art_rule_based_all_acc","art_rule_based_out_acc","art_rule_based_in_acc","art_label_only_db_all_acc","art_label_only_db_out_acc","art_label_only_db_in_acc","art_label_only_gap_all_acc","art_label_only_gap_out_acc","art_label_only_gap_in_acc","FILTERS","sourceKey","control","filterOptions","as","modelArchitecture","epochs","batchSize","numClasses","optimizerName","deleteRedundantAttackProps","keysToRemove","ATTACK_KEY_PARTS","alwaysShow","model_architecture","format","batch_size","optimizer_name","num_classes","data_augmentation","flag","attack_type","dpsgd","label_smoothing","trainable","attackKey","radarResultsAccuracy","inverseDistance","abs","exp","dataMappers","buildRadarChartModel","chartData","displayOptions","dataPoints","defaultReduced","metric","forAttackKeys","reduced","attack","pointKey","chartMap","indexBy","RadarChart","maxValue","dotBorderWidth","gridLabelOffset","enableDots","dotSize","isInteractive","tooltipFormat","ParallelCoordinatesChart","_dataPoints","chartMapper","parallelCoordinates","sorted","indexOf","buildParallelCoordinateModel","useMesh","pointSize","pointBorderWidth","axisBottom","tickRotation","CheckboxLegendLabel","CheckboxLegendCheck","CheckboxLegend","onLegendItemChecked","StyledCannedFilterSelection","CANNED_FILTERS","canned1","canned2","CannedFilterSelection","onSelectCannedFilter","custom","selection","setSelection","placeholder","cannedFilter","base","FilterContainer","FilterLabel","Labelled","htmlFor","FormSubmitButton","FilterForm","setFilter","onReset","blankedFilter","toBlanks","filterNullsToBlanks","initialValues","enableReinitialize","onSubmit","mapped","mapValue","f","filtered","filterProps","_filter","fk","inRange","buildFilterOptions","configs","array","updateFns","targetKey","updateFilterNoSelections","StyledChartSelectionButton","ChartSelectionButton","ChartSelection","selectedChartId","setSelectedChartId","charts","radar","DisplayOptions","setDisplayOptions","isClearable","isMulti","multiValueRemove","RiskScores","rawRiskScores","setRawRiskScores","setFilterOptions","setChartData","setLegend","resetFilter","_filterOptions","legendKeys","Radar","ParallelCoordinates","maxHeight","minHeight","OuterCard","Suits","hearts","char","diamonds","clubs","spades","largeMiddle","SpotLocations","A","J","Q","K","A1","A2","A3","A4","A5","B1","B2","B3","B4","B5","C1","C2","C3","C4","C5","Card","suit","CardBack","Element","Index","Spot","Spots","4","5","6","7","8","9","10","InnerSuitChar","PlayingCard","suitChar","fromCharCode","showBack","Blackjack","ideas","riskScores","component","blackjack","pick","IdeaComponentContainer","IdeaSelector","IdeaButton","IdeaDescriptionButton","DescriptionExpandCollapseButton","StyledDescriptionSidePanel","DescriptionPanel","panelRef","onClose","Ideas","selectedIdea","setSelectedIdea","selectedDescription","setSelectedDescription","descriptionPanelRef","onClickIdeaDescriptionButton","idea","handleClickOutside","event","contains","ignoreTargets","addEventListener","removeEventListener","Modal","setAppElement","CloseModal","EmailIcon","CloseButton","MessageUs","linkStyle","fontWeight","AboutUs","GameModal","withRouter","history","ModalContent","messageUs","modalContentStyle","aboutUs","modalContent","setModalContent","dimensions","isOpen","onRequestClose","overlay","backgroundSize","backgroundRepeat","backgroundPosition","alwaysShowTitle","mainButtonStyles","window","hash","scrollTo","behavior","GameView","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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AAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,GAAIE,GAAI,CAAC,EAAG,IACxB,CAAEF,KAAM,CAAC,EAAG,G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","file":"static/js/main.fed0bb72.chunk.js","sourcesContent":["import { useState, createContext } from \"react\"\n\nexport const GameContext = createContext()\n\nexport const GameContextProvider = (props) => {\n  const [gameSettings, setGameSettings] = useState({\n    players: [\n      { name: \"YOU\", color: \"green\", selections: [], score: null },\n      {\n        name: \"CARNAC\",\n        color: \"red\",\n        selections: [],\n        score: null,\n      },\n    ],\n    images: [],\n    previousPracticeRounds: [],\n    practiceRound: {},\n  })\n\n  return (\n    <GameContext.Provider value={[gameSettings, setGameSettings]}>\n      {props.children}\n    </GameContext.Provider>\n  )\n}\n","import styled from \"styled-components\"\n\nconst Container = styled.div`\n  margin-top: 2px;\n  background-color: #444;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  min-width: 400px;\n  max-width: 400px;\n  width: 400px;\n`\n\nconst Board = styled.div`\n  margin: 6px;\n  border: 5px solid white;\n  border-radius: 10px;\n  flex-direction: row;\n`\n\nconst SideContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst Side = styled.div`\n  flex: 1;\n  text-align: center;\n`\nconst Team = styled.div`\n  padding: 10px;\n  text-align: center;\n  font-size: 24pt;\n  border-bottom: 5px solid white;\n  margin: 0;\n  font-weight: bold;\n`\nconst ScoreContainer = styled.div`\n  padding: 10px;\n`\nconst Score = styled.div`\n  font-size: 48pt;\n  font-family: Impact, sans-serif;\n`\nconst Bottom = styled.div`\n  font-size: 18;\n  padding: 5px;\n  border-top: 5px solid white;\n  font-weight: bold;\n  text-align: center;\n`\n\nexport const scoreDisplays = (player, totalPossible) =>\n  player.score\n    ? {\n        score:\n          totalPossible > 0 ? `${player.score}/${totalPossible}` : player.score,\n        percentage:\n          totalPossible > 0\n            ? ((player.score / totalPossible) * 100).toFixed()\n            : null,\n      }\n    : null\n\nconst ScoreBoard = ({\n  home,\n  away,\n  bottomDisplay = () => \"\",\n  totalPossible = 0,\n}) => {\n  const ScoreboardSide = ({ player, style = {} }) => {\n    const displays = scoreDisplays(player, totalPossible)\n    return (\n      <Side style={style}>\n        <Team style={{ color: player.color }}>{player.name}</Team>\n        <ScoreContainer>\n          <Score>{displays.score}</Score>\n          {displays.percentage}\n        </ScoreContainer>\n      </Side>\n    )\n  }\n\n  const bottom = bottomDisplay()\n\n  return (\n    <Container>\n      <Board>\n        <SideContainer>\n          <ScoreboardSide player={home} />\n          <ScoreboardSide\n            player={away}\n            style={{ borderLeft: \"3px solid white\" }}\n          />\n        </SideContainer>\n        {bottom ? <Bottom>{bottom}</Bottom> : null}\n      </Board>\n    </Container>\n  )\n}\n\nexport default ScoreBoard\n","const colors = [\"0,0,255\", \"255,0,0\", \"0,255,0\", \"255,0,255\"]\n\nconst defaultDataSet = {\n  borderWidth: 1,\n}\n\nconst dataSet = (index) => {\n  const color = colors[index]\n  const backgroundColor = `rgba(${color},0.4)`\n  const borderColor = `rgba(${color},0.7)`\n  return {\n    ...defaultDataSet,\n    backgroundColor,\n    borderColor,\n  }\n}\n\nconst selectionData = (data) =>\n  Object.keys(data.MI_class_results || {}).reduce(\n    (all, x) => ({ ...all, [x]: data.MI_class_results[x].mi_auc }),\n    {}\n  )\n\nexport const configurationKeys = (configurations) =>\n  Object.keys(configurations).filter(\n    (x) => typeof configurations[x] === \"object\"\n  )\n\nconst fetchConfigurationData = async (configuration) => {\n  const key = (x) => `${x.flavor}_${x.dataset}_${x.architecture}_${x.train}`\n  const filepath = (name) => `./data/${name}.json`\n  const filekey = key(configuration)\n  let results\n  try {\n    const response = await fetch(filepath(filekey))\n    results = await response.json()\n  } catch (e) {\n    console.log(`No data file available for configuration ${filekey}`)\n    const response = await fetch(filepath(\"missing_data\"))\n    results = await response.json()\n  }\n  return [filekey, results]\n}\n\nexport const configurationData = async (configuration) => {\n  const [key, json] = await fetchConfigurationData(configuration)\n  return {\n    key,\n    data: selectionData(json),\n  }\n}\n\nexport const chartData = (selections) => {\n  const selectionKeys = configurationKeys(selections)\n  const hasData = selectionKeys.reduce(\n    (all, x) => all && \"data\" in selections[x],\n    true\n  )\n  if (hasData) {\n    const labels = [\n      ...new Set(\n        selectionKeys.reduce(\n          (all, x) => [...all, ...Object.keys(selections[x].data || {})],\n          []\n        )\n      ),\n    ].sort((a, b) => parseInt(a) > parseInt(b))\n    const keyData = selectionKeys.reduce(\n      (all, x) => ({\n        ...all,\n        [selections[x].key]: {\n          data: selections[x].data,\n          label:\n            `MI AUC (${selections[x].flavor}/${selections[x].dataset}/${selections[x].architecture}/${selections[x].train})`.toUpperCase(),\n        },\n      }),\n      {}\n    )\n    return {\n      labels,\n      datasets: Object.keys(keyData).map((x, i) => {\n        return {\n          ...dataSet(i),\n          label: keyData[x].label,\n          data: labels.map((y) => keyData[x].data[y]),\n        }\n      }),\n    }\n  } else return {}\n}\n\nconst sample = (items, size) =>\n  items\n    .map((x) => ({ x, r: Math.random() }))\n    .sort((a, b) => a.r - b.r)\n    .map((a) => a.x)\n    .slice(0, size || items.length)\n\nexport const PRACTICE_ROUND_IMAGE_COUNT = 5\nexport const GAME_IMAGE_COUNT = 12\n\nconst sanitizeJson = (obj) => {\n  const stringToBooleanOrOriginal = (p) =>\n    p && (p === \"true\" || p === \"false\") ? p.toLowerCase() === \"true\" : p\n  return Object.keys(obj).reduce(\n    (all, x) => ({\n      ...all,\n      [x]: stringToBooleanOrOriginal(obj[x]),\n    }),\n    {}\n  )\n}\n\nexport const cleanObject = (x) =>\n  Object.keys(x || {})\n    .filter((key) => x[key])\n    .reduce((all, key) => ({ ...all, [key]: x[key] }), {})\n\nconst allGroups = (data) =>\n  data.reduce((all, x) => [...new Set([...all, ...(x.groups || [])])], [])\n\nconst practiceSet = (images, groupNumber) =>\n  images.filter((x) => x.groups && x.groups.includes(groupNumber))\n\nexport const gameData = async ({\n  path = \"./data/game-data.json\",\n  snippetId = null,\n} = {}) => {\n  const fetchPath = snippetId\n    ? `https://gitlab-int.ctc.com/api/v4/snippets/${snippetId}/raw`\n    : path\n  const allOptions = await fetch(fetchPath)\n  const data = await allOptions.json()\n  const correctData = data.map(sanitizeJson)\n  return {\n    practiceOptions: allGroups(correctData).reduce(\n      (all, x) => ({ ...all, [x]: practiceSet(correctData, x) }),\n      {}\n    ),\n    gameOptions: sample(correctData, GAME_IMAGE_COUNT),\n  }\n}\n\nexport const matchData = async () => ({\n  \"bird_image_1.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_bird_threshold_512.png\",\n        \"match_game_cifar_robust_images_bird_0.png\",\n        \"match_game_cifar_robust_images_bird_1.png\",\n        \"match_game_cifar_robust_images_bird_2.png\",\n        \"match_game_cifar_robust_images_bird_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_bird_threshold_512.png\",\n        \"match_game_cifar_diluted_robust_images_bird_0.png\",\n        \"match_game_cifar_diluted_robust_images_bird_1.png\",\n        \"match_game_cifar_diluted_robust_images_bird_2.png\",\n        \"match_game_cifar_diluted_robust_images_bird_3.png\",\n      ],\n    },\n  },\n  \"cat_image_18.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_cat_threshold_512.png\",\n        \"match_game_cifar_robust_images_cat_0.png\",\n        \"match_game_cifar_robust_images_cat_1.png\",\n        \"match_game_cifar_robust_images_cat_2.png\",\n        \"match_game_cifar_robust_images_cat_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_cat_threshold_512.png\",\n        \"match_game_cifar_diluted_robust_images_cat_0.png\",\n        \"match_game_cifar_diluted_robust_images_cat_1.png\",\n        \"match_game_cifar_diluted_robust_images_cat_2.png\",\n        \"match_game_cifar_diluted_robust_images_cat_3.png\",\n      ],\n    },\n  },\n  \"deer_image_13.png\": {\n    match: {\n      easy: [\"match_game_cifar_robust_images_deer_threshold_512.png\"],\n      hard: [\"match_game_cifar_diluted_robust_images_deer_threshold_512.png\"],\n    },\n  },\n  \"dog_image_16.png\": {\n    match: {\n      easy: [\"match_game_cifar_robust_images_dog_threshold_512.png\"],\n      hard: [\"match_game_cifar_diluted_robust_images_dog_threshold_512.png\"],\n    },\n  },\n  \"boat_image_10.png\": {\n    match: {\n      easy: [\"match_game_cifar_robust_images_boat_threshold_512.png\"],\n      hard: [\"match_game_cifar_diluted_robust_images_boat_threshold_512.png\"],\n    },\n  },\n  \"car_image_1.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_car_threshold_512.png\",\n        \"match_game_cifar_robust_images_car_0.png\",\n        \"match_game_cifar_robust_images_car_1.png\",\n        \"match_game_cifar_robust_images_car_2.png\",\n        \"match_game_cifar_robust_images_car_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_car_threshold_512.png\",\n        \"match_game_cifar_diluted_robust_images_car_0.png\",\n        \"match_game_cifar_diluted_robust_images_car_1.png\",\n        \"match_game_cifar_diluted_robust_images_car_2.png\",\n        \"match_game_cifar_diluted_robust_images_car_3.png\",\n      ],\n    },\n  },\n  \"plane_image_1.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_plane_0.png\",\n        \"match_game_cifar_robust_images_plane_1.png\",\n        \"match_game_cifar_robust_images_plane_2.png\",\n        \"match_game_cifar_robust_images_plane_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_plane_0.png\",\n        \"match_game_cifar_diluted_robust_images_plane_1.png\",\n        \"match_game_cifar_diluted_robust_images_plane_2.png\",\n        \"match_game_cifar_diluted_robust_images_plane_3.png\",\n      ],\n    },\n  },\n  \"frog_image_1.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_frog_1.png\",\n        \"match_game_cifar_robust_images_frog_1.png\",\n        \"match_game_cifar_robust_images_frog_2.png\",\n        \"match_game_cifar_robust_images_frog_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_frog_0.png\",\n        \"match_game_cifar_diluted_robust_images_frog_1.png\",\n        \"match_game_cifar_diluted_robust_images_frog_2.png\",\n        \"match_game_cifar_diluted_robust_images_frog_3.png\",\n      ],\n    },\n  },\n  \"horse_image_16.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_horse_threshold_512.png\",\n        \"match_game_cifar_robust_images_horse_0.png\",\n        \"match_game_cifar_robust_images_horse_1.png\",\n        \"match_game_cifar_robust_images_horse_2.png\",\n        \"match_game_cifar_robust_images_horse_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_horse_threshold_512.png\",\n        \"match_game_cifar_diluted_robust_images_horse_threshold_512-2.png\",\n        \"match_game_cifar_diluted_robust_images_horse_0.png\",\n        \"match_game_cifar_diluted_robust_images_horse_1.png\",\n        \"match_game_cifar_diluted_robust_images_horse_2.png\",\n        \"match_game_cifar_diluted_robust_images_horse_3.png\",\n      ],\n    },\n  },\n  \"horse_image_1.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_horse_threshold_512.png\",\n        \"match_game_cifar_robust_images_horse_0.png\",\n        \"match_game_cifar_robust_images_horse_1.png\",\n        \"match_game_cifar_robust_images_horse_2.png\",\n        \"match_game_cifar_robust_images_horse_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_horse_threshold_512.png\",\n        \"match_game_cifar_diluted_robust_images_horse_threshold_512-2.png\",\n        \"match_game_cifar_diluted_robust_images_horse_0.png\",\n        \"match_game_cifar_diluted_robust_images_horse_1.png\",\n        \"match_game_cifar_diluted_robust_images_horse_2.png\",\n        \"match_game_cifar_diluted_robust_images_horse_3.png\",\n      ],\n    },\n  },\n  \"truck_image_1.png\": {\n    match: {\n      easy: [\n        \"match_game_cifar_robust_images_truck_0.png\",\n        \"match_game_cifar_robust_images_truck_1.png\",\n        \"match_game_cifar_robust_images_truck_2.png\",\n        \"match_game_cifar_robust_images_truck_3.png\",\n      ],\n      hard: [\n        \"match_game_cifar_diluted_robust_images_truck_0.png\",\n        \"match_game_cifar_diluted_robust_images_truck_1.png\",\n        \"match_game_cifar_diluted_robust_images_truck_2.png\",\n        \"match_game_cifar_diluted_robust_images_truck_3.png\",\n      ],\n    },\n  },\n})\n\nexport const isDefined = (x) => x !== null && x !== undefined\n","export const filterObject = (obj, predicate) =>\n  Object.keys(obj)\n    .filter(predicate)\n    .reduce((a, k) => ({ ...a, [k]: obj[k] }), {})\n\nexport const clean = (obj) => filterObject(obj, (k) => obj[k] != null)\n\nexport const styleDiv = (getDiv, style) => {\n  const div = getDiv()\n  Object.keys(style).forEach((k) => (div.style[k] = style[k]))\n}\n\nexport const isDef = (x) => x !== null && x !== undefined\nexport const isEmpty = (arr) => !isDef(arr) || arr.length === 0\n\n// https://stackoverflow.com/a/56749849/1072068\nexport const shuffle = (arr) =>\n  [...arr].reduceRight(\n    (\n      res,\n      _,\n      __,\n      s // eslint-disable-next-line no-sequences\n    ) => (res.push(s.splice(0 | (Math.random() * s.length), 1)[0]), res),\n    []\n  )\n\nexport const randomItem = (values) => shuffle(values).slice(0, 1)[0]\nexport const unique = (values) => [...new Set(values)]\nexport const print = console.log.bind(console)\nexport const isObject = (x) => typeof x === \"object\" && x !== null\nexport const chain = async (fns, duration) => {\n  const delay = (t) => new Promise((resolve) => setTimeout(() => resolve(), t))\n  for (let x of fns) {\n    x()\n    await delay(duration || 0)\n  }\n}\n\nexport const prettyGoodId = (prefix) =>\n  `${prefix}${Date.now()}${Math.floor(Math.random() * 100)}`\n","import styled from \"styled-components\"\nimport ReactTooltip from \"react-tooltip\"\nimport { prettyGoodId } from \"../../util/misc\"\n\nconst StyledInstructions = styled.div`\n  background-color: antiquewhite;\n  margin: -3px -16px;\n  padding: 5px;\n  border-radius: 2px;\n  text-shadow: none;\n  color: black;\n`\n\nconst Instructions = ({ children }) => (\n  <StyledInstructions>{children}</StyledInstructions>\n)\n\nconst StyledInformationButton = styled.button`\n  display: inline-block;\n  border-radius: 50%;\n  border: 3px solid cornflowerblue;\n  color: cornflowerblue;\n  height: 100%;\n  width: auto;\n  cursor: help;\n  margin: 10px;\n  padding: 0 0.55em;\n  font-size: 0.5em;\n  outline: none;\n`\n\nconst InformationTooltip = ({ children, triggerText = \"i\", triggerStyle }) => {\n  const id = prettyGoodId(\"tooltip\")\n  return (\n    <>\n      <ReactTooltip\n        id={id}\n        getContent={() => <Instructions>{children}</Instructions>}\n        effect=\"solid\"\n        place=\"bottom\"\n      />\n      <StyledInformationButton data-for={id} data-tip style={triggerStyle}>\n        {triggerText}\n      </StyledInformationButton>\n    </>\n  )\n}\n\nexport default InformationTooltip\n","import PropTypes from \"prop-types\"\nimport styled, { keyframes } from \"styled-components\"\nimport \"./Game.css\"\nimport { isDefined } from \"../../util/data\"\nimport { Range } from \"react-range\"\nimport InformationTooltip from \"./InformationTooltip\"\n\nconst CenteredOuter = styled.div`\n  display: flex;\n  justify-content: space-around;\n  flex-direction: column;\n  height: 100%;\n`\nconst CenteredInner = styled.div`\n  display: flex;\n  justify-content: space-around;\n  flex-direction: row;\n  width: 100%;\n`\n\nexport const Centered = ({ children }) => (\n  <CenteredOuter>\n    <CenteredInner>{children}</CenteredInner>\n  </CenteredOuter>\n)\n\nconst ToggleButtonCheckBoxWrapper = styled.div`\n  position: relative;\n  background-color: lightgray;\n  padding: 5px;\n  border-radius: 4px;\n`\n\nconst CheckButton = styled.button`\n  background: ${({ checked, backgroundColor }) =>\n    checked ? backgroundColor : \"gray\"};\n  padding: 5px;\n  color: ${({ checked, color }) => (checked ? color : \"#444\")};\n  outline: none;\n  border: none;\n  border-radius: ${({ left }) => (left ? \"4px 0 0 4px\" : \"0 4px 4px 0\")};\n  transition: text-shadow 0.25s ease;\n  &:hover {\n    cursor: pointer;\n    text-shadow: ${({ checked }) =>\n      checked ? \"1px 1px 1px black;\" : \"1px 1px 1px lightgray;\"};\n  }\n`\n\nexport const ToggleButton = ({\n  trueLabel = \"YES\",\n  falseLabel = \"NO\",\n  trueBgColor,\n  falseBgColor,\n  onToggle,\n  defaultValue,\n}) => {\n  return (\n    <ToggleButtonCheckBoxWrapper>\n      <CheckButton\n        checked={isDefined(defaultValue) && defaultValue}\n        backgroundColor={trueBgColor}\n        onClick={() => onToggle(true)}\n        left={true}\n      >\n        {trueLabel}\n      </CheckButton>\n      <CheckButton\n        checked={isDefined(defaultValue) && !defaultValue}\n        backgroundColor={falseBgColor}\n        onClick={() => onToggle(false)}\n        right={true}\n      >\n        {falseLabel}\n      </CheckButton>\n    </ToggleButtonCheckBoxWrapper>\n  )\n}\n\nToggleButton.propTypes = {\n  onToggle: PropTypes.func.isRequired,\n  trueLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  falseLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n}\n\nexport const GameButton = styled.button`\n  border: 1px solid lightgray;\n  text-transform: uppercase;\n  font-size: 1.4rem;\n  padding: 5px;\n  border-bottom: 7px solid grey;\n  color: darkslategray;\n  border-radius: 10px 10px 2px 2px;\n  outline: none;\n  cursor: pointer;\n  &:disabled {\n    cursor: default;\n    color: lightgray;\n  }\n  &:hover:enabled {\n    text-shadow: 1px 1px 1px #aaa;\n  }\n`\n\nexport const Emoji = ({ className, style, label, symbol }) => {\n  const symbols = Array.isArray(symbol) ? symbol : [symbol]\n  return (\n    <span className={className} style={style} role=\"img\" aria-label={label}>\n      {symbols.map((x) => String.fromCodePoint(x))}\n    </span>\n  )\n}\n\nexport const Sidecar = styled.div`\n  background-color: white;\n`\n\nconst StyledRangeSlider = styled.div`\n  margin: 10px 10px 0 10px;\n  outline: none;\n`\n\nexport const ControlLabel = styled.div`\n  ${({ position = \"top\" }) =>\n    position === \"top\" ? `margin-bottom: 10px;` : `margin-top: 10px;`}\n  font-size: 0.9rem;\n  text-align: center;\n`\n\nconst RangeTrack = styled.div`\n  height: 6px;\n  width: 100%;\n  background-color: #ccc;\n  border-radius: 3px;\n`\n\nconst RangeHandle = styled.div`\n  height: 18px;\n  width: 18px;\n  color: white;\n  background-color: #999;\n  border: 1px solid #555;\n  font-size: 0.7rem;\n  text-align: center;\n  line-height: 1.7;\n  outline: none;\n  border-radius: 4px;\n`\n\nexport const RangeSlider = ({\n  value,\n  min,\n  max,\n  onChange,\n  style,\n  step = 1,\n  label = null,\n  labelPosition = \"top\",\n  handleStyle,\n}) => {\n  const _label = label ? (\n    <ControlLabel position={labelPosition}>{label}</ControlLabel>\n  ) : null\n  return (\n    <StyledRangeSlider style={style}>\n      {_label && labelPosition === \"top\" ? _label : null}\n      <Range\n        step={step}\n        min={min}\n        max={max}\n        values={[value]}\n        onChange={(values) => {\n          const [_value] = values\n          if (_value !== value) {\n            onChange(_value)\n          }\n        }}\n        renderTrack={({ props, children }) => (\n          <RangeTrack {...props}>{children}</RangeTrack>\n        )}\n        renderThumb={({ props }) => (\n          <RangeHandle {...props} style={handleStyle}>\n            {value}\n          </RangeHandle>\n        )}\n      />\n      {_label && labelPosition === \"bottom\" ? (\n        <div style={{ marginTop: 10 }}>{_label}</div>\n      ) : (\n        <div style={{ height: 7 }}></div>\n      )}\n    </StyledRangeSlider>\n  )\n}\n\nconst StyledGameTitle = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3rem;\n  text-shadow: 2px 2px 2px slategray;\n  text-align: center;\n`\n\nexport const GameTitle = ({ children, information, style }) => (\n  <StyledGameTitle style={style}>\n    {children}\n    {information ? (\n      <InformationTooltip>{information}</InformationTooltip>\n    ) : null}\n  </StyledGameTitle>\n)\n\nconst fadeIn = keyframes`\n  from { opacity: 0; }\n  to { opacity: 1; }\n`\n\nconst StyledAnswerSvg = styled.div`\n  display: inline-block;\n  animation: ${fadeIn} 0.1s linear;\n`\n\nexport const WrongAnswerX = ({\n  width = 75,\n  height = 100,\n  strokeWidth = 8,\n  color = \"red\",\n}) => {\n  const style = {\n    stroke: color,\n    fill: \"none\",\n    strokeWidth,\n    rx: 1,\n    strokeLinecap: \"round\",\n  }\n  const cornerPadding = strokeWidth * 2.5\n  return (\n    <StyledAnswerSvg style={{ width, height }}>\n      <svg viewBox={`0 0 ${width} ${height}`}>\n        <rect\n          style={style}\n          x={strokeWidth}\n          y={strokeWidth}\n          width={width - strokeWidth * 2}\n          height={height - strokeWidth * 2}\n        />\n        <line\n          x1={cornerPadding}\n          y1={cornerPadding}\n          x2={width - cornerPadding}\n          y2={height - cornerPadding}\n          style={style}\n        />\n        <line\n          x1={width - cornerPadding}\n          y1={cornerPadding}\n          x2={cornerPadding}\n          y2={height - cornerPadding}\n          style={style}\n        />\n      </svg>\n    </StyledAnswerSvg>\n  )\n}\n\nexport const RightAnswerCheck = ({\n  width = 50,\n  height = 50,\n  strokeWidth = 6,\n  color = \"green\",\n}) => {\n  const style = {\n    stroke: color,\n    fill: \"none\",\n    strokeWidth,\n    strokeLinejoin: \"round\",\n  }\n  const checkPoints = [\n    `${width * 0.3},${height * 0.5}`,\n    `${width * 0.45},${height * 0.65}`,\n    `${width * 0.7},${height * 0.32}`,\n  ]\n  return (\n    <StyledAnswerSvg style={{ width, height }}>\n      <svg viewBox={`0 0 ${width} ${height}`}>\n        <circle\n          style={style}\n          cx={width / 2}\n          cy={height / 2}\n          r={width / 2 - 5}\n        />\n        <polyline style={style} points={checkPoints.join(\" \")} />\n      </svg>\n    </StyledAnswerSvg>\n  )\n}\n","import { GameContext } from \"../../context/GameContext\"\nimport { useContext, useEffect, useState } from \"react\"\nimport styled from \"styled-components\"\nimport Gallery from \"react-grid-gallery\"\nimport { scoreDisplays } from \"./Scoreboard\"\nimport {\n  Centered,\n  GameButton,\n  RangeSlider,\n  WrongAnswerX,\n  RightAnswerCheck,\n} from \"./Util\"\nimport {\n  gameData,\n  isDefined,\n  cleanObject,\n  GAME_IMAGE_COUNT,\n} from \"../../util/data\"\nimport { GameTitle } from \"./Util\"\nimport \"./Game.css\"\n\nconst SIZES = {\n  thumbnail: {\n    height: 32,\n    width: 32,\n  },\n  grid: {\n    width: 710,\n  },\n}\n\nconst generateGameData = async (gameMode) => {\n  const gameDataModels = {\n    easy: { path: \"./data/game-data.json\" },\n    hard: { path: \"./data/game-data-20q-hard.json\" },\n  }\n  const gameDataModel = gameDataModels[gameMode || \"easy\"]\n  const _gameData = await gameData(gameDataModel)\n  const images = _gameData.gameOptions.reduce(\n    (all, x, i) => ({ ...all, [i]: x }),\n    {}\n  )\n  return {\n    gameData: _gameData,\n    images,\n    correctAnswers: Object.keys(images)\n      .filter((i) => images[i].correct)\n      .map((i) => parseInt(i)),\n  }\n}\n\nconst labelStyle = {\n  padding: \"5px\",\n  fontSize: \"75%\",\n  color: \"white\",\n  background: \"rgba(0,0,0,0.5)\",\n  marginRight: 2,\n}\n\nconst toImage = (image, index, tags = () => []) => {\n  const img = {\n    src: `img/${image.path}`,\n    thumbnail: `img/${image.path}`,\n    thumbnailWidth: SIZES.thumbnail.width,\n    thumbnailHeight: SIZES.thumbnail.height,\n    index,\n    correct: image.correct,\n    customOverlay: <AnswersOverlay index={index} />,\n  }\n  img.tags = tags(img) || []\n  return cleanObject(img)\n}\nconst toDeerImage = (img, index) =>\n  toImage(img, index, (_img) => [\n    {\n      value: `${img.label}`,\n      title: `COMPY Says: ${img.label}`,\n    },\n  ])\n\nconst findYouPlayer = (gameSettings) =>\n  gameSettings && gameSettings.players && gameSettings.players.length\n    ? gameSettings.players[0]\n    : null\n\nconst StyledAnswersOverlay = styled.div`\n  color: red;\n  font-weight: bold;\n  text-align: right;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background-color: ${({ correct }) =>\n    correct ? \"rgba(75, 75, 75, 0.8)\" : \"rgba(75, 75, 75, 0.0)\"};\n  width: 100%;\n  height: 100%;\n`\n\nconst AnswerOverlay = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n  height: 100%;\n`\n\nconst AnswersOverlay = ({ index }) => {\n  const [gameSettings] = useContext(GameContext)\n  const _you = findYouPlayer(gameSettings)\n  const shouldShowAnswers = isDefined(_you.score)\n  const correct =\n    (_you.selections.includes(index) && gameSettings.images[index].correct) ||\n    (!_you.selections.includes(index) && !gameSettings.images[index].correct)\n  return (\n    <StyledAnswersOverlay\n      correct={isDefined(_you.score) && !gameSettings.images[index].correct}\n    >\n      <AnswerOverlay>\n        {shouldShowAnswers ? (\n          correct ? (\n            <RightAnswerCheck />\n          ) : (\n            <WrongAnswerX />\n          )\n        ) : null}\n      </AnswerOverlay>\n    </StyledAnswersOverlay>\n  )\n}\n\nconst Choices = ({ settings: { noise }, gameMode }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n\n  useEffect(() => {\n    resetGame(gameMode, gameSettings, setGameSettings) // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (gameSettings.originalImages) {\n      const noiseKey = `noise${noise}`\n      const hasVariant = (image, variant) =>\n        \"variants\" in image && variant in image.variants\n      setGameSettings({\n        ...gameSettings,\n        images: gameSettings.originalImages\n          .map((image) =>\n            hasVariant(image, noiseKey) ? image.variants[noiseKey] : image\n          )\n          .map((image, i) => ({\n            ...gameSettings.images[i],\n            ...toDeerImage(image, i),\n          })),\n      })\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [noise])\n\n  const onSelectImage = (index) => {\n    const updated = { ...gameSettings }\n    const you = findYouPlayer(updated)\n    if (you.score) return\n    var img = updated.images[index]\n    if (img.hasOwnProperty(\"isSelected\")) img.isSelected = !img.isSelected\n    else img.isSelected = true\n    you.selections = updated.images\n      .map((x, index) => ({ ...x, index }))\n      .filter((x) => x.isSelected)\n      .map((x) => x.index)\n    setGameSettings(updated)\n  }\n\n  const you = findYouPlayer(gameSettings)\n  return (\n    <div style={{ height: 550 }}>\n      <Gallery\n        images={gameSettings.images}\n        enableImageSelection={!you.score}\n        onSelectImage={onSelectImage}\n        onClickThumbnail={onSelectImage}\n        tagStyle={labelStyle}\n        showLightboxThumbnails={true}\n        enableLightbox={false}\n      />\n    </div>\n  )\n}\n\nconst resetGame = async (mode, original, updateFn) => {\n  const updated = { ...original }\n  const currentGameData = await generateGameData(mode)\n  updated.currentGameData = currentGameData\n  updated.originalImages = Object.keys(currentGameData.images).map(\n    (k) => currentGameData.images[k]\n  )\n  updated.images = updated.originalImages.map(toDeerImage)\n  const _you = findYouPlayer(updated)\n  _you.score = null\n  _you.selections = []\n  updateFn(updated)\n}\n\nconst calculateScore = (gameData, selections) => {\n  const _selections = selections || []\n  const wrongAnswers = _selections.filter(\n    (x) => !gameData.correctAnswers.includes(x)\n  )\n  const omittedAnswers = gameData.correctAnswers.filter(\n    (x) => !_selections.includes(x)\n  )\n\n  return (\n    Object.keys(gameData.images).length -\n    wrongAnswers.length -\n    omittedAnswers.length\n  )\n}\n\nconst StyledControls = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 0 2px;\n  padding: 15px;\n  border: 1px solid lightgray;\n  background-color: white;\n  border-bottom-left-radius: 15px;\n  border-bottom-right-radius: 15px;\n`\n\nconst StyledControlEnd = styled.div`\n  width: 150px;\n  margin: 0 15px;\n  min-height: 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n`\n\nconst Score = styled.div`\n  color: white;\n  font-weight: bold;\n  background-color: black;\n  border-radius: 3px;\n  font-size: 1.2rem;\n  padding: 10px;\n`\n\nconst Controls = ({ gameMode, onSettingsUpdated }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const [noiseLevel, setNoiseLevel] = useState(0)\n  const [score, setScore] = useState()\n  const [showRetryButton, setShowRetryButton] = useState(false)\n  const changeNoiseLevel = (level) => {\n    setNoiseLevel(level)\n    onSettingsUpdated({ noise: level })\n  }\n\n  const selectionCount = gameSettings.players[0].selections.length\n  const loadScores = () => {\n    const updated = { ...gameSettings }\n    const _you = findYouPlayer(updated)\n    _you.score = calculateScore(gameSettings.currentGameData, _you.selections)\n    setScore(scoreDisplays(_you, GAME_IMAGE_COUNT))\n    setGameSettings(updated)\n    setShowRetryButton(true)\n  }\n  const playAgain = () => {\n    resetGame(gameMode, gameSettings, setGameSettings)\n    setScore(null)\n    setShowRetryButton(false)\n    setNoiseLevel(0)\n  }\n\n  return (\n    <StyledControls>\n      <StyledControlEnd>\n        {gameMode === \"hard\" ? (\n          <RangeSlider\n            label=\"Add Noise\"\n            labelPosition=\"bottom\"\n            min={0}\n            max={6}\n            step={1}\n            value={noiseLevel}\n            onChange={changeNoiseLevel}\n            style={{ width: \"100%\" }}\n          />\n        ) : null}\n      </StyledControlEnd>\n      {showRetryButton ? (\n        <GameButton onClick={playAgain}>Play Again!</GameButton>\n      ) : (\n        <GameButton onClick={loadScores} disabled={selectionCount === 0}>\n          Submit Answers\n        </GameButton>\n      )}\n      <StyledControlEnd>\n        {score ? (\n          <Score>\n            {score.score} ({score.percentage}%)\n          </Score>\n        ) : null}\n      </StyledControlEnd>\n    </StyledControls>\n  )\n}\n\nconst StyledGame = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst Game = styled.div`\n  min-width: ${SIZES.grid.width}px;\n  max-width: ${SIZES.grid.width}px;\n`\n\nconst GameInformation = () => (\n  <>\n    <p>\n      COMPY has seen a lot of deer images before, and he is really good at\n      identifying a deer when he sees one.\n    </p>\n    <p>\n      Can you tell which of the following deer images COMPY may have seen? There\n      is at least one.\n    </p>\n    <p>Select them and then hit the \"Submit Answers\" button (below).</p>\n    <p>If you were to guess randomly, you would expect to get half correct.</p>\n  </>\n)\n\nconst TwentyQuestions = ({ gameMode }) => {\n  const [settings, setSettings] = useState(0)\n  const settingsUpdated = (_settings) => setSettings(_settings)\n\n  return (\n    <Centered>\n      <StyledGame>\n        <Game>\n          <GameTitle\n            information={<GameInformation />}\n            style={{ marginBottom: 10 }}\n          >\n            20 Questions\n          </GameTitle>\n          <Choices settings={settings} gameMode={gameMode} />\n          <Controls gameMode={gameMode} onSettingsUpdated={settingsUpdated} />\n        </Game>\n      </StyledGame>\n    </Centered>\n  )\n}\n\nexport default TwentyQuestions\n","import { useEffect, useCallback, useMemo, useState } from \"react\"\nimport styled from \"styled-components\"\nimport { shuffle, randomItem, isDef, filterObject } from \"../../util/misc\"\nimport { DndProvider, useDrag, useDrop } from \"react-dnd\"\nimport { HTML5Backend } from \"react-dnd-html5-backend\"\nimport Xarrow from \"react-xarrows\"\nimport { matchData } from \"../../util/data\"\nimport { GameTitle, WrongAnswerX } from \"./Util\"\n\nconst SIZES = {\n  tile: {\n    height: 100,\n    width: 100,\n  },\n}\n\nconst DraggableImageBase = styled.div`\n  height: ${SIZES.tile.height}px;\n  width: ${SIZES.tile.width}px;\n  border: 1px solid slategray;\n  border-radius: 5px;\n  background-image: ${({ src }) => `url(${src})`};\n  background-size: cover;\n`\nconst StyledDraggableImage = styled(DraggableImageBase)`\n  border-color: black;\n`\nconst DraggableImage = ({\n  index,\n  image,\n  correctTargets,\n  disabled,\n  onGuess = () => null,\n}) => {\n  const draggableId = `draggable${index}`\n  const [{ isDragging }, drag] = useDrag(() => ({\n    type: \"draggable\",\n    item: { name: image },\n    end: (item, monitor) => {\n      const dropResult = monitor.getDropResult()\n      if (item && dropResult) {\n        onGuess(draggableId, {\n          guess: correctTargets.includes(dropResult.name),\n          source: { id: draggableId, img: item.name },\n          target: { id: dropResult.name, img: dropResult.name },\n        })\n      }\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  }))\n  const opacity = isDragging ? 0.4 : 1\n  return (\n    <StyledDraggableImage\n      id={draggableId}\n      role=\"draggable\"\n      src={`match-img/${image}`}\n      alt={image}\n      ref={disabled ? null : drag}\n      style={{ opacity }}\n    />\n  )\n}\n\nconst DraggableContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n`\nconst ClearImageSelectionButton = styled.button`\n  position: absolute;\n  cursor: pointer;\n  top: -10px;\n  right: -10px;\n  height: 20px;\n  width: 20px;\n  border-radius: 50%;\n  border: 1px solid #777;\n  line-height: 1;\n  &::after {\n    content: \"x\";\n    text-align: center;\n    margin: auto;\n  }\n`\nconst DraggableTargetDrop = styled(DraggableImageBase)`\n  background-color: #ddd;\n  border: 1px dashed black;\n  position: relative;\n`\nconst DraggableTarget = ({\n  id,\n  image,\n  matches,\n  onClearSelection,\n  disabled,\n}) => {\n  const [{ canDrop, isOver }, drop] = useDrop(() => ({\n    accept: \"draggable\",\n    drop: () => ({ name: id }),\n    collect: (monitor) => {\n      let canDrop = true\n      try {\n        canDrop = monitor.canDrop()\n      } catch {\n        // https://github.com/react-dnd/react-dnd/issues/236\n        // Unsure of a workaround at this point\n        canDrop = true\n      }\n      return {\n        isOver: monitor.isOver(),\n        canDrop,\n      }\n    },\n  }))\n  const isActive = canDrop && isOver\n  const from = Object.values(matches).find((x) => x.to.id === id)?.from\n  const backgroundColor = from\n    ? null\n    : isActive\n    ? \"#aaa\"\n    : canDrop\n    ? \"#ddd\"\n    : \"white\"\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n      <DraggableTargetDrop\n        id={id}\n        ref={drop}\n        className=\"drop-target\"\n        from={from}\n        style={{\n          backgroundColor,\n          backgroundImage: from ? `url(match-img/${from.img})` : null,\n        }}\n      >\n        {from && !disabled ? (\n          <ClearImageSelectionButton onClick={() => onClearSelection(id)} />\n        ) : null}\n      </DraggableTargetDrop>\n      <DraggableImageBase\n        src={`match-img/${image}`}\n        alt={image}\n        style={{\n          marginLeft: 10,\n        }}\n      />\n    </div>\n  )\n}\n\nconst SideContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  background-color: steelblue;\n  padding: 25px;\n  border-radius: 10px;\n  border: 1px solid gray;\n  margin: 20px 0;\n`\n\nconst MiddleSection = styled.div`\n  width: 500px;\n`\nconst GameInformation = () => (\n  <>\n    <p>On the left are image represenations for class labels of a data set</p>\n    <p>used to train a machine learning model.</p>\n    <p>\n      Drag each class prototype image on the left to their match on the right.\n    </p>\n    <p>\n      <b> You have three strikes before you are out! </b>\n    </p>\n    <p></p>\n  </>\n)\n\nconst GameInfo = {\n  learn: { title: \"Learn to Match\", matchCount: 3 },\n  easy: { title: \"Easy Match Game\", matchCount: 5 },\n  hard: { title: \"Hard Match Game\", matchCount: 3, choiceCount: 6 },\n}\n\nconst Centered = styled.div`\n  margin-top: 10px;\n  text-align: center;\n`\n\nconst ScoreBoard = ({ guesses }) => (\n  <div style={{ textAlign: \"center\", height: 100, marginTop: 5 }}>\n    {new Array(guesses.incorrect).fill().map((_, i) => (\n      <WrongAnswerX key={`incorrect-x-${i}`} />\n    ))}\n  </div>\n)\n\nconst RetryButton = styled.button`\n  height: 50px;\n  border: 3px solid #111;\n  border-radius: 25px;\n  font-size: 1.5rem;\n  padding: 0 20px;\n  background-color: ${({ won }) => (won ? \"green\" : \"slategray\")};\n  color: white;\n  cursor: pointer;\n  outline: none;\n  position: relative;\n  z-index: 9999;\n`\n\nconst everythingHasAGuess = () =>\n  [...document.getElementsByClassName(\"drop-target\")].reduce(\n    (all, x) =>\n      all && isDef(x.style.backgroundImage) && x.style.backgroundImage !== \"\",\n    true\n  )\n\nconst Options = ({ guesses, onGameOver, onRetry }) => {\n  const [won, setWon] = useState(false)\n  const [buttonText, setButtonText] = useState(null)\n  useEffect(() => {\n    const winner = () =>\n      everythingHasAGuess() &&\n      guesses.total > 0 &&\n      Object.keys(guesses.correct).filter((x) => guesses.correct[x]).length >=\n        guesses.total\n    const loser = () => guesses.incorrect >= guesses.maxStrikes\n    const won = winner()\n    setWon(won)\n    const text = loser() ? \"Try again?\" : won ? \"You won! Play again?\" : null\n    setButtonText(text)\n    if (text) onGameOver()\n  }, [guesses, onGameOver])\n  return buttonText ? (\n    <Centered>\n      <RetryButton onClick={onRetry} won={won}>\n        {buttonText}\n      </RetryButton>\n    </Centered>\n  ) : null\n}\n\nconst toKey = (x, index) => `${x}_${index}`\nconst MatchLayout = ({ model, gameMode, onRetry, maxStrikes = 3 }) => {\n  const [disabled, setDisabled] = useState(false)\n  // console.log(JSON.stringify(model, null, 2))\n\n  const onGameOver = () => setDisabled((_) => true)\n  const _onRetry = () => {\n    setGuesses(resetGuesses())\n    setMatches({})\n    onRetry()\n  }\n  const targetHasGuess = (target, matches) =>\n    Object.values(matches).reduce(\n      (all, x) => all || target.id === x.to.id,\n      false\n    )\n\n  const targets = useMemo(() => model?.targets || [], [model])\n  const sources = useMemo(() => model?.sources || [], [model])\n  const [matches, setMatches] = useState({})\n  const resetGuesses = useCallback(\n    () => ({\n      maxStrikes,\n      total: targets.length,\n      correct: {},\n      incorrect: 0,\n    }),\n    [targets, maxStrikes]\n  )\n\n  useEffect(() => {\n    setDisabled(false)\n    setGuesses(resetGuesses())\n  }, [model, resetGuesses])\n\n  const [lastGuess, setLastGuess] = useState()\n  const [guesses, setGuesses] = useState(resetGuesses())\n  const onGuess = (sourceId, { guess, source, target }) =>\n    setLastGuess({\n      sourceId,\n      guess,\n      source,\n      target,\n    })\n\n  useEffect(() => {\n    if (lastGuess) {\n      setMatches((prev) => {\n        const { sourceId, guess, source, target } = lastGuess\n        if (targetHasGuess(target, prev)) return prev\n        return {\n          ...prev,\n          [sourceId]: {\n            from: source,\n            to: target,\n            color: guess ? \"green\" : \"red\",\n          },\n        }\n      })\n    }\n  }, [lastGuess])\n\n  useEffect(() => {\n    if (lastGuess) {\n      const { sourceId, guess, target } = lastGuess\n      if (!targetHasGuess(target, matches)) {\n        setGuesses((prev) => ({\n          ...prev,\n          correct:\n            guess === true\n              ? { ...prev.correct, [sourceId]: guess }\n              : guess === null\n              ? { ...prev.correct, [sourceId]: false }\n              : prev.correct,\n          incorrect:\n            guess === false\n              ? Math.min(prev.incorrect + 1, prev.total)\n              : prev.incorrect,\n        }))\n      }\n    }\n  }, [matches, lastGuess])\n\n  const onClearGuess = (image) =>\n    setMatches((prev) => {\n      setLastGuess(null)\n      const match = Object.keys(prev).find((x) => prev[x].to.id === image)\n      return filterObject(prev, (k) => k !== match)\n    })\n\n  return (\n    <DraggableContainer>\n      <SideContainer>\n        {sources.map((x, i) => (\n          <DraggableImage\n            key={toKey(x, i)}\n            index={i}\n            image={x}\n            disabled={disabled}\n            correctTargets={model.matches[x]}\n            onGuess={onGuess}\n          />\n        ))}\n      </SideContainer>\n      <MiddleSection>\n        <ScoreBoard guesses={guesses} />\n        <GameTitle information={<GameInformation />}>\n          {GameInfo[gameMode].title || \"Match Game\"}\n        </GameTitle>\n        <Options guesses={guesses} onRetry={_onRetry} onGameOver={onGameOver} />\n      </MiddleSection>\n      <SideContainer key={new Date().getTime()}>\n        {targets.map((x, i) => (\n          <DraggableTarget\n            key={toKey(x, i)}\n            id={x}\n            image={x}\n            disabled={disabled}\n            matches={matches}\n            onClearSelection={onClearGuess}\n          />\n        ))}\n      </SideContainer>\n      {Object.values(matches).map((x) => (\n        <Xarrow\n          key={`line-${x.from.id}-${x.to.id}`}\n          start={`${x.from.id}`}\n          end={`${x.to.id}`}\n          color={x.color}\n          path=\"straight\"\n          animateDrawing=\"200ms\"\n        />\n      ))}\n    </DraggableContainer>\n  )\n}\n\nconst Match = ({\n  gameMode = \"easy\",\n  matchCount = GameInfo[gameMode].matchCount,\n  choiceCount = GameInfo[gameMode].choiceCount || GameInfo[gameMode].matchCount,\n}) => {\n  const [retries, setRetries] = useState(0)\n  const [model, setModel] = useState({})\n  const [allImages, setAllImages] = useState({})\n  const resetModel = useCallback(() => {\n    const targets = shuffle(Object.keys(allImages)).slice(0, matchCount)\n    const findMatch = (key) =>\n      allImages[key].match[gameMode] && allImages[key].match[gameMode].length\n        ? randomItem(allImages[key].match[gameMode])\n        : key\n\n    const allGameTypeMatches = () =>\n      Object.keys(allImages)\n        .map((x) => allImages[x].match[gameMode])\n        .flat()\n\n    const extraChoices = (initialChoices) => {\n      const extraCount = choiceCount - matchCount\n      return extraCount > 0\n        ? shuffle(\n            allGameTypeMatches().filter((x) => !initialChoices.includes(x))\n          ).slice(0, extraCount)\n        : []\n    }\n    const findTargets = (source) =>\n      Object.keys(allImages).filter((key) =>\n        (allImages[key].match[gameMode] || [key]).includes(source)\n      )\n\n    const initialMatches = targets.map(findMatch)\n    const sources = shuffle([\n      ...initialMatches,\n      ...extraChoices(initialMatches),\n    ])\n    const matches = sources.reduce(\n      (all, x) => ({ ...all, [x]: findTargets(x) }),\n      {}\n    )\n    return {\n      attempt: retries,\n      targets,\n      sources,\n      matches,\n    }\n  }, [allImages, matchCount, retries, gameMode, choiceCount])\n\n  useEffect(() => {\n    const getMatchData = async () => {\n      const _matchData = await matchData()\n      setAllImages(_matchData)\n    }\n\n    getMatchData() // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    setModel(resetModel())\n  }, [retries, resetModel])\n\n  if (matchCount > choiceCount) {\n    return <div>choiceCount must be the same or more than matchCount</div>\n  }\n\n  const retryGame = () => setRetries((prev) => prev + 1)\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <MatchLayout model={model} gameMode={gameMode} onRetry={retryGame} />\n    </DndProvider>\n  )\n}\n\nexport default Match\n","import { GameContext } from \"../../context/GameContext\"\nimport { useContext, useState, useEffect, useRef, useMemo } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport styled from \"styled-components\"\nimport { gameData, isDefined } from \"../../util/data\"\nimport { clean, styleDiv, isDef } from \"../../util/misc\"\nimport {\n  Centered,\n  ToggleButton,\n  GameButton,\n  Sidecar,\n  RangeSlider,\n  ControlLabel,\n} from \"./Util\"\nimport { PieChart } from \"react-minimal-pie-chart\"\nimport SimpleImageSlider from \"react-simple-image-slider\"\nimport Select from \"react-select\"\nimport \"./Game.css\"\n\nconst PRACTICE_IMAGE_SIZE = {\n  container: {\n    width: 661,\n    height: 600,\n  },\n  image: {\n    width: 300,\n    height: 300,\n  },\n}\n\nconst AI_NAME = \"COMPY\"\nconst COLORS = {\n  yes: \"#4caf50\",\n  no: \"#dc004d\",\n  neutral: \"antiquewhite\",\n}\n\nconst resetGame = async (original, updateFn, setCurrentIndex, demo) => {\n  const updated = { ...original }\n  updated.version = isDefined(updated.version) ? updated.version + 1 : 1\n  updated.practiceRoundNumber = demo\n    ? 3\n    : updated.practiceRoundNumber === 1\n    ? 2\n    : 1\n  console.log(`Practice reset to Round ${updated.practiceRoundNumber}`)\n  const currentGameData = await generateGameData(updated.practiceRoundNumber)\n  if (updated.practiceRound && Object.keys(updated.practiceRound).length) {\n    updated.previousPracticeRounds.push({ ...updated.practiceRound })\n  }\n  updated.currentGameData = currentGameData\n  setCurrentIndex(0)\n  updated.practiceRound = currentGameData.scrollingImages.reduce(\n    (all, x, i) => ({\n      ...all,\n      [x.path]: { ...x },\n    }),\n    {}\n  )\n  updateFn(updated)\n}\n\nconst generateGameData = async (practiceRoundNumber) => {\n  const _gameData = await gameData()\n  const images = _gameData.practiceOptions[practiceRoundNumber].reduce(\n    (all, x, i) => ({ ...all, [i]: x }),\n    {}\n  )\n  const scrollingImages = Object.keys(images).map((i) => ({\n    ...images[i],\n    url: `img/${images[i].path}`,\n  }))\n  return {\n    gameData: _gameData,\n    images,\n    scrollingImages,\n    correctAnswers: Object.keys(images)\n      .filter((i) => images[i].correct)\n      .map((i) => parseInt(i)),\n  }\n}\n\nconst answer = (property, gameSettings, img) =>\n  !(img in gameSettings.practiceRound)\n    ? null\n    : gameSettings.practiceRound[img][property]\n\nconst allQuestionsAnswered = (gameSettings) =>\n  Object.keys(gameSettings.practiceRound).reduce(\n    (all, x) => all && isDefined(gameSettings.practiceRound[x].seenbefore),\n    true\n  )\n\nconst StyledPracticeResult = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px 0 10px 10px;\n  border-top: 1px solid lightgray;\n  background-color: ${(props) => (props.current ? \"lightgray\" : \"none\")};\n  transition: background-color 1s ease;\n`\n\nconst PracticeResultTitle = styled.b`\n  color: ${(props) => props.color};\n  &:before {\n    content: \"${(props) => (props.current ? \"> \" : \"\")}\";\n  }\n`\n\nconst PracticeResult = ({\n  question: { path, correct, agree, seenbefore },\n  questionNumber,\n  isCurrentImage,\n}) => {\n  const answer = !isDefined(seenbefore)\n    ? \"waiting\"\n    : (seenbefore && correct) || (!seenbefore && !correct)\n    ? \"correct\"\n    : \"incorrect\"\n  const displaySettings = {\n    waiting: {\n      text: \"Waiting on your guess...\",\n    },\n    correct: {\n      text: `You know ${AI_NAME} pretty well!`,\n      color: COLORS.yes,\n    },\n    incorrect: {\n      text: `Sorry, you don't know ${AI_NAME} very well.`,\n      color: COLORS.no,\n    },\n  }\n  const display = displaySettings[answer]\n  return (\n    <StyledPracticeResult current={isCurrentImage}>\n      <PracticeResultTitle\n        color={display.color}\n        current={isCurrentImage}\n        title={path}\n      >\n        Image {questionNumber}\n      </PracticeResultTitle>\n      <div>{display.text}</div>\n    </StyledPracticeResult>\n  )\n}\n\nconst StyledEndButtons = styled.div`\n  display: flex;\n  flex-direction: column;\n  button {\n    margin-top: 5px;\n  }\n`\nconst EndButtons = ({ resetGame }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const playGame = () => {\n    const updated = { ...gameSettings }\n    updated.previousPracticeRounds.push({ ...updated.practiceRound })\n    updated.practiceRound = {}\n    setGameSettings(updated)\n  }\n  return (\n    <StyledEndButtons>\n      <GameButton onClick={resetGame}>More Practice</GameButton>\n      <Link to=\"/20q/easy\">\n        <GameButton onClick={playGame}>Play Game!</GameButton>\n      </Link>\n    </StyledEndButtons>\n  )\n}\n\nconst StylePracticeResults = styled(Sidecar)`\n  border-top: 1px solid slategray;\n  border-bottom: 1px solid slategray;\n  border-right: 1px solid slategray;\n  border-top-right-radius: 15px;\n  padding: 10px;\n  border-bottom-right-radius: 15px;\n  min-width: 350px;\n  max-width: 350px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nconst PracticeResultsTitle = styled.div`\n  border-bottom: 2px solid darkgray;\n  font-size: 1.9rem;\n  font-weight: 500;\n  text-align: center;\n  padding-bottom: 12px;\n  margin: 10px 0;\n  text-shadow: 2px 2px 2px slategray;\n`\n\nconst PracticeResultsSubtitle = styled.h4`\n  margin: 10px;\n`\n\nconst PracticeResults = ({ resetGame, currentImageIndex, demo }) => {\n  const [gameSettings] = useContext(GameContext)\n  return (\n    <StylePracticeResults>\n      <div>\n        <PracticeResultsTitle>\n          Practice Round {!demo ? gameSettings.practiceRoundNumber : null}\n        </PracticeResultsTitle>\n        <PracticeResultsSubtitle>\n          Make a selection for each image:\n        </PracticeResultsSubtitle>\n        {Object.keys(gameSettings.practiceRound).map((x, i) => (\n          <PracticeResult\n            key={i}\n            questionNumber={i + 1}\n            isCurrentImage={i === currentImageIndex}\n            question={gameSettings.practiceRound[x]}\n          />\n        ))}\n      </div>\n      <div>\n        {!demo && allQuestionsAnswered(gameSettings) ? (\n          <EndButtons resetGame={resetGame} />\n        ) : null}\n      </div>\n    </StylePracticeResults>\n  )\n}\n\nconst ImageSliderOverrideStyles = ({ images, currentIndex }) => {\n  const [gameSettings] = useContext(GameContext)\n  const Selectors = {\n    bullet: (index) =>\n      `#practice-container button[data-id*=\"bullet\"]:nth-child(${index + 1})`,\n    image: () =>\n      '#practice-container div[style*=\"background-size: cover\"][style*=\"background-image:\"][style*=\".png\"]',\n  }\n\n  const _bulletStyle = (index, colors) => {\n    const border =\n      currentIndex === index ? \"; border: 2px solid blue !important;\" : \"\"\n    return `${Selectors.bullet(index)} { background-color: ${\n      colors[0]\n    } !important; ${border} }\n        `\n  }\n  const bulletStyles = () =>\n    images.map((_, i) => {\n      const seenbefore = answer(\"seenbefore\", gameSettings, images[i].path)\n      const toColor = (x) => (x == null ? \"white\" : x ? COLORS.yes : COLORS.no)\n      return _bulletStyle(i, [toColor(seenbefore)])\n    })\n\n  const imageSize = {\n    width:\n      PRACTICE_IMAGE_SIZE.image.width / PRACTICE_IMAGE_SIZE.container.width,\n    height:\n      PRACTICE_IMAGE_SIZE.image.height / PRACTICE_IMAGE_SIZE.container.height,\n  }\n  const imagePercent = {\n    width: parseInt(imageSize.width * 100),\n    height: parseInt(imageSize.height * 100),\n  }\n  const paddingLeft =\n    (PRACTICE_IMAGE_SIZE.container.width - PRACTICE_IMAGE_SIZE.image.width) / 2\n  const paddingTop =\n    (PRACTICE_IMAGE_SIZE.container.height - PRACTICE_IMAGE_SIZE.image.height) /\n    2\n\n  const imageStyles = () => [\n    `${Selectors.image()} {left: ${paddingLeft}px !important; top: ${paddingTop}px !important; width: ${\n      imagePercent.width\n    }% !important; height: ${\n      imagePercent.height\n    }% !important; border-radius: 5px; box-shadow: 0 0 5px #000000;}`,\n  ]\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: [...bulletStyles(), ...imageStyles()].join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst StyledQuestionWithButtons = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: slategray;\n  color: white;\n  padding: 10px;\n  border-radius: 10px;\n  height: 60px;\n  margin-bottom: 45px;\n  pointer-events: all;\n  &:first-child {\n    margin-left: 15px;\n  }\n  &:last-child {\n    margin-right: 15px;\n  }\n`\nconst StyledQuestionWithButtonsButton = styled.div`\n  padding-top: 5px;\n  padding-bottom: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`\nconst QuestionText = styled.div`\n  font-size: 0.9rem;\n`\nconst QuestionWithButtons = ({ question, onAnswer, defaultValue }) => (\n  <StyledQuestionWithButtons>\n    <QuestionText>{question}</QuestionText>\n    <StyledQuestionWithButtonsButton>\n      <ToggleButton\n        defaultValue={defaultValue}\n        onToggle={onAnswer}\n        trueBgColor=\"white\"\n        falseBgColor=\"white\"\n        trueLabel=\"YES\"\n        falseLabel=\"NO\"\n      />\n    </StyledQuestionWithButtonsButton>\n  </StyledQuestionWithButtons>\n)\n\nconst StyledTuningSideTile = styled.div`\n  position: absolute;\n  z-index: 2;\n  top: 130px;\n  width: 180px;\n  height: 295px;\n`\n\nconst TuningSideTile = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: slategray;\n  padding: 10px;\n  color: white;\n  border-radius: 15px;\n  width: 75%;\n  text-align: center;\n`\n\nconst StyledProbability = styled(StyledTuningSideTile)`\n  right: 0px;\n`\n\nconst Probability = ({ previousLabel, label, value }) => {\n  const percent = (value * 100).toFixed(1)\n  return (\n    <StyledProbability>\n      <Centered>\n        <TuningSideTile>\n          <div>\n            {AI_NAME} says <br />\n            <PictureLabel\n              changed={isDef(previousLabel) && label !== previousLabel}\n            >\n              {label}\n            </PictureLabel>{\" \"}\n            with a confidence of\n          </div>\n          <div style={{ margin: \"0 30px 0 30px\" }}>\n            <PieChart\n              animate\n              reveal={100}\n              data={[\n                { value: percent, color: \"#ccc\" },\n                { value: 100 - percent, color: \"#777\", hideLabel: true },\n              ]}\n              totalValue={100}\n              lineWidth={30}\n              label={({ dataEntry }) =>\n                dataEntry.hideLabel ? null : `${dataEntry.value}%`\n              }\n              labelStyle={{\n                fontSize: \"1.1rem\",\n                fill: \"white\",\n              }}\n              labelPosition={0}\n            />\n          </div>\n        </TuningSideTile>\n      </Centered>\n    </StyledProbability>\n  )\n}\n\nconst StyledTuningsOuter = styled(StyledTuningSideTile)`\n  left: 0px;\n`\n\nconst StyledTuningSelect = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n`\n\nconst TuningSelect = (props) => {\n  const selectStyles = {\n    container: (provided) => ({ ...provided, width: \"100%\" }),\n    indicatorSeparator: (provided) => ({ ...provided, display: \"none\" }),\n    option: (provided, { data }) => ({\n      ...provided,\n      textAlign: \"left\",\n      whiteSpace: \"nowrap\",\n      color: \"black\",\n      fontSize: \"0.9rem\",\n      \":before\": {\n        content: `${data.icon ? `'${data.icon}'` : \"''\"}`,\n        width: \"15px\",\n        padding: \"0 5px 0 0 !important\",\n        display: \"inline-block\",\n        textAlign: \"center\",\n      },\n    }),\n    menu: (provided) => ({\n      ...provided,\n      width: \"fit-content\",\n    }),\n    singleValue: (provided) => ({\n      ...provided,\n      fontSize: \"0.8rem\",\n    }),\n  }\n\n  return <Select styles={selectStyles} isSearchable={false} {...props} />\n}\n\nconst Tunings = ({ image, getImageDiv, onLoadImageVariant }) => {\n  const defaultStyle = {\n    noise: 0,\n  }\n  const [styles, setStyles] = useState(defaultStyle)\n  const [selectedVariant, setSelectedVariant] = useState(null)\n  const changeImage = (key) =>\n    styleDiv(getImageDiv, {\n      transition: \"none\",\n      \"background-image\":\n        !styles[key] && key in image.variants && \"path\" in image.variants[key]\n          ? `url(\"img/${image.variants[key].path}\")`\n          : `url(\"img/${image.path}\")`,\n    })\n\n  const variantLabel = (key) => {\n    return (image.variants[key] || image).label\n  }\n  const resetImage = () => {\n    console.log(\"Resetting image....\")\n    changeImage(\"unknown\")\n    onLoadImageVariant({})\n    setStyles({ ...defaultStyle })\n  }\n\n  const updateImage = (key, additionalStyles = {}) => {\n    const toggle = !styles[key]\n    changeImage(key)\n    onLoadImageVariant(\n      clean({\n        probability: toggle\n          ? key in image.variants\n            ? image.variants[key].probability\n            : null\n          : null,\n        label: variantLabel(key),\n      })\n    )\n    setStyles({ ...defaultStyle, [key]: toggle, ...additionalStyles })\n  }\n  const addNoise = (noiseLevel) =>\n    updateImage(`noise${noiseLevel}`, { noise: noiseLevel })\n\n  const augmentVariants = Object.keys(image.variants || {}).filter(\n    (x) => !x.startsWith(\"noise\")\n  )\n  const optionDecorations = {\n    hflip: {\n      label: () => \"Horizontal Flip\",\n      icon: () => \"\\\\21C4\",\n    },\n    vflip: {\n      label: () => \"Vertical Flip\",\n      icon: () => \"\\\\21C5\",\n    },\n    \"rot*\": {\n      label: (x) => `${x.replace(\"rot\", \"Rotate \")}`,\n      icon: () => \"\\\\21BB\",\n    },\n  }\n\n  const noop = () => undefined\n  const decorate = (object, property, decoration, key) =>\n    (object[property] = (decoration[property] || noop)(key))\n\n  const decorateOption = (key) => {\n    const defaults = {\n      value: key,\n      label: key,\n      fn: updateImage.bind(null, key),\n    }\n    let decoration = undefined\n    if (key in optionDecorations) {\n      decoration = optionDecorations[key]\n    } else {\n      const decorationKey = Object.keys(optionDecorations)\n        .filter((x) => x.includes(\"*\"))\n        .find((x) => key.startsWith(x.replace(\"*\", \"\")))\n      if (decorationKey) {\n        decoration = optionDecorations[decorationKey]\n      }\n    }\n\n    if (decoration) {\n      decorate(defaults, \"label\", decoration, key)\n      decorate(defaults, \"icon\", decoration, key)\n    }\n\n    return defaults\n  }\n\n  const options = [\n    {\n      value: \"normal\",\n      label: \"Normal\",\n      fn: resetImage,\n    },\n    ...augmentVariants.map(decorateOption),\n  ]\n\n  const noiseLevelVariants = Object.keys(image.variants || {})\n    .filter((x) => x.startsWith(\"noise\"))\n    .map((x) => parseInt(x.replace(\"noise\", \"\")))\n  const noiseLevels = [0, ...noiseLevelVariants]\n\n  return (\n    <StyledTuningsOuter>\n      <Centered>\n        <TuningSideTile>\n          <ControlLabel>Apply Filter:</ControlLabel>\n          <StyledTuningSelect>\n            <TuningSelect\n              options={options}\n              value={selectedVariant || options[0]}\n              onChange={(x) => {\n                setSelectedVariant(x)\n                x.fn()\n              }}\n            />\n          </StyledTuningSelect>\n          <RangeSlider\n            label=\"Add Noise:\"\n            step={1}\n            min={0}\n            max={Math.max(...noiseLevels)}\n            value={styles.noise}\n            onChange={(level) => {\n              setSelectedVariant(null)\n              addNoise(level)\n            }}\n          />\n        </TuningSideTile>\n      </Centered>\n    </StyledTuningsOuter>\n  )\n}\n\nconst Caption = styled.div`\n  position: absolute;\n  z-index: 5;\n  background-color: slategray;\n  color: white;\n  padding: 8px;\n  height: 35px;\n  border-bottom-right-radius: 8px;\n  border-top-left-radius: 15px;\n  font-size: 1.4rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n`\n\nconst StyledSwitchMode = styled.div`\n  position: absolute;\n  right: 0;\n  z-index: 5;\n  background-color: slategray;\n  color: white;\n  padding: 8px;\n  border-bottom-left-radius: 8px;\n  font-size: 1.2rem;\n  height: 35px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n`\n\nconst SwitchModeButton = styled.button`\n  border: 0;\n  outline: none;\n  background: none;\n  font-size: 1.2rem;\n  color: ${({ selected }) => (selected ? \"black\" : \"white\")};\n  flex: 1;\n  transition: text-shadow 0.25s ease;\n  &:hover {\n    cursor: pointer;\n    text-shadow: 1px 1px 1px black;\n  }\n`\n\nconst SwitchMode = ({ mode, onSwitchMode }) => {\n  const labels = {\n    trick: \"Back to Game\",\n  }\n  // const label = mode in labels ? labels[mode] : `Trick ${AI_NAME}?`\n  const label = mode in labels ? labels[mode] : `Learn More`\n  const toModes = {\n    trick: null,\n  }\n  const toMode = mode in toModes ? toModes[mode] : \"trick\"\n  return (\n    <StyledSwitchMode>\n      <SwitchModeButton onClick={() => onSwitchMode(toMode)}>\n        {label}\n      </SwitchModeButton>\n    </StyledSwitchMode>\n  )\n}\n\nconst StyledPracticeVoteButtons = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  position: absolute;\n  pointer-events: none;\n  width: 100%;\n  bottom: 0px;\n  z-index: 1;\n`\n\nconst PictureLabel = styled.div`\n  border-radius: 5px;\n  display: inline-block;\n  padding-left: 4px;\n  padding-right: 4px;\n  color: ${(props) => (props.changed ? \"white\" : \"#333\")};\n  background-color: ${(props) => (props.changed ? \"#dc004d\" : \"white\")};\n  border: 1px solid lightgray;\n  border-color: ${(props) => (props.changed ? \"antiquewhite\" : \"lightgray\")};\n  transition: background-color 1s ease;\n  font-style: italic;\n`\n\nconst ImageControls = ({ getImageDiv, images, index, onChange }) => {\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const fallbackProbability = 0.5\n  const [displayMode, setDisplayMode] = useState(null)\n  const [loadedImage, setLoadedImage] = useState({})\n  const image = images[index]\n  const defaultLoadedImageState = useMemo(\n    () =>\n      image\n        ? {\n            probability: image.probability || fallbackProbability,\n            label: image.label,\n          }\n        : { probability: fallbackProbability, label: \"unknown\" },\n    [image]\n  )\n  useEffect(() => {\n    setLoadedImage(defaultLoadedImageState)\n  }, [index, defaultLoadedImageState])\n\n  if (!images) return null\n\n  const resetImage = () => {\n    styleDiv(getImageDiv, {\n      \"background-image\": `url(\"img/${image.path}\")`,\n    })\n    setLoadedImage(defaultLoadedImageState)\n  }\n  const onClickUpdateProperty = (property, guessed) => {\n    const updated = { ...gameSettings }\n    updated.practiceRound[images[index].path][property] = guessed\n    setGameSettings(updated)\n  }\n  const onSeenBeforeClick = onClickUpdateProperty.bind(null, \"seenbefore\")\n\n  const question = gameSettings.practiceRound[images[index].path]\n  const caption =\n    loadedImage.label === \"deer\" ? (\n      <div>This is a deer, and {AI_NAME} agrees</div>\n    ) : (\n      <div>\n        This is a deer, but {AI_NAME} thinks its a{\" \"}\n        <PictureLabel\n          changed={\n            isDef(loadedImage.previousLabel) &&\n            loadedImage.label !== loadedImage.previousLabel\n          }\n          title={`Previous: ${loadedImage.previousLabel || \"none\"}`}\n        >\n          {loadedImage.label}\n        </PictureLabel>\n      </div>\n    )\n  return (\n    <>\n      {displayMode !== \"trick\" ? <Caption>{caption}</Caption> : null}\n      {images[index].variants ? (\n        <SwitchMode\n          mode={displayMode}\n          onSwitchMode={(mode) => {\n            resetImage()\n            setDisplayMode(mode)\n            onChange(clean({ displayMode: mode }))\n          }}\n        />\n      ) : null}\n      {displayMode && displayMode === \"trick\" ? (\n        <Tunings\n          image={images[index]}\n          getImageDiv={getImageDiv}\n          onLoadImageVariant={(x) => {\n            setLoadedImage({\n              ...defaultLoadedImageState,\n              ...x,\n              previousLabel: loadedImage.label,\n            })\n            onChange({ ...defaultLoadedImageState, ...x, displayMode })\n          }}\n          probability={loadedImage.probability}\n        />\n      ) : null}\n      {displayMode && displayMode === \"trick\" ? (\n        <Probability\n          value={loadedImage.probability}\n          previousLabel={loadedImage.previousLabel}\n          label={loadedImage.label}\n        />\n      ) : null}\n      <ImageSliderOverrideStyles images={images} currentIndex={index} />\n      {displayMode !== \"trick\" ? (\n        <StyledPracticeVoteButtons>\n          <QuestionWithButtons\n            question={`Do you think ${AI_NAME} was trained on this image?`}\n            onAnswer={onSeenBeforeClick.bind(null)}\n            defaultValue={question.seenbefore}\n          />\n        </StyledPracticeVoteButtons>\n      ) : null}\n    </>\n  )\n}\n\nconst StyledPractice = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst StyledPracticeGame = styled.div`\n  position: relative;\n`\n\nconst TwentyQuestionsPractice = ({ demo, hideSideBar }) => {\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const [gameSettings, setGameSettings] = useContext(GameContext)\n  const [imageState, setImageState] = useState({})\n  const reset = () =>\n    resetGame(gameSettings, setGameSettings, setCurrentIndex, demo)\n  const sliderRef = useRef()\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(reset, [])\n\n  const currentImage = () => {\n    const img = sliderRef.current.querySelectorAll(\n      'div[style*=\"background-image:\"][style*=\".png\"]'\n    )[1] // Take the second image, the first is the transition image\n    return img\n  }\n\n  if (\n    !gameSettings.currentGameData ||\n    !gameSettings.currentGameData.scrollingImages\n  )\n    return null\n\n  return gameSettings.currentGameData ? (\n    <Centered>\n      <StyledPractice id=\"practice-container\">\n        <StyledPracticeGame ref={sliderRef}>\n          <ImageControls\n            getImageDiv={currentImage}\n            images={gameSettings.currentGameData.scrollingImages}\n            index={currentIndex}\n            onChange={setImageState}\n          />\n          <SimpleImageSlider\n            key={gameSettings.version}\n            width={PRACTICE_IMAGE_SIZE.container.width}\n            height={PRACTICE_IMAGE_SIZE.container.height}\n            images={gameSettings.currentGameData.scrollingImages}\n            showBullets={false}\n            showNavs={imageState.displayMode !== \"trick\"}\n            navStyle={2}\n            onStartSlide={(idx) => {\n              setCurrentIndex(idx - 1)\n            }}\n            style={{\n              borderBottomLeftRadius: !hideSideBar ? 15 : null,\n              borderTopLeftRadius: !hideSideBar ? 15 : null,\n              backgroundColor: null,\n              border: \"1px solid slategray\",\n            }}\n          />\n        </StyledPracticeGame>\n        {!hideSideBar ? (\n          <PracticeResults\n            resetGame={reset}\n            currentImageIndex={currentIndex}\n            demo={demo}\n          />\n        ) : null}\n      </StyledPractice>\n    </Centered>\n  ) : null\n}\n\nexport default TwentyQuestionsPractice\n","import { Centered, GameButton } from \"./Util\"\nimport styled from \"styled-components\"\nimport { Link } from \"react-router-dom\"\n\nconst Container = styled.div`\n  border-radius: 10px;\n  background-color: antiquewhite;\n  box-shadow: 0 0 4px gray;\n  text-align: center;\n  padding: 40px;\n`\n\nconst Title = styled.h1`\n  font-size: 4rem;\n`\n\nconst GameCards = styled.div`\n  display: inline;\n`\n\nconst GameCardContainer = styled.div`\n  display: inline-block;\n  border: 1px solid gray;\n  background-color: lightslategray;\n  color: white;\n  text-shadow: 2px 2px 2px darkslategray;\n  border-radius: 15px;\n  padding: 10px;\n  margin-right: 10px;\n  box-shadow: 1px 1px 4px grey;\n`\n\nconst GameCardTitle = styled.div`\n  font-size: 1.6rem;\n  margin: 15px;\n`\n\nconst GameCardButton = styled(GameButton)`\n  margin-right: 10px;\n`\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  margin-right: -10px;\n`\n\nconst GameCard = ({ title, links }) => (\n  <GameCardContainer>\n    <GameCardTitle>{title}</GameCardTitle>\n    <ButtonContainer>\n      {links.map((x) => (\n        <Link key={x.to} to={x.to}>\n          <GameCardButton\n            {...{ \"data-tip\": x.disabled ? \"Coming soon\" : null }}\n          >\n            {x.title || \"Play\"}\n          </GameCardButton>\n        </Link>\n      ))}\n    </ButtonContainer>\n  </GameCardContainer>\n)\n\nconst games = [\n  {\n    title: \"20 Questions\",\n    links: [\n      { title: \"Learn\", to: \"/20q/learn\" },\n      { title: \"Easy\", to: \"/20q/easy\" },\n      { title: \"Hard\", to: \"/20q/hard\" },\n    ],\n  },\n  {\n    title: \"Match Game\",\n    links: [\n      { title: \"Learn\", to: \"/match/learn\" },\n      { title: \"Easy\", to: \"/match/easy\" },\n      { title: \"Hard\", to: \"/match/hard\" },\n    ],\n  },\n]\n\nconst Stack = styled.div`\n  display: flex;\n  flex-direction: column;\n`\nconst OrScroll = styled.div`\n  margin: 20px;\n  text-align: center;\n  &::after {\n    font-size: 1.4rem;\n    content: \"or scroll down to learn the story behind the games...\";\n  }\n`\n\nconst Menu = () => (\n  <Centered>\n    <Stack>\n      <Container>\n        <Title>Play A Game</Title>\n        <GameCards>\n          {games.map((x) => (\n            <GameCard key={x.title} {...x} />\n          ))}\n        </GameCards>\n      </Container>\n      <OrScroll />\n    </Stack>\n  </Centered>\n)\n\nexport default Menu\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport { ResponsiveWaffle } from \"@nivo/waffle\"\nimport { ResponsivePie } from \"@nivo/pie\"\nimport { ResponsiveLine } from \"@nivo/line\"\nimport { isDef } from \"../../util/misc\"\nimport { RangeSlider } from \"../game/Util\"\n\nexport const ChartData = {\n  line: (results, { groups }) => {\n    const starter = groups.reduce(\n      (all, g) => ({\n        ...all,\n        [g.label]: { id: g.label, color: g.color, data: [] },\n      }),\n      {}\n    )\n    const range = {\n      x: {\n        min: 99999,\n        max: -99999,\n      },\n      y: {\n        min: 99999,\n        max: -99999,\n      },\n    }\n    const data = Object.values(\n      (results || []).reduce((all, item, i) => {\n        const toData = (y) => ({\n          x: i,\n          y,\n        })\n        groups.forEach((g) => {\n          const data = toData(g.fn(item))\n          range.x.min = Math.min(range.x.min, data.x)\n          range.y.min = Math.min(range.y.min, data.y)\n          range.x.max = Math.max(range.x.min, data.x)\n          range.y.max = Math.max(range.y.max, data.y)\n          all[g.label].data.push(data)\n        })\n        return all\n      }, starter)\n    )\n    return {\n      range,\n      data,\n    }\n  },\n  rollup: (results, { title, type, groups, totalFn }, threshold) => {\n    const result = results[threshold]\n    return {\n      groups,\n      title,\n      type,\n      colors: groups.map((x) => x.color),\n      data: [\n        ...groups.map((g) => ({\n          id: g.label,\n          label: g.label,\n          value: g.fn(result),\n        })),\n      ],\n      total: totalFn ? totalFn(result) : 0,\n    }\n  },\n}\n\nconst ChartContainer = styled.div`\n  height: ${({ height = 150 }) => `${height}px`};\n  width: ${({ width = 150 }) => `${width}px`};\n  background-color: white;\n  border: 1px solid lightgray;\n  border-radius: 5px;\n  margin: 5px;\n`\n\nconst reducePropWithFn = (fn, propKey, data) =>\n  data && data.length\n    ? data.reduce(\n        (cumulative, v) => fn(...v.data.map((d) => d[propKey]), cumulative),\n        0\n      )\n    : 0\n\nconst Thresholds = {\n  maxXValue: reducePropWithFn.bind(null, Math.max, \"x\"),\n  maxYValue: reducePropWithFn.bind(null, Math.max, \"y\"),\n  minXValue: reducePropWithFn.bind(null, Math.min, \"x\"),\n  minYValue: reducePropWithFn.bind(null, Math.min, \"y\"),\n}\n\nconst pointsAtThreshold = (series, threshold) =>\n  series.map((s) => ({\n    ...s.data[threshold].position,\n    color: s.color,\n    label: s.id,\n  }))\n\nconst Threshold = ({\n  data,\n  dataRange,\n  threshold,\n  xScale,\n  yScale,\n  columnWidth,\n  series,\n}) => {\n  if (!isDef(data) || !isDef(threshold) || !isDef(columnWidth)) return null\n  const beyondYBuffer = 5\n  const [columnX1, columnY1, columnX2, columnY2] = [\n    xScale(threshold),\n    yScale(-beyondYBuffer),\n    xScale(threshold),\n    yScale(Thresholds.maxYValue(data) + beyondYBuffer),\n  ]\n\n  const minXEdge = xScale(dataRange?.x?.min) - xScale(2)\n  const maxXEdge = xScale(dataRange?.x?.max) + xScale(1)\n  const linePadding = columnWidth / 2.0 + 1\n  const columnPolyPoints = [\n    `${columnX1 - linePadding},${columnY1}`,\n    `${columnX1 - linePadding},${columnY2}`,\n    `${columnX2 + linePadding},${columnY2}`,\n    `${columnX2 + linePadding},${columnY1}`,\n  ]\n  const leftAreaPolyPoints = [\n    `${minXEdge},${columnY1}`,\n    `${minXEdge},${columnY2}`,\n    `${columnX1 - linePadding},${columnY2}`,\n    `${columnX1 - linePadding},${columnY1}`,\n  ]\n  const rightAreaPolyPoints = [\n    `${columnX2 + linePadding},${columnY2}`,\n    `${columnX2 + linePadding},${columnY1}`,\n    `${maxXEdge},${columnY1}`,\n    `${maxXEdge},${columnY2}`,\n  ]\n  const polyPoints = (points) => points.join(\" \")\n\n  const leftOfSliderLabel = \"LESS\"\n  const rightOfSliderLabel = \"MORE\"\n  const outsideAreaColor = \"rgba(100,100,100,.2)\"\n  const sliderTopLabel = null\n\n  const rightLabelX = maxXEdge - (maxXEdge - columnX2) / 2.0\n  const leftLabelX = columnX1 / 2 + minXEdge / 2\n  return isNaN(columnX1) ||\n    isNaN(columnX2) ||\n    isNaN(columnY1) ||\n    isNaN(columnY2) ? null : (\n    <>\n      <>\n        {leftOfSliderLabel && threshold > dataRange.x.min ? (\n          <text\n            x={leftLabelX}\n            y={-7}\n            textAnchor=\"middle\"\n            style={{ fontSize: \".7rem\" }}\n          >\n            &#8592; {leftOfSliderLabel}\n          </text>\n        ) : null}\n        {sliderTopLabel ? (\n          <text\n            x={columnX1}\n            y={-7}\n            textAnchor=\"middle\"\n            style={{ fontSize: \".63rem\" }}\n          >\n            {sliderTopLabel}\n          </text>\n        ) : null}\n        {rightOfSliderLabel && threshold < dataRange.x.max ? (\n          <text\n            x={rightLabelX}\n            y={-7}\n            textAnchor=\"middle\"\n            style={{ fontSize: \".7rem\" }}\n          >\n            {rightOfSliderLabel} &#8594;\n          </text>\n        ) : null}\n      </>\n      <polygon\n        points={polyPoints(columnPolyPoints)}\n        fill=\"rgba(0,0,0,0)\"\n        stroke=\"rgba(20,20,20,1)\"\n        strokeWidth=\"1.5\"\n      />\n      <polygon\n        points={polyPoints(leftAreaPolyPoints)}\n        fill={outsideAreaColor}\n      />\n      <polygon\n        points={polyPoints(rightAreaPolyPoints)}\n        fill={outsideAreaColor}\n      />\n      {pointsAtThreshold(series, threshold).map((p, i) => (\n        <React.Fragment key={`highlighted-point-${p.label}`}>\n          <circle cx={p.x} cy={p.y} r={6} fill={p.color} />\n          <text\n            x={p.x + 11}\n            y={p.y}\n            dominantBaseline={\n              i % 2 === 0 ? \"text-after-edge\" : \"text-before-edge\"\n            }\n            style={{ fontSize: \".9rem\" }}\n          >\n            {p.label}\n          </text>\n        </React.Fragment>\n      ))}\n    </>\n  )\n}\n\nconst Lines = ({ model, columnWidth = 15, threshold, left = 45 }) => {\n  return model ? (\n    <ResponsiveLine\n      data={model.data}\n      margin={{ top: 20, bottom: 30, right: 20, left }}\n      colors={{ datum: \"color\" }}\n      threshold={threshold}\n      columnWidth={columnWidth}\n      dataRange={model.range}\n      enablePoints={false}\n      enableSlices=\"x\"\n      axisLeft={{\n        tickValues: 5,\n        legend: \"Model Accuracy\",\n        legendOffset: -37,\n        legendPosition: \"middle\",\n      }}\n      yScale={{\n        type: \"linear\",\n        min: \"auto\",\n        max: \"auto\",\n      }}\n      layers={[\n        \"grid\",\n        \"markers\",\n        \"axes\",\n        \"lines\",\n        \"points\",\n        Threshold,\n        \"slices\",\n        \"crosshair\",\n      ]}\n    />\n  ) : null\n}\n\nconst StyledChartTitle = styled.div`\n  font-weight: bold;\n  font-size: 0.8rem;\n  text-align: center;\n  margin: 5px 0;\n`\nconst WaffleDot = ({\n  size,\n  x,\n  y,\n  color,\n  fill,\n  opacity,\n  borderWidth,\n  borderColor,\n  onHover,\n  onLeave,\n}) => (\n  <circle\n    r={size / 2}\n    cx={x + size / 2}\n    cy={y + size / 2}\n    fill={fill || color}\n    strokeWidth={borderWidth}\n    stroke={borderColor}\n    opacity={opacity}\n    onMouseEnter={onHover}\n    onMouseMove={onHover}\n    onMouseLeave={onLeave}\n  />\n)\nconst Waffle = ({ model }) => {\n  if (!model.data) return null\n  const total = 100 // Hard coded to get the desired dot mapping\n  return (\n    <>\n      {model.title ? <StyledChartTitle>{model.title}</StyledChartTitle> : null}\n      <ResponsiveWaffle\n        data={model.data}\n        total={total}\n        rows={Math.sqrt(total)}\n        columns={Math.sqrt(total)}\n        colors={model.colors}\n        margin={{ top: 0, left: 10, right: 10 }}\n        cellComponent={WaffleDot}\n        fillDirection=\"top\"\n        emptyColor=\"rgba(0,0,0,0)\"\n      />\n    </>\n  )\n}\n\nconst PieCenter = ({\n  dataWithArc,\n  centerX,\n  centerY,\n  fn = () => 0,\n  fontSize = \"1.5rem\",\n}) => (\n  <text\n    x={centerX}\n    y={centerY}\n    textAnchor=\"middle\"\n    dominantBaseline=\"central\"\n    style={{\n      fontSize,\n    }}\n  >\n    {fn(dataWithArc)}\n  </text>\n)\n\nconst PieCenterPercent = (props) => (\n  <PieCenter\n    {...props}\n    fn={(data) => {\n      const total = data.reduce((all, x) => all + x.value, 0)\n      const percent = ((data[0].value / total) * 100).toFixed()\n      return `${percent}%`\n    }}\n    fontSize=\"1rem\"\n  />\n)\n\nconst Pie = ({ model, showTotal = true }) => {\n  return (\n    <>\n      {model.title ? <StyledChartTitle>{model.title}</StyledChartTitle> : null}\n      <ResponsivePie\n        data={model.data}\n        margin={{ top: 35, right: 120, bottom: 80, left: 120 }}\n        colors={model.colors}\n        innerRadius={0.5}\n        layers={[\"arcs\", showTotal ? PieCenterPercent : null]}\n      />\n    </>\n  )\n}\n\nconst QuadChart = ({ model }) =>\n  model.type === \"pie\" ? (\n    <Pie model={model} />\n  ) : model.type === \"waffle\" ? (\n    <Waffle model={model} />\n  ) : null\n\nconst LegendPart = ({ color, text, index }) => {\n  const swatch = (\n    <div\n      style={{\n        width: 14,\n        height: 14,\n        borderRadius: \"50%\",\n        backgroundColor: color,\n        margin: \"0 5px\",\n      }}\n    />\n  )\n  const colorPosition = index % 2 === 0 ? \"right\" : \"left\"\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        textAlign: colorPosition,\n        justifyContent: colorPosition === \"left\" ? \"flex-start\" : \"flex-end\",\n        padding: \"1px 0\",\n      }}\n    >\n      {colorPosition === \"left\" ? swatch : null}\n      <span style={{ fontSize: \".6rem\" }}>{text}</span>\n      {colorPosition === \"right\" ? swatch : null}\n    </div>\n  )\n}\n\nconst Legend = ({ model }) => (\n  <div\n    style={{\n      display: \"grid\",\n      gridTemplateColumns: \"50% 50%\",\n    }}\n  >\n    {model.map((x, i) => (\n      <LegendPart key={`legend-part-${i}`} index={i} {...x} />\n    ))}\n  </div>\n)\n\nconst FlexDiv = styled.div`\n  display: flex;\n`\nconst FlexColumns = styled(FlexDiv)`\n  flex-direction: column;\n`\nconst FlexRows = styled(FlexDiv)`\n  flex-direction: row;\n`\nconst ChartSet = ({\n  height = 300,\n  width = 600,\n  threshold,\n  models,\n  sliderStep = 1,\n  sliderLabel,\n  setThreshold,\n  legendModel,\n}) => {\n  const mainChartWidth = width / 2\n  const smallChartHeight = height / 2 - 6\n  const marginLeft = 45\n  return (\n    <FlexDiv>\n      {models?.main?.range?.x?.max ? (\n        <FlexColumns>\n          <ChartContainer height={height} width={mainChartWidth}>\n            <Lines\n              model={models.main}\n              threshold={threshold}\n              left={marginLeft}\n            />\n          </ChartContainer>\n          <RangeSlider\n            label={sliderLabel}\n            labelPosition=\"bottom\"\n            min={models?.main.range.x.min}\n            max={models?.main.range.x.max}\n            step={sliderStep}\n            value={threshold}\n            style={{\n              outline: \"none\",\n              width: mainChartWidth - marginLeft - 20,\n              marginLeft: marginLeft + 6,\n              marginTop: 4,\n            }}\n            handleStyle={{\n              padding: 3,\n              borderRadius: \"0 0 50% 50%\",\n            }}\n            onChange={(level) => setThreshold(level)}\n          />\n        </FlexColumns>\n      ) : null}\n      <FlexColumns>\n        <FlexRows>\n          <ChartContainer height={smallChartHeight}>\n            <QuadChart model={models.quad1} />\n          </ChartContainer>\n          <ChartContainer height={smallChartHeight}>\n            <QuadChart model={models.quad2} />\n          </ChartContainer>\n        </FlexRows>\n        <FlexRows>\n          <ChartContainer height={smallChartHeight}>\n            <QuadChart model={models.quad3} />\n          </ChartContainer>\n          <ChartContainer height={smallChartHeight}>\n            <QuadChart model={models.quad4} />\n          </ChartContainer>\n        </FlexRows>\n        <Legend model={legendModel} />\n      </FlexColumns>\n    </FlexDiv>\n  )\n}\n\nexport default ChartSet\n","import { useEffect, useState } from \"react\"\nimport LabelOnlyDistanceChartSet, {\n  ChartData,\n} from \"./LabelOnlyDistanceChartSet\"\n\nconst Colors = {\n  red: \"#FF4136\",\n  blue: \"#0074D9\",\n  gray: \"gray\",\n  test: \"orange\",\n  train: \"cornflowerblue\",\n}\n\nconst LegendModel = [\n  { color: Colors.red, text: \"TEST\" },\n  { color: Colors.blue, text: \"TRAIN\" },\n]\n\nconst IN_RATE_DIVISOR = 50\nconst CORRECT_RATE_DIVISOR = 100\n\nconst correctRate = (x) =>\n  (x?.test_results?.target_test_fgs_incorrect || 0) +\n  (x?.train_results?.target_train_fgs_correct || 0)\n\nconst ChartModels = {\n  main: {\n    groups: [\n      {\n        label: \"Train\",\n        fn: (x) => x.train_results.target_train_fgs_acc,\n        color: Colors.blue,\n      },\n      {\n        label: \"Test\",\n        fn: (x) => x.test_results.target_test_fgs_acc,\n        color: Colors.red,\n      },\n    ],\n  },\n  quad1: {\n    title: \"Attacked Correctly\",\n    type: \"waffle\",\n    groups: [\n      {\n        label: \"Test\",\n        fn: (x) => x?.test_results?.target_test_fgs_incorrect || 0,\n        color: Colors.red,\n      },\n      {\n        label: \"Train\",\n        fn: (x) => x?.train_results?.target_train_fgs_correct || 0,\n        color: Colors.blue,\n      },\n    ],\n  },\n  quad2: {\n    title: \"Attacked Incorrectly\",\n    type: \"waffle\",\n    groups: [\n      {\n        label: \"Train\",\n        fn: (x) => x?.train_results?.target_train_fgs_incorrect || 0,\n        color: Colors.blue,\n      },\n      {\n        label: \"Test\",\n        fn: (x) => x?.test_results?.target_test_fgs_correct || 0,\n        color: Colors.red,\n      },\n    ],\n  },\n  quad3: {\n    title: \"True IN Rate\",\n    type: \"pie\",\n    groups: [\n      {\n        label: \"IN\",\n        fn: (x) => x?.train_results?.target_train_fgs_correct || 0,\n        color: Colors.blue,\n      },\n      {\n        label: \"OUT\",\n        fn: (x) =>\n          IN_RATE_DIVISOR - (x?.train_results?.target_train_fgs_correct || 0),\n        color: Colors.gray,\n      },\n    ],\n  },\n  quad4: {\n    title: \"Correct Rate\",\n    type: \"pie\",\n    groups: [\n      {\n        label: \"Correct\",\n        fn: (x) => correctRate(x),\n        color: Colors.blue,\n      },\n      {\n        label: \"Incorrect\",\n        fn: (x) => CORRECT_RATE_DIVISOR - correctRate(x),\n        color: Colors.gray,\n      },\n    ],\n  },\n}\nconst ExperimentLabelOnlyDisanceChartSet = ({\n  nodeSize = 10,\n  defaultNoise = 5,\n  height = 300,\n  width = 600,\n  bottomLabel,\n  sliderLabel,\n}) => {\n  const [rawData, setRawData] = useState([])\n  const [models, setModels] = useState({\n    main: { data: [] },\n    quad1: { data: [], total: 0 },\n    quad2: { data: [], total: 0 },\n    quad3: { data: [], total: 0 },\n    quad4: { data: [], total: 0 },\n  })\n  // const [dotPlotMaxX, setDotPlotMaxX] = useState(0)\n  const [noise, setNoise] = useState(defaultNoise)\n\n  useEffect(() => {\n    const getRawData = async () => {\n      const result = await fetch(\"./data/label-only-distance-data.json\")\n      const data = await result.json()\n      const zeroResult = {\n        train_results: {\n          target_train_fgs_acc: data.target_train_acc,\n          target_train_fgs_correct: data.target_train_correct,\n          target_train_fgs_incorrect: data.target_train_incorrect,\n        },\n        test_results: {\n          target_test_fgs_acc: data.target_test_acc,\n          target_test_fgs_correct: data.target_test_correct,\n          target_test_fgs_incorrect: data.target_test_incorrect,\n        },\n      }\n      setRawData([zeroResult, ...data.results])\n    }\n\n    getRawData()\n  }, [])\n\n  useEffect(() => {\n    setModels({\n      main: ChartData.line(rawData, ChartModels.main),\n      quad1: ChartData.rollup(rawData, ChartModels.quad1, defaultNoise),\n      quad2: ChartData.rollup(rawData, ChartModels.quad2, defaultNoise),\n      quad3: ChartData.rollup(rawData, ChartModels.quad3, defaultNoise),\n      quad4: ChartData.rollup(rawData, ChartModels.quad4, defaultNoise),\n    })\n\n    // if (_dotPlotData.maxX) setDotPlotMaxX(_dotPlotData.maxX + 1)\n  }, [rawData, defaultNoise])\n\n  useEffect(() => {\n    setModels({\n      ...models,\n      quad1: ChartData.rollup(rawData, ChartModels.quad1, noise),\n      quad2: ChartData.rollup(rawData, ChartModels.quad2, noise),\n      quad3: ChartData.rollup(rawData, ChartModels.quad3, noise),\n      quad4: ChartData.rollup(rawData, ChartModels.quad4, noise),\n    }) // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [noise])\n  // return null\n  return (\n    <LabelOnlyDistanceChartSet\n      models={models}\n      sliderLabel={sliderLabel}\n      threshold={noise}\n      setThreshold={setNoise}\n      legendModel={LegendModel}\n    />\n  )\n}\n\nexport default ExperimentLabelOnlyDisanceChartSet\n","import { useState, useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport { Centered, RangeSlider } from \"./game/Util\"\nimport { gameData } from \"../util/data\"\n\nconst toNoiseImage = (image, index) => ({\n  index,\n  src: `img/${image.path}`,\n  label: image.label,\n})\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: whitesmoke;\n  padding: 10px;\n  border: 1px solid gray;\n  border-radius: 5px;\n`\n\nconst StyledImageTile = styled.div`\n  position: relative;\n  display: inline-block;\n  height: ${({ size = {} }) => size.height || \"180px\"};\n  width: ${({ size = {} }) => size.width || \"180px\"};\n  margin: 2px;\n`\n\nconst StyledImageTileImage = styled.img`\n  height: 100%;\n  width: 100%;\n  border-radius: ${({ rounded }) => (rounded ? \"5px\" : \"none\")};\n`\n\nconst StyledImageLabel = styled.div`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  padding: 5px;\n  font-size: 75%;\n  color: white;\n  background: rgba(0, 0, 0, 0.5);\n  border-top-left-radius: 3px;\n  border-bottom-right-radius: ${({ rounded }) => (rounded ? \"5px\" : \"none\")};\n`\n\nconst ImageTile = ({ image, size, rounded }) => (\n  <StyledImageTile size={size}>\n    <StyledImageLabel title={image.title} rounded={rounded}>\n      {image.label}\n    </StyledImageLabel>\n    <StyledImageTileImage src={image.src} alt=\"\" rounded={rounded} />\n  </StyledImageTile>\n)\n\nconst ImageTiles = ({ images, tileSize, rounded }) => (\n  <div>\n    {images.map((x, i) => (\n      <ImageTile\n        key={`image-tile-${x}-${i}`}\n        image={x}\n        size={tileSize}\n        rounded={rounded}\n      />\n    ))}\n  </div>\n)\n\nconst ImageNoise = ({ imageSetNumber = 3, rounded = true }) => {\n  const [rawImages, setRawImages] = useState([])\n  const [images, setImages] = useState([])\n  const [noiseLevel, setNoiseLevel] = useState(0)\n  const [noiseLevelRange, setNoiseLevelRange] = useState([0, 0])\n  useEffect(() => {\n    const getImageData = async () => {\n      const _gameData = await gameData()\n      const _rawImages = _gameData.practiceOptions[imageSetNumber]\n      setRawImages(_rawImages)\n      const noiseLevels = [\n        ...new Set(\n          _rawImages.reduce(\n            (all, x) => [\n              ...all,\n              ...Object.keys(x.variants || {})\n                .filter((x) => x.startsWith(\"noise\"))\n                .map((x) => parseInt(x.replace(\"noise\", \"\"))),\n            ],\n            []\n          )\n        ),\n      ]\n      setNoiseLevelRange([0, Math.max(...noiseLevels)])\n      setImages(_rawImages.map(toNoiseImage))\n    }\n\n    getImageData() // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (noiseLevel === 0) return\n    const noisyImages = rawImages.map(\n      (x, i) => toNoiseImage(x.variants[`noise${noiseLevel}`], i) // TODO What if there is no noise level for this image?\n    )\n    setImages(noisyImages) // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [noiseLevel])\n\n  const [sliderMin, sliderMax] = noiseLevelRange\n  return images && images.length ? (\n    <Centered>\n      <Container>\n        <ImageTiles\n          images={images}\n          tileSize={{ height: \"180px\", width: \"180px\" }}\n          rounded={rounded}\n        />\n        {sliderMax > 0 ? (\n          <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n            <RangeSlider\n              label=\"Add Noise\"\n              labelPosition=\"bottom\"\n              min={sliderMin}\n              max={sliderMax}\n              step={1}\n              value={noiseLevel}\n              style={{\n                outline: \"none\",\n                width: \"100%\",\n              }}\n              onChange={setNoiseLevel}\n            />\n          </div>\n        ) : null}\n      </Container>\n    </Centered>\n  ) : null\n}\n\nexport default ImageNoise\n","import { useState, useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport { TagCloud } from \"react-tagcloud\"\n\nconst Model = [\n  { img: \"story-img/class-arch.png\", label: \"Arch\", tagSize: 25 },\n  { img: \"story-img/class-barn.png\", label: \"Barn\", tagSize: 35 },\n  { img: \"story-img/class-beach.png\", label: \"Beach\", tagSize: 25 },\n  { img: \"story-img/class-beetle.png\", label: \"Beetle\", tagSize: 35 },\n  { img: \"story-img/class-broom.png\", label: \"Broom\", tagSize: 25 },\n  { img: \"story-img/class-candle.png\", label: \"Candle\", tagSize: 35 },\n  { img: \"story-img/class-lamp.png\", label: \"Lamp\", tagSize: 25 },\n  { img: \"story-img/class-phone.png\", label: \"Phone\", tagSize: 35 },\n  { img: \"story-img/class-pool-table.png\", label: \"Pool Table\", tagSize: 25 },\n  { img: \"story-img/class-ship.png\", label: \"Ship\", tagSize: 35 },\n  { img: \"story-img/class-skunk.png\", label: \"Skunk\", tagSize: 35 },\n  { img: \"story-img/class-toaster.png\", label: \"Toaster\", tagSize: 25 },\n]\n\nconst data = Model.map((x, i) => ({ value: x.label, count: x.tagSize }))\n\nconst StyledImg = styled.img`\n  border-radius: 5px;\n  margin: 0 2px 0 2px;\n  display: inline-block;\n`\n\nconst Image = ({\n  details: { img, label },\n  imageWidth,\n  onSelect = () => null,\n}) => {\n  const [hovered, setHovered] = useState(false)\n  const onMouseOver = (label) => {\n    setHovered(label ? true : false)\n    onSelect(label)\n  }\n\n  const style = () => ({\n    width: imageWidth,\n    height: \"auto\",\n    boxShadow: hovered ? \"1px 1px 5px gray\" : \"none\",\n  })\n\n  return (\n    <StyledImg\n      onMouseOver={() => onMouseOver(label)}\n      onMouseOut={() => onMouseOver()}\n      src={img}\n      alt={label}\n      style={style()}\n    />\n  )\n}\n\nconst Images = ({ images, width = 640, imageWidth = 130, onSelect }) => {\n  return (\n    <div style={{ width }}>\n      {images.map((x) => (\n        <Image\n          key={`card-${x.label}`}\n          details={x}\n          imageWidth={imageWidth}\n          onSelect={onSelect}\n        />\n      ))}\n    </div>\n  )\n}\n\nconst Tag = styled.div`\n  display: inline-block;\n  margin: 3px 10px;\n  padding: 0 4px;\n  border: 3px solid ${({ color }) => color};\n  border-radius: 3px;\n  font-size: ${({ size }) => size}pt;\n  transition: border 0.2s linear;\n`\n\nconst customRenderer = (tag, size, color) => {\n  return (\n    <Tag key={tag.value} size={size} color={color}>\n      {tag.value}\n    </Tag>\n  )\n}\nconst ImageClasses = ({ model = Model }) => {\n  const [selected, setSelected] = useState()\n  const [images, setImages] = useState([])\n\n  useEffect(() => {\n    setImages(model) // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Images images={images} onSelect={(label) => setSelected(label)} />\n      <div style={{ display: \"flex\", alignContent: \"center\" }}>\n        <TagCloud\n          style={{ width: 400, textAlign: \"center\" }}\n          tags={data}\n          minSize={25}\n          maxSize={35}\n          renderer={(tag) =>\n            customRenderer(\n              tag,\n              tag.count,\n              tag.value === selected ? \"orange\" : \"rgba(0,0,0,0)\"\n            )\n          }\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default ImageClasses\n","const Models = {\n  PuppiesToFood: {\n    columns: [\n      { cx: 10, fill: \"rgb(157,157,144)\", yValues: [10, 30, 50, 70, 90] },\n      { cx: 40, fill: \"rgb(158,170,190)\", yValues: [30, 50, 70] },\n      { cx: 70, fill: \"rgb(240,161,112)\", yValues: [40, 60] },\n      {\n        cx: 100,\n        yValues: [\n          { cy: 10, fill: \"rgb(176,0,4)\" },\n          { cy: 26, r: 1 },\n          { cy: 30, r: 1 },\n          { cy: 34, r: 1 },\n          { cy: 50, fill: \"rgb(0,0,0)\" },\n          { cy: 70, fill: \"rgb(255,226,129)\" },\n          { cy: 90, fill: \"rgb(130,201,63)\" },\n        ],\n      },\n      {\n        cx: 130,\n        yValues: [\n          { cy: 10, fill: \"rgb(222,93,97)\" },\n          { cy: 26, r: 1 },\n          { cy: 30, r: 1 },\n          { cy: 34, r: 1 },\n          { cy: 50, fill: \"rgb(129,134,133)\" },\n          { cy: 70, fill: \"rgb(255,239,185)\" },\n          { cy: 90, fill: \"rgb(186,227,146)\" },\n        ],\n      },\n    ],\n    arrows: [\n      { from: [0, 0], to: [1, 0] },\n      { from: [0, 0], to: [1, 1] },\n      { from: [0, 1], to: [1, 0] },\n      { from: [0, 1], to: [1, 1] },\n      { from: [0, 1], to: [1, 2] },\n      { from: [0, 2], to: [1, 0] },\n      { from: [0, 2], to: [1, 1] },\n      { from: [0, 2], to: [1, 2] },\n      { from: [0, 3], to: [1, 0] },\n      { from: [0, 3], to: [1, 1] },\n      { from: [0, 3], to: [1, 2] },\n      { from: [0, 4], to: [1, 1] },\n      { from: [0, 4], to: [1, 2] },\n      { from: [1, 0], to: [2, 0] },\n      { from: [1, 0], to: [2, 1] },\n      { from: [1, 1], to: [2, 0] },\n      { from: [1, 1], to: [2, 1] },\n      { from: [1, 2], to: [2, 0] },\n      { from: [1, 2], to: [2, 1] },\n      { from: [2, 0], to: [3, 0] },\n      { from: [2, 0], to: [3, 4] },\n      { from: [2, 0], to: [3, 5] },\n      { from: [2, 0], to: [3, 6] },\n      { from: [2, 1], to: [3, 0] },\n      { from: [2, 1], to: [3, 4] },\n      { from: [2, 1], to: [3, 5] },\n      { from: [2, 1], to: [3, 6] },\n    ],\n  },\n  MIA: {\n    columns: [\n      {\n        r: 9,\n        cx: 10,\n        fill: \"rgb(157,157,144)\",\n        yValues: [10, 30, 50, 70, 90],\n      },\n      { r: 9, cx: 50, fill: \"cornflowerblue\", yValues: [20, 40, 60, 80] },\n      { r: 9, cx: 90, fill: \"goldenrod\", yValues: [25, 50, 75] },\n      { r: 9, cx: 130, fill: \"#FF4136\", yValues: [25, 50, 75] },\n    ],\n    arrows: [\n      { from: [0, 0], to: [1, 0] },\n      { from: [0, 0], to: [1, 1] },\n      { from: [0, 0], to: [1, 2] },\n      { from: [0, 0], to: [1, 3] },\n      { from: [0, 1], to: [1, 0] },\n      { from: [0, 1], to: [1, 1] },\n      { from: [0, 1], to: [1, 2] },\n      { from: [0, 1], to: [1, 3] },\n      { from: [0, 2], to: [1, 0] },\n      { from: [0, 2], to: [1, 1] },\n      { from: [0, 2], to: [1, 2] },\n      { from: [0, 2], to: [1, 3] },\n      { from: [0, 3], to: [1, 0] },\n      { from: [0, 3], to: [1, 1] },\n      { from: [0, 3], to: [1, 2] },\n      { from: [0, 3], to: [1, 3] },\n      { from: [0, 4], to: [1, 0] },\n      { from: [0, 4], to: [1, 1] },\n      { from: [0, 4], to: [1, 2] },\n      { from: [0, 4], to: [1, 3] },\n      { from: [1, 0], to: [2, 0] },\n      { from: [1, 0], to: [2, 1] },\n      { from: [1, 0], to: [2, 2] },\n      { from: [1, 1], to: [2, 0] },\n      { from: [1, 1], to: [2, 1] },\n      { from: [1, 1], to: [2, 2] },\n      { from: [1, 2], to: [2, 0] },\n      { from: [1, 2], to: [2, 1] },\n      { from: [1, 2], to: [2, 2] },\n      { from: [1, 3], to: [2, 0] },\n      { from: [1, 3], to: [2, 1] },\n      { from: [1, 3], to: [2, 2] },\n      { from: [2, 0], to: [3, 0] },\n      { from: [2, 0], to: [3, 1] },\n      { from: [2, 0], to: [3, 2] },\n      { from: [2, 1], to: [3, 0] },\n      { from: [2, 1], to: [3, 1] },\n      { from: [2, 1], to: [3, 2] },\n      { from: [2, 2], to: [3, 0] },\n      { from: [2, 2], to: [3, 1] },\n      { from: [2, 2], to: [3, 2] },\n    ],\n  },\n}\n\nconst defaultCircleProps = {\n  r: 7,\n  fill: \"black\",\n}\n\nconst circleIsClickable = (clickables, { column, rowIndex }) => {\n  return (clickables || []).find((x) => x === `${column}:${rowIndex}`)\n}\n\nconst circleProps = ({ column, override, rowIndex }) => ({\n  ...defaultCircleProps,\n  key: `circle-${column}-${override.cy}`,\n  id: `circle-${column}-${rowIndex}`,\n  ...override,\n})\n\nconst Column = ({\n  index,\n  cx,\n  yValues,\n  r = 7,\n  fill,\n  clickables = [],\n  onClick,\n}) =>\n  yValues.map((cy, i) => {\n    const defaultProps = { column: index, rowIndex: i }\n    const props =\n      typeof cy === \"object\"\n        ? circleProps({ ...defaultProps, override: { cx, ...cy } })\n        : circleProps({ ...defaultProps, override: { cx, cy, r, fill } })\n    const clickable = circleIsClickable(clickables, defaultProps)\n    props.onClick = clickable ? (x) => onClick(x) : null\n    props.style = clickable ? { cursor: \"pointer\" } : null\n    return <circle {...props} />\n  })\n\nconst TargetModelArrow = ({ model, from, to }) => {\n  const _model = Models[model]\n  const lineY = (col, i) => {\n    const yValue = _model.columns[col].yValues[i]\n    return typeof yValue === \"object\" ? yValue.cy : yValue\n  }\n  const lineX = (col) => _model.columns[col].cx + defaultCircleProps.r\n  const lineEndX = (col) => _model.columns[col].cx - defaultCircleProps.r\n  return (\n    <line\n      x1={lineX(from[0])}\n      y1={lineY(from[0], from[1])}\n      x2={lineEndX(to[0])}\n      y2={lineY(to[0], to[1])}\n      stroke=\"#000\"\n      strokeWidth={0.7}\n      markerEnd=\"url(#arrowhead)\"\n    />\n  )\n}\n\nconst TargetModelDiagram = ({\n  model = \"PuppiesToFood\",\n  style,\n  id,\n  additionalShapes = [],\n  clickableCircles = [],\n  onClickCircle = () => null,\n}) => (\n  <div style={style} id={id}>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 140 100\">\n      <defs>\n        <marker\n          id=\"arrowhead\"\n          markerWidth=\"6\"\n          markerHeight=\"6\"\n          refX=\"12\"\n          refY=\"3\"\n          orient=\"auto\"\n        >\n          <polygon points=\"0 0, 6 3, 0 6\" />\n        </marker>\n      </defs>\n      {Models[model].columns.map((c, i) => (\n        <Column\n          key={`column-${i}`}\n          index={i}\n          clickables={clickableCircles}\n          onClick={onClickCircle}\n          {...c}\n        />\n      ))}\n\n      {Models[model].arrows.map((a, i) => (\n        <TargetModelArrow\n          key={`target-model-arrow-${i}`}\n          model={model}\n          {...a}\n        />\n      ))}\n\n      {additionalShapes}\n    </svg>\n  </div>\n)\n\nexport default TargetModelDiagram\n","import { useState, useEffect, useCallback } from \"react\"\nimport styled from \"styled-components\"\nimport { Emoji } from \"./game/Util\"\n\n// Inspired by https://github.com/distillpub/post--communicating-with-interactive-articles/blob/master/src/diagrams/horse.svelte\n\nconst Container = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n  background-color: whitesmoke;\n  padding: 1px;\n`\nconst PictureAndInformation = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n`\nconst Picture = styled.img`\n  margin: 25px;\n  height: 125px;\n  width: auto;\n  border-radius: 5px;\n`\nconst Information = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin: 0 15px 15px 0;\n  /* padding: 15px; */\n`\nconst Controls = styled.div`\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  margin-bottom: 10px;\n`\nconst Slides = styled.div`\n  text-align: center;\n  padding: 10px;\n  border-top: 1px solid gray;\n  white-space: nowrap;\n`\nconst Slide = styled.img`\n  height: 85px;\n  width: auto;\n  margin-right: 5px;\n  cursor: crosshair;\n  padding-bottom: 1px;\n  border-bottom: ${({ selected }) =>\n    selected ? \"5px solid midnightblue\" : \"5px solid rgba(0,0,0,0)\"};\n  :last-child {\n    margin-right: 0;\n  }\n`\n\nconst Rotated = ({ rotation = 90, children, style }) => (\n  <div style={{ ...style, transform: `rotate(${rotation}deg)` }}>\n    {children}\n  </div>\n)\n\nconst RotatedText = (props) => (\n  <Rotated style={{ fontSize: props.size }} {...props}></Rotated>\n)\n\nconst StyledAnimateButton = styled.button`\n  border: 2px solid slategray;\n  border-radius: 50%;\n  outline: none;\n  height: 30px;\n  width: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ButtonSymbols = {\n  play: <Emoji symbol=\"0x25B6\" style={{ paddingLeft: 3 }} />,\n  pause: <RotatedText size={23}>=</RotatedText>,\n}\n\nconst AnimateButton = ({ status = \"stopped\", onClick }) => {\n  const stateSymbols = {\n    stopped: ButtonSymbols.play,\n    playing: ButtonSymbols.pause,\n  }\n  return (\n    <StyledAnimateButton onClick={onClick}>\n      {stateSymbols[status]}\n    </StyledAnimateButton>\n  )\n}\n\nconst StyledAnimateSlider = styled.div`\n  display: flex;\n  align-content: center;\n`\n\nconst ImageAnimation = ({\n  images,\n  imageAlt = \"\",\n  info,\n  width,\n  delay = 150,\n  onChangeImage = (i) => console.log(i),\n  ImageWrapper = ({ children }) => <>{children}</>,\n}) => {\n  const [selectedIndex, setSelectedIndex] = useState(0)\n  const [animating, setAnimating] = useState(false)\n  const selectIndex = useCallback(\n    (index) => {\n      setSelectedIndex(index)\n      onChangeImage(index)\n    },\n    [setSelectedIndex, onChangeImage]\n  )\n  useEffect(() => {\n    if (animating) {\n      const nextIndex =\n        selectedIndex < images.length - 1 ? selectedIndex + 1 : 0\n      setTimeout(() => selectIndex(nextIndex), delay)\n    }\n  }, [animating, selectedIndex, selectIndex, images, delay])\n\n  return (\n    <Container style={{ width }}>\n      <PictureAndInformation>\n        <ImageWrapper index={selectedIndex}>\n          <Picture src={images[selectedIndex]} alt={imageAlt} />\n        </ImageWrapper>\n        <Information>{info}</Information>\n      </PictureAndInformation>\n      <Controls>\n        <StyledAnimateSlider>\n          <AnimateButton\n            selectedIndex={selectedIndex}\n            status={animating ? \"playing\" : \"stopped\"}\n            onClick={() => setAnimating(!animating)}\n          />\n          <input\n            type=\"range\"\n            min={0}\n            max={images.length - 1}\n            step={1}\n            value={selectedIndex}\n            style={{ outline: \"none\" }}\n            onInput={(e) => selectIndex(parseInt(e.target.value))}\n          />\n        </StyledAnimateSlider>\n      </Controls>\n      <Slides>\n        {images.map((x, i) => (\n          <Slide\n            key={`slide-${i}`}\n            src={x}\n            onMouseOver={() => {\n              if (!animating) selectIndex(i)\n            }}\n            selected={i === selectedIndex}\n          />\n        ))}\n      </Slides>\n    </Container>\n  )\n}\n\nexport default ImageAnimation\n","import { useState } from \"react\"\nimport styled, { keyframes } from \"styled-components\"\nimport TargetModelDiagram from \"./TargetModel\"\nimport { Emoji } from \"../game/Util\"\n\nconst fadeIn = keyframes`\n  from { opacity: 0; }\n  to { opacity: 1; }\n`\n\nconst Input = styled.div`\n  height: 100px;\n  width: 100px;\n  background-color: gray;\n  margin: 10px;\n  margin-left: 35px;\n  font-size: 1.2rem;\n  &::before {\n    content: \"x\\\\208${({ index }) => index}\";\n    position: relative;\n    left: -65%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: inherit;\n  }\n`\n\nconst Inputs = ({ count, images }) => {\n  const inputs = new Array(count).fill(0)\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n      }}\n    >\n      {inputs.map((_, i) => (\n        <Input\n          key={`input-${i + 1}`}\n          index={i + 1}\n          id={`input-${i + 1}`}\n          style={{\n            backgroundImage: images[i] ? `url(story-img/${images[i]})` : null,\n          }}\n        />\n      ))}\n    </div>\n  )\n}\n\nconst StyledOutputDiagram = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  animation: ${fadeIn} 0.1s linear;\n`\n\nconst Columns = {\n  0: {\n    middlex: 10,\n  },\n  1: {\n    middlex: 50,\n  },\n  2: {\n    middlex: 70,\n  },\n  3: {\n    middlex: 89,\n  },\n}\n\nconst columnStyle = (heightOffset) => ({\n  height: 10 + (heightOffset || 0),\n  rx: 1,\n  y: 40 - (heightOffset || 0),\n})\n\nconst OutputDiagramColumn = ({ height, fill, x, width }) => (\n  <rect fill={fill} style={columnStyle(height)} x={x} width={width} />\n)\n\nexport const OutputDiagram = ({\n  width = \"100%\",\n  height = \"100%\",\n  index,\n  selectedColumn = 2,\n}) => {\n  const ellipseStyle = {\n    stroke: \"rgb(63,108,175)\",\n    strokeWidth: 4,\n    fill: \"none\",\n  }\n  const columnHeight = (colIndex) =>\n    selectedColumn === colIndex ? (index - 1) * 5 : null\n\n  return (\n    <StyledOutputDiagram\n      style={{ width, height, position: \"absolute\" }}\n      id={`output-${index}`}\n    >\n      <svg viewBox={`0 0 99 99`}>\n        <OutputDiagramColumn\n          height={columnHeight(0)}\n          fill=\"rgb(176,0,4)\"\n          x={2}\n          width={17}\n        />\n        <rect fill=\"black\" x={21} y={44} height={2} width={2} />\n        <rect fill=\"black\" x={25} y={44} height={2} width={2} />\n        <rect fill=\"black\" x={29} y={44} height={2} width={2} />\n        <OutputDiagramColumn\n          height={columnHeight(1)}\n          fill=\"black\"\n          x={42}\n          width={16}\n        />\n        <OutputDiagramColumn\n          height={columnHeight(2)}\n          fill=\"rgb(255,226,129)\"\n          x={61}\n          width={17}\n        />\n        <OutputDiagramColumn\n          height={columnHeight(3)}\n          fill=\"rgb(130,201,63)\"\n          x={80}\n          width={17}\n        />\n        <ellipse\n          cx={Columns[selectedColumn].middlex}\n          cy=\"50\"\n          rx=\"15\"\n          ry=\"46\"\n          style={ellipseStyle}\n        />\n        <text\n          x={Columns[selectedColumn].middlex}\n          y=\"82\"\n          textAnchor=\"middle\"\n          style={{ font: \"24px arial\" }}\n        >\n          ?\n        </text>\n      </svg>\n    </StyledOutputDiagram>\n  )\n}\n\nexport const Output = styled.div`\n  position: relative;\n  height: 100px;\n  min-height: 100px;\n  margin-top: -25px;\n  padding: 0.25em;\n  width: 120px;\n  border: 3px solid #333;\n  background-color: white;\n  font-size: 1.3rem;\n  &::before {\n    position: relative;\n    left: -80%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: inherit;\n  }\n  &:nth-child(odd) {\n    left: 150px;\n    margin-left: 30px;\n  }\n  &:nth-child(even) {\n    left: 35px;\n  }\n`\n\nconst Outputs = ({ count }) => {\n  const inputs = new Array(count).fill(0)\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        maxHeight: 200,\n        paddingTop: 25,\n        justifyContent: \"space-evenly\",\n      }}\n    >\n      {inputs.map((_, i) => (\n        <Output index={i + 1} key={`output-${i + 1}`}>\n          <OutputDiagram index={i + 1} />\n        </Output>\n      ))}\n    </div>\n  )\n}\n\nconst ActionButton = styled.button`\n  background-color: rgb(63, 108, 175);\n  color: white;\n  border: none;\n  padding: 8px;\n  border-radius: 5px;\n  font-size: 16pt;\n  outline: none;\n  vertical-align: top;\n  height: 42px;\n  &:disabled {\n    pointer-events: none;\n    color: gray;\n  }\n  &:hover {\n    text-shadow: 1px 1px 1px black;\n  }\n  &:nth-child(odd) {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    border-right: 2px solid gray;\n  }\n  &:nth-child(even) {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n`\n\nconst Buttons = ({ onClick, actionDisabled }) => {\n  return (\n    <div style={{ textAlign: \"center\", marginBottom: 15 }}>\n      <ActionButton onClick={() => onClick(1)} disabled={actionDisabled}>\n        <Emoji symbol=\"0x203A\" /> Step Inversion\n      </ActionButton>\n      <ActionButton onClick={() => onClick()} title=\"Reset\">\n        <Emoji symbol=\"0x21BB\" />\n      </ActionButton>\n    </div>\n  )\n}\n\nconst InputOutput = ({ inputImages = [] }) => {\n  const [inputCount, setInputCount] = useState(0)\n  const updateInputCount = (delta) =>\n    setInputCount((prev) => {\n      if (delta === null || delta === undefined) setInputCount(1)\n      else {\n        const updated = prev + delta\n        setInputCount(Math.min(Math.max(1, updated), 4))\n      }\n    })\n\n  return (\n    <div style={{ marginBottom: 300 }}>\n      <Buttons onClick={updateInputCount} actionDisabled={inputCount === 4} />\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-around\",\n          alignItems: \"center\",\n          minWidth: 900,\n          maxWidth: \"90%\",\n        }}\n      >\n        <Inputs count={inputCount} images={inputImages} />\n        <TargetModelDiagram\n          style={{ width: 275 }}\n          id=\"target-model\"\n          additionalShapes={[\n            <circle\n              key=\"circled-output-shape\"\n              cx=\"100\"\n              cy=\"50\"\n              r=\"12\"\n              stroke=\"rgb(63,108,175)\"\n              strokeWidth={2}\n              fill=\"none\"\n            />,\n          ]}\n        />\n        <Outputs count={inputCount} />\n      </div>\n    </div>\n  )\n}\n\nexport default InputOutput\n","import { useState } from \"react\"\nimport ImageAnimation from \"../ImageAnimation\"\nimport Xarrow from \"react-xarrows\"\nimport TargetModelDiagram from \"./TargetModel\"\nimport { Output, OutputDiagram } from \"./InputOutput\"\nimport styled from \"styled-components\"\n\nconst lineProps = {\n  color: \"#FF4136\",\n  stroke: \"#FF4136\",\n  strokeWidth: 2,\n}\n\nconst StyledImageWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`\n\nconst ImageWrapper = ({ children, index }) => (\n  <StyledImageWrapper id=\"redp-image\">\n    <div\n      style={{\n        position: \"absolute\",\n        left: 10,\n        ...lineProps,\n      }}\n    >\n      x<sub>{index}</sub>\n    </div>\n    {children}\n  </StyledImageWrapper>\n)\n\nconst LineLabel = ({ index }) => (\n  <div style={{ marginTop: 12, ...lineProps }}>\n    (x<sub>{index}</sub>)\n  </div>\n)\n\nconst CircleArrowSourcePositions = {\n  \"3:0\": {\n    cx: 100,\n    cy: 10,\n    bottomness: -52,\n  },\n  \"3:4\": {\n    cx: 100,\n    cy: 50,\n    bottomness: -2,\n  },\n  \"3:5\": {\n    cx: 100,\n    cy: 70,\n    bottomness: 22,\n  },\n  \"3:6\": {\n    cx: 100,\n    cy: 90,\n    bottomness: 48,\n  },\n  default: {\n    cx: 100,\n    cy: 50,\n    bottomness: -2,\n  },\n}\n\nconst InputOutput = ({ index, onColumnIndexChanged }) => {\n  const onClickCircle = (e) => {\n    const [, x, y] = e.target.id.split(\"-\")\n    const key = `${x}:${y}`\n    setCircleArrowSource(key in CircleArrowSourcePositions ? key : \"default\")\n    const _y = parseInt(y)\n    const column = _y !== 0 ? _y - 3 : _y // Skip the small dots\n    setSelectedColumn(column)\n    if (onColumnIndexChanged) onColumnIndexChanged(column)\n  }\n  const [circleArrowSource, setCircleArrowSource] = useState(\"3:4\")\n  const [selectedColumn, setSelectedColumn] = useState(1)\n  const circleArrowSourceProps = () =>\n    CircleArrowSourcePositions[circleArrowSource] ||\n    CircleArrowSourcePositions.default\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        minWidth: 350,\n        marginTop: 15,\n      }}\n    >\n      <TargetModelDiagram\n        style={{ width: 175 }}\n        id=\"redp-target-model\"\n        onClickCircle={onClickCircle}\n        clickableCircles={[\"3:0\", \"3:4\", \"3:5\", \"3:6\"]}\n        additionalShapes={[\n          <circle\n            key=\"circled-output-shape\"\n            r=\"9\"\n            fill=\"none\"\n            {...circleArrowSourceProps()}\n            {...lineProps}\n          />,\n        ]}\n      />\n      <Output\n        id=\"redp-output\"\n        style={{ marginTop: -5, width: 100, marginRight: 10 }}\n      >\n        <OutputDiagram index={index} selectedColumn={selectedColumn} />\n      </Output>\n      <Xarrow\n        start=\"redp-image\"\n        end=\"redp-target-model\"\n        startAnchor={{ position: \"auto\", offset: { rightness: -25 } }}\n        {...lineProps}\n      />\n      <Xarrow\n        start=\"redp-target-model\"\n        end=\"redp-output\"\n        startAnchor={{\n          position: \"auto\",\n          offset: {\n            rightness: -37,\n            ...circleArrowSourceProps(),\n          },\n        }}\n        label={{\n          end: <LineLabel index={index} />,\n        }}\n        {...lineProps}\n      />\n    </div>\n  )\n}\n\nconst imageNumbers = [1, 16, 32, 64, 128, 256]\nconst toImageSet = (_class) =>\n  imageNumbers.map(\n    (x) =>\n      `story-img/match_game_cifar_robust_images_${_class}_threshold_${x}.png`\n  )\nconst imageSets = [\"deer\", \"plane\", \"horse\", \"boat\"].map(toImageSet)\n\nconst Component = (props) => {\n  const [selectedClass, setSelectedClass] = useState(1)\n  const [selectedImage, setSelectedImage] = useState(0)\n  return (\n    <ImageAnimation\n      images={imageSets[selectedClass]}\n      info={\n        <InputOutput\n          index={selectedImage}\n          onColumnIndexChanged={setSelectedClass}\n        />\n      }\n      ImageWrapper={ImageWrapper}\n      onChangeImage={setSelectedImage}\n      delay={300}\n      {...props}\n    />\n  )\n}\n\nexport default Component\n","import { useState, useEffect } from \"react\"\nimport { chain } from \"../../util/misc\"\nimport styled from \"styled-components\"\nimport Xarrow from \"react-xarrows\"\n// import { usePrevious } from \"../../hooks\"\n\nconst RowFlexContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: ${({ valign = \"center\" }) => valign};\n`\n\nconst defaultLinkConfig = {\n  size: 4,\n  head: 3,\n  color: \"coral\",\n}\n\nconst FlowCharts = {\n  validate: (elements) => {\n    const issues = []\n    elements.forEach((x) => {\n      if (!x.id && !x.props.id)\n        issues.push(`FlowChart element [${x.type}] is missing id`)\n    })\n    return issues\n  },\n  hasPosition: (x) =>\n    x.style &&\n    (\"top\" in x.style ||\n      \"bottom\" in x.style ||\n      \"left\" in x.style ||\n      \"right\" in x.style),\n  hasPositionedElements: (elements) =>\n    elements.reduce((all, x) => all || FlowCharts.hasPosition(x), false),\n  hasUserDefinedLinks: (elements) =>\n    elements.reduce((all, x) => all || \"links\" in x, false),\n  buildLinks: (elements) => {\n    const userDefined = FlowCharts.hasUserDefinedLinks(elements)\n    if (userDefined) {\n      return elements\n        .map((x) =>\n          (Object.keys(x.links || {}) || []).map((l) => ({\n            from: x.id,\n            to: l,\n            config: { ...defaultLinkConfig, ...x.links[l] },\n          }))\n        )\n        .flat()\n    } else {\n      // Build links from element to element in order given\n      return elements.reduce((all, x, i) => {\n        if (i === elements.length - 1) return all\n        return [\n          ...all,\n          {\n            from: x.props.id,\n            to: elements[i + 1].props.id,\n            config: defaultLinkConfig,\n          },\n        ]\n      }, [])\n    }\n  },\n}\n\nconst StyledFlowChartElement = styled.div`\n  display: flex;\n  justify-content: space-around;\n  & * {\n    display: block;\n  }\n`\n\nconst FlowChart = ({\n  name,\n  elements,\n  size,\n  style,\n  startAnimating,\n  visible,\n  chainLinkAnimation,\n  betweenLinkDelay = 0,\n}) => {\n  const shouldAnimate = visible && startAnimating\n  const [links, setLinks] = useState([])\n  const issues = FlowCharts.validate(elements)\n  if (issues.length) {\n    console.error(issues.join(\"\\n\"))\n  }\n\n  const linkId = (x) => `${x.from}-${x.to}`\n  useEffect(() => {\n    if (shouldAnimate) {\n      if (chainLinkAnimation) {\n        setLinks((prev) => [])\n        const fns = FlowCharts.buildLinks(elements).map((x) => () =>\n          setLinks((prev) =>\n            prev.find((l) => linkId(l) === linkId(x)) ? prev : [...prev, x]\n          )\n        )\n        chain(fns, betweenLinkDelay)\n      } else {\n        setLinks(FlowCharts.buildLinks(elements))\n      }\n    } else if (!visible) {\n      setLinks([])\n    }\n  }, [\n    setLinks,\n    elements,\n    shouldAnimate,\n    visible,\n    betweenLinkDelay,\n    chainLinkAnimation,\n  ])\n\n  const containerStyle = FlowCharts.hasPositionedElements(elements)\n    ? { position: \"relative\", ...size }\n    : {\n        display: \"flex\",\n        justifyContent: \"space-evenly\",\n        alignItems: \"center\",\n        flex: 1,\n      }\n\n  const elementStyle = (x) =>\n    FlowCharts.hasPosition(x) ? { position: \"absolute\", ...x.style } : null\n\n  return (\n    <RowFlexContainer style={style}>\n      <div style={containerStyle}>\n        {elements.map((x, i) => (\n          <StyledFlowChartElement\n            key={`${name}-${i}`}\n            id={x.id}\n            style={elementStyle(x)}\n          >\n            {x.element ? x.element : x}\n          </StyledFlowChartElement>\n        ))}\n        {links.map((x) => {\n          return (\n            <Xarrow\n              key={`${name}-line-${x.from}-${x.to}`}\n              start={`${x.from}`}\n              end={`${x.to}`}\n              color={x.config.color}\n              path={x.config.path}\n              strokeWidth={x.config.size}\n              startAnchor={x.config.startSocket}\n              endAnchor={x.config.endSocket}\n              headSize={x.config.head}\n              animateDrawing={shouldAnimate ? \"0.5s\" : false}\n            />\n          )\n        })}\n      </div>\n    </RowFlexContainer>\n  )\n}\n\nexport default FlowChart\n","import styled from \"styled-components\"\nimport FlowChart from \"./FlowChart\"\nimport TargetModelDiagram from \"./TargetModel\"\n\nconst ImageTitle = styled.h4`\n  text-align: center;\n  margin: 0 0 5px 0;\n`\n\nconst TitledElement = ({\n  title,\n  children,\n  bottom = false,\n  bordered = false,\n  style,\n}) => (\n  <div\n    style={{\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      backgroundColor: bordered ? \"white\" : null,\n      padding: bordered ? 4 : null,\n      border: bordered ? \"1px solid lightgray\" : null,\n      ...style,\n    }}\n  >\n    {title && !bottom ? <ImageTitle>{title}</ImageTitle> : null}\n    {children}\n    {title && bottom ? <ImageTitle>{title}</ImageTitle> : null}\n  </div>\n)\n\nconst MiaFlowChart = ({ status, style }) => (\n  <FlowChart\n    name=\"mia-layout\"\n    size={{ height: 325, width: 500 }}\n    style={style}\n    elements={[\n      {\n        id: \"mia-flow-horse\",\n        element: (\n          <TitledElement>\n            <img src=\"story-img/horse.png\" alt=\"\" />\n          </TitledElement>\n        ),\n        style: { top: 140 },\n        links: {\n          \"mia-flow-target-model\": {\n            startSocket: \"top\",\n            endSocket: \"left\",\n            size: 10,\n            color: \"midnightblue\",\n            endLabel: \"Classify\",\n            path: \"grid\",\n          },\n        },\n      },\n      {\n        id: \"mia-flow-target-model\",\n        element: (\n          <TitledElement\n            title=\"Target Model\"\n            style={{ marginTop: 25 }}\n            bordered={true}\n          >\n            <TargetModelDiagram style={{ width: 130 }} model=\"MIA\" />\n          </TitledElement>\n        ),\n        style: { left: 150, top: 10 },\n        links: {\n          \"mia-flow-bar-chart\": {\n            path: \"straight\",\n            color: \"black\",\n          },\n        },\n      },\n      {\n        id: \"mia-flow-bar-chart\",\n        element: (\n          <TitledElement title=\"Yes or No?\" bottom>\n            <img src=\"story-img/bar-chart.png\" alt=\"\" />\n          </TitledElement>\n        ),\n        style: { right: 0, top: 1 },\n      },\n      {\n        id: \"mia-flow-compliance-officer\",\n        element: (\n          <TitledElement title=\"Compliance Officer\" bottom bordered={true}>\n            <img src=\"story-img/compliance-officer.png\" alt=\"\" />\n          </TitledElement>\n        ),\n        style: { left: 150, bottom: 0 },\n        links: {\n          \"mia-flow-horse\": {\n            startSocket: \"left\",\n            endSocket: \"bottom\",\n            size: 10,\n            color: \"midnightblue\",\n            path: \"grid\",\n          },\n          \"mia-flow-bar-chart\": {\n            startSocket: \"right\",\n            endSocket: \"bottom\",\n            size: 10,\n            color: \"midnightblue\",\n            path: \"grid\",\n          },\n        },\n      },\n    ]}\n    visible={status?.visible}\n    startAnimating={status?.visible}\n  />\n)\n\nexport default MiaFlowChart\n","import { useState, useMemo } from \"react\"\nimport styled from \"styled-components\"\nimport { randomItem } from \"../util/misc\"\n\nconst Colors = {\n  lightsteelblue: \"black\",\n  cornflowerblue: \"white\",\n  khaki: \"black\",\n  lightsalmon: \"black\",\n}\n\nconst styleColors = (key) => ({\n  backgroundColor: key,\n  color: Colors[key],\n})\n\nconst StyledText = styled.span`\n  cursor: ${({ expanded }) => (expanded ? \"w-resize\" : \"ew-resize\")};\n  border: ${({ expanded }) =>\n    expanded ? \"1px solid rgba(0,0,0,0)\" : \"1px solid gray\"};\n  border-radius: ${({ expanded }) => (expanded ? \"1px solid gray\" : \"2px\")};\n  color: gray;\n  background-color: lightgray;\n  padding: 0 2px;\n`\n\nconst StretchText = ({ text, style, children, nested = true }) => {\n  const [expanded, setExpanded] = useState(false)\n  const colorKey = useMemo(() => randomItem(Object.keys(Colors)), [])\n  const _style = { ...styleColors(colorKey), ...style }\n  return (\n    <>\n      {nested ? \" \" : null}\n      <StyledText\n        expanded={expanded}\n        style={_style}\n        onClick={() => setExpanded(!expanded)}\n      >\n        {expanded ? children : text}\n      </StyledText>\n      {nested ? \" \" : null}\n    </>\n  )\n}\n\nexport default StretchText\n","import { useState, useEffect } from \"react\"\nimport { Scrollama, Step } from \"react-scrollama\"\nimport ImageDiff from \"react-image-diff\"\nimport styled from \"styled-components\"\nimport ExperimentLabelOnlyCharts from \"./chart/ExperimentLabelOnlyCharts\"\nimport ImageNoise from \"./ImageNoise\"\nimport ImageClasses from \"./story/ImageClasses\"\nimport TargetModelDiagram from \"./story/TargetModel\"\nimport ReverseEngineeringDataPrototypesDiagram from \"./story/ReverseEngineeringDataPrototypesDiagram\"\nimport { Centered } from \"./game/Util\"\nimport FlowChart from \"./story/FlowChart\"\nimport MiaFlowChart from \"./story/MiaFlowChart\"\nimport StretchText from \"./StretchText\"\n\nconst ScrollerContainer = styled.div`\n  padding: 0 0 10vh;\n  display: flex;\n  justify-content: space-around;\n`\nconst Scroller = styled.div`\n  flex-basis: 100%;\n  max-width: 1100px;\n`\nconst ScrollContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n`\nconst ScrollyHeaderSection = styled.h1`\n  text-align: ${({ align = \"center\" }) => align};\n`\nconst ScrollyContentSection = styled.div`\n  margin-right: 15px;\n`\nconst ScrollyStickySection = styled.div`\n  margin-right: 15px;\n  position: sticky;\n  top: 125px;\n  height: 50%;\n`\n\nconst Footer = styled.div`\n  background-image: url(img/nga-watermark.png);\n  background-repeat: no-repeat;\n  background-position: center center;\n  width: 100%;\n  height: 50px;\n  background-color: white;\n`\n\nconst ScrollySectionWithBackgroundImage = ({\n  width = \"50%\",\n  minWidth = 700,\n  img,\n  title,\n  children,\n  status,\n  sizePercent = 60,\n  imageOpacity = 0.2,\n}) => {\n  const imageWidth =\n    status && status.progress\n      ? sizePercent + status.progress * (100 - sizePercent)\n      : sizePercent\n  return (\n    <Centered>\n      <div\n        style={{\n          width,\n          minWidth,\n          height: 400,\n          position: \"relative\",\n        }}\n      >\n        <img\n          src={`story-img/${img}`}\n          alt=\"\"\n          style={{\n            position: \"absolute\",\n            width: `${imageWidth}%`,\n            height: \"auto\",\n            opacity: imageOpacity,\n            top: \"50%\",\n            left: \"50%\",\n            transform: \" translate(-50%, -50%)\",\n          }}\n        />\n        <div\n          style={{\n            position: \"absolute\",\n            width: \"100%\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \" translate(-50%, -50%)\",\n          }}\n        >\n          <ScrollyHeaderSection>{title}</ScrollyHeaderSection>\n          <ScrollContainer>\n            <ScrollyContentSection style={{}}>{children}</ScrollyContentSection>\n          </ScrollContainer>\n        </div>\n      </div>\n    </Centered>\n  )\n}\n\nconst RowFlexContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: ${({ valign = \"center\" }) => valign};\n`\n\nconst WeaknessWithAI = ({ status }) => {\n  return (\n    <div style={stepOpacityStyle(status)}>\n      <ScrollySectionWithBackgroundImage\n        title=\"The Weakness with AI\"\n        img=\"weakness.png\"\n        width=\"50%\"\n        status={status}\n      >\n        <p>\n          The ability of deep neural network (DNN) machine learning (ML) models\n          to achieve human or above-human task performance is a result of the\n          availability of vast amounts of data. As organizations dedicate\n          expensive resources to data acquisition, processing, labeling and\n          storage and training of DNNs, the data must be treated as sensitive\n          proprietary information. These facts are often expressed as data is\n          the new oil and data is the new source code, respectively.\n        </p>\n        <p>\n          However, recent demonstrations have shown how DNN characteristics and\n          behaviors can be leveraged by malicious actors to make the DNN reveal,\n          learn, or do the wrong thing. To see how DNNs can be exploited, we\n          will first set the stage with an example of a successful machine\n          learning application within the field of computer vision.\n        </p>\n      </ScrollySectionWithBackgroundImage>\n    </div>\n  )\n}\n\nconst LabelTile = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 10px solid #0074d9;\n  font-size: 1.2em;\n  background-color: white;\n  padding: 30px;\n`\n\nconst PuppiesToFoodFlowChart = ({ status }) => (\n  <FlowChart\n    name=\"puppies-or-food-flow\"\n    elements={[\n      <img src=\"story-img/puppy.png\" id=\"puppies-or-food-1\" alt=\"\" />,\n      <TargetModelDiagram\n        style={{ width: 180 }}\n        model=\"PuppiesToFood\"\n        id=\"puppies-or-food-2\"\n      />,\n      <LabelTile id=\"puppies-or-food-3\">food</LabelTile>,\n    ]}\n    visible={status?.visible}\n    startAnimating={status?.visible}\n    // chainLinkAnimation={true}\n    // betweenLinkDelay={1000}\n  />\n)\n\nconst PuppiesVsCroissantsImages = (/*{ status }*/) => (\n  <RowFlexContainer valign=\"start\">\n    <ImageDiff\n      before=\"story-img/2puppies.png\"\n      after=\"story-img/2croissants.png\"\n      type=\"swipe\"\n      value={0.5}\n      slider\n      // animation={\n      //   status && status.visible && status.progress > 0.5\n      //     ? { end: 0, step: -0.02 }\n      //     : null\n      // }\n      // animation\n    />\n    <ImageDiff\n      before=\"story-img/2puppies.png\"\n      after=\"story-img/2croissants.png\"\n      type=\"fade\"\n      slider\n    />\n    {/* <ImageDiff\n      before=\"story-img/2puppies.png\"\n      after=\"story-img/2croissants.png\"\n      type=\"difference\"\n    /> */}\n  </RowFlexContainer>\n)\n\nconst VerticalSpacer = ({ height }) => (\n  <div style={{ width: \"100%\", height: `${height}px` }}></div>\n)\n\nconst PuppiesOrFoodImage = ({ cover }) => {\n  const backgroundColor = \"rgba(0,0,0,.7)\"\n  const Covers = {\n    securityPrivacyConcerns: {\n      backgroundColor,\n      clipPath: \"polygon(0% 33%, 50% 33%, 50% 0%, 100% 0%, 100% 100%, 0% 100%)\",\n    },\n    hoverShape: {\n      backgroundColor,\n      clipPath: \"polygon(0% 33%, 100% 33%, 100% 100%, 0% 100%)\",\n    },\n    hoverTexture: {\n      backgroundColor,\n      clipPath:\n        \"polygon(0% 0%, 100% 0%, 100% 33%, 0% 33%, 0% 66%, 100% 66%, 100% 100%, 0% 100%)\",\n    },\n    hoverColor: {\n      backgroundColor,\n      clipPath: \"polygon(0% 66%, 0% 0%, 100% 0%, 100% 66%)\",\n    },\n  }\n  return (\n    <div style={{ width: \"100%\", position: \"relative\" }}>\n      <img\n        src={`story-img/puppies-or-food.png`}\n        style={{\n          height: \"auto\",\n          width: \"100%\",\n        }}\n        alt=\"\"\n      />\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          width: \"100%\",\n          height: \"100%\",\n          transition: \"opacity 0.1s linear\",\n          opacity: cover ? 1 : 0,\n          ...(Covers[cover] || {}),\n        }}\n      />\n    </div>\n  )\n}\n\nconst stepOpacityStyle = (status) => {\n  const _default = { opacity: \"1\", transition: \"opacity 0.1s linear\" }\n  return status && status.visible ? _default : { ..._default, opacity: \"0.1\" }\n}\n\nconst StyledHoverLink = styled.button`\n  cursor: pointer;\n  background-color: gold;\n  color: #444;\n  border: none;\n  font-weight: bold;\n  border-radius: 4px;\n  padding: 0 3px;\n  margin-left: 2px;\n  &:hover {\n    color: #000;\n  }\n`\n\nconst HoverLink = ({ children, onHover, offHover }) => (\n  <StyledHoverLink onMouseEnter={onHover} onMouseLeave={offHover}>\n    {children}\n  </StyledHoverLink>\n)\n\nconst PuppiesOrFoodHoverLink = ({ children, cover, setCover }) => (\n  <HoverLink onHover={() => setCover(cover)} offHover={() => setCover(\"\")}>\n    {children}\n  </HoverLink>\n)\n\nconst StepContainer = styled.div`\n  margin-bottom: 100px;\n`\n\nconst PuppiesOrFoodStepContainer = styled(StepContainer)`\n  /* opacity: ${({ currentView, viewName }) =>\n    currentView && currentView.data === viewName ? \"1\" : \"0.3\"}; */\n  padding-bottom: 400px;\n  margin-bottom: 100px;\n`\n\nconst PuppiesOrFood = ({ status }) => {\n  const [currentView, setCurrentView] = useState()\n  const [cover, setCover] = useState()\n  useEffect(() => {\n    setCover(\n      currentView && currentView.data === \"4\" ? \"securityPrivacyConcerns\" : \"\"\n    )\n  }, [currentView])\n  return (\n    <div style={stepOpacityStyle(status)}>\n      <ScrollContainer>\n        <ScrollyContentSection style={{ flexBasis: \"50%\" }}>\n          <Scrollama\n            onStepEnter={setCurrentView}\n            onStepExit={() => setCurrentView(null)}\n            offset={0.4}\n          >\n            <Step data=\"1\">\n              <PuppiesOrFoodStepContainer\n                viewName=\"1\"\n                currentView={currentView}\n              >\n                <h2>Classification: Still a Tough Problem </h2>\n                <p>\n                  Undoubtedly, one of the most successful applications of\n                  artificial intelligence is in computer vision. Here, the task\n                  is to\n                  <StretchText text=\"perform classification,\">\n                    assign a known class label to new examples,\n                  </StretchText>\n                  which requires the use of DNN machine learning algorithms\n                  trained on labeled data. On the right, there are a number of\n                  images, some of which are puppies, and some of which are food.\n                  Modern day machine learning models can perform this\n                  classification task so well that it is easy to think that this\n                  is a solved problem (hint: it is not!).\n                </p>\n              </PuppiesOrFoodStepContainer>\n            </Step>\n            <Step data=\"2\">\n              <PuppiesOrFoodStepContainer\n                viewName=\"2\"\n                currentView={currentView}\n              >\n                <p>\n                  These specific images were collated by Karen Zack, under the\n                  Twitter handle of{\" \"}\n                  <a\n                    href=\"https://twitter.com/teenybiscuit\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    @teenybiscuit\n                  </a>\n                  . It is interesting that you may not be able to classify each\n                  image with the same level of ease or confidence. This is true\n                  for DNNs as well, epsecially with images with feautures they\n                  have not seen before. If you take these images and pass them\n                  through modern deep neural networks to see how they perform,\n                  dont be surprised to learn that some of them may also get\n                  confused.\n                </p>\n                <PuppiesToFoodFlowChart status={status} />\n              </PuppiesOrFoodStepContainer>\n            </Step>\n            <Step data=\"3\">\n              <PuppiesOrFoodStepContainer\n                viewName=\"3\"\n                currentView={currentView}\n              >\n                <h2>Interpretability: Tough to Explain What is Learned</h2>\n                <p>\n                  These images indicate that DNNs may learn how to identify\n                  objects in ways similar to human vision, for instance,\n                  <PuppiesOrFoodHoverLink\n                    cover=\"hoverShape\"\n                    setCover={setCover}\n                  >\n                    shape\n                  </PuppiesOrFoodHoverLink>\n                  ,\n                  <PuppiesOrFoodHoverLink\n                    cover=\"hoverTexture\"\n                    setCover={setCover}\n                  >\n                    texture\n                  </PuppiesOrFoodHoverLink>\n                  , or\n                  <PuppiesOrFoodHoverLink\n                    cover=\"hoverColor\"\n                    setCover={setCover}\n                  >\n                    color\n                  </PuppiesOrFoodHoverLink>\n                  . However, within the field there is not a common\n                  understanding of what these models are learning.\n                </p>\n                {/* <VerticalSpacer height={600} /> */}\n              </PuppiesOrFoodStepContainer>\n            </Step>\n            <Step data=\"4\">\n              <PuppiesOrFoodStepContainer\n                viewName=\"4\"\n                currentView={currentView}\n              >\n                <h2>Security & Privacy Concerns</h2>\n                <p>\n                  Beyond their inherent fun and quality of fooling modern day\n                  models, there are a few other lessons that these images\n                  highlight. First, you should be aware that for any model,\n                  similar examples can always be found  ones that make a model\n                  do the wrong thing despite our attempts to make them extremely\n                  accurate. This means that it is likely that our application\n                  can be intentionally circumvented by those using it, with\n                  possibly unexpected things occurring.\n                  <b> This presents a security vulnerability. </b>\n                </p>\n                <p>\n                  We can try to avoid this vulnerability while also increasing\n                  the accuracy by training with examples such as these two:\n                </p>\n                <PuppiesVsCroissantsImages status={status} />\n                <p>\n                  While learning, the model must extract more information about\n                  these two images in order to correctly differentiate between\n                  them. Often, the model learns characteristics of these\n                  specific images, storing what we would consider sensitive\n                  information. When this occurs, the model may exhibit different\n                  output behavior for those images. This indicates that the DNN\n                  is leaking information about specific images, revealing the\n                  wrong thing.\n                  <b> This presents a privacy vulnerability. </b>\n                </p>\n                {/* <VerticalSpacer height={600} /> */}\n              </PuppiesOrFoodStepContainer>\n            </Step>\n            <Step data=\"5\">\n              <PuppiesOrFoodStepContainer\n                viewName=\"5\"\n                currentView={currentView}\n              >\n                <h2>ML is inherently fragile with unstable behavior</h2>\n                <p>\n                  All of these observations point out a key characteristic of\n                  modern day deep neural networks  they are inherently fragile\n                  and will exhibit unstable behavior. This cannot be avoided and\n                  must be considered when building and deploying applications.\n                </p>\n              </PuppiesOrFoodStepContainer>\n            </Step>\n          </Scrollama>\n        </ScrollyContentSection>\n        <ScrollyStickySection style={{ flexBasis: \"48%\" }}>\n          <ScrollyHeaderSection>Puppies or Food?</ScrollyHeaderSection>\n          <PuppiesOrFoodImage status={status} cover={cover} />\n        </ScrollyStickySection>\n      </ScrollContainer>\n    </div>\n  )\n}\n\nconst MembershipInferenceAttack = ({ status }) => (\n  <div style={stepOpacityStyle(status)}>\n    <ScrollContainer>\n      <ScrollyStickySection style={{ flexBasis: \"60%\" }}>\n        <ScrollyHeaderSection>\n          Membership Inference Attack (MIA)\n        </ScrollyHeaderSection>\n        <MiaFlowChart status={status} />\n      </ScrollyStickySection>\n      <ScrollyContentSection style={{ flexBasis: \"40%\" }}>\n        <p>\n          In the membership inference attack, we want to answer the question of\n          whether a specific piece of data was in the training data set for the\n          machine learning model. Here, one does not necessarily need to have\n          access to the original data set, though we have the ability to query\n          the model with input data and obtain the outputs.\n        </p>\n        <p>\n          There are several operational scenarios in which we need to answer\n          this question. First, we may have a deployed model that has been\n          supporting an application for some time. If the data point was used to\n          train that model, it could make the model noncompliant and we would\n          have to terminate its use. Furthermore, any actions previously taken\n          or data previously collected based upon the model could also be\n          noncompliant. Right now, legal precedence says to throw out the model\n          and any evidence that may have been collected with it.\n        </p>\n        <p>\n          Second, you may have a trained a model using a small amount of data\n          that was collected with NTM and as such, it has a higher\n          classification given its relationship to TTP, sources and methods. If\n          you do not own the data, others will certainly have access to the same\n          data as well. Even if you do own the data, others may be able to\n          generate similar data using related techniques. For example, 2nd and\n          3rd partners with access to the model. If sensitive data can be\n          readily identified from the model output, it puts NTM at risk.\n        </p>\n      </ScrollyContentSection>\n    </ScrollContainer>\n    <VerticalSpacer height={300} />\n  </div>\n)\n\nconst ModelInversionAttack = ({ status }) => (\n  <div style={stepOpacityStyle(status)}>\n    <ScrollyHeaderSection align=\"left\">\n      Model Inversion Attack\n    </ScrollyHeaderSection>\n    <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n      <img src=\"story-img/Shallow.png\" id=\"shallow\" alt=\"\" />\n      <div style={{ margin: \"0 30px\" }}>\n        There is no consensus in the machine learning community about what data\n        features DNNs learn while training, which makes it tough to interpret\n        them. However, the work Zeiler and Fergus in the field of visual\n        interpretations of DNNs is a useful starting point. Their method\n        transposes DNNs to find which image patches are responsible for\n        certain neural activations. With the associated results, they argued the\n        shallow layers identify rough features such as edges and colors in the\n        training data set and the deeper layers combine these features into\n        higher level shapes and object abstractions.\n      </div>\n      <img src=\"story-img/Deep.png\" id=\"deep\" alt=\"\" />\n    </div>\n    <VerticalSpacer height={300} />\n    <p>\n      Here are some class prototypes from the Zeieler and Fergus paper. These\n      images are not real and would never be found in any data set that was\n      generated via imagery collection. However, can you understand what the DNN\n      is looking for in each output class?\n    </p>\n    <ImageClasses />\n    {/* <img src=\"story-img/ClassPrototypes.png\" id=\"class prototypes\" alt=\"\" /> */}\n    <VerticalSpacer height={300} />\n  </div>\n)\n\nconst TwentyQuestions = ({ status }) => (\n  <div style={stepOpacityStyle(status)}>\n    <ScrollContainer>\n      <ScrollyContentSection style={{ flexBasis: \"55%\" }}>\n        <p>\n          If DNNs did not leak any information about it's training set, there\n          would be no way to answer this question better than randomly guessing\n          'yes' or 'no'.\n        </p>\n        <p>\n          Thus, perhaps the easiest strategy for an attacker is to predict 'no'\n          everytime the model gets the class prediction wrong. This strategy is\n          based upon the notion that since the DNN is good at this task, if it\n          gets the prediction wrong, then most likely it has not seen the image\n          before.\n        </p>\n        <p>\n          This is problematic for models that are severely overfit, where there\n          is a large gap between the accuracy of training images and new images.\n          As such, this is known as the <b> 'Gap Attack' </b> and it will have\n          results better than random guessing by an amount related to the size\n          of the gap.\n        </p>\n        <p>\n          However, even for models that are not overfit and only output the\n          predicted label, there is a way to perform a successful membership\n          attack. This is known as the <b>'Label-Only Attack'</b> since it can\n          be performed even when the model's output is nothing more than the\n          class label. By adding noise to the input, it is possible to trick the\n          model into a wrong classification. To see this, add noise to the\n          images on the right and observe how the lable changes. One image was\n          in the training data set and the other was not. Can you determine\n          which is which?\n        </p>\n      </ScrollyContentSection>\n      <ScrollyStickySection style={{ flexBasis: \"45%\" }}>\n        <ScrollyHeaderSection>A game of 20 Questions...</ScrollyHeaderSection>\n        <ImageNoise />\n      </ScrollyStickySection>\n    </ScrollContainer>\n    <VerticalSpacer height={300} />\n  </div>\n)\n\nconst ReverseEngineeringDataPrototypes = ({ status }) => (\n  <div style={stepOpacityStyle(status)}>\n    <ScrollContainer>\n      <ScrollyStickySection style={{ flexBasis: \"50%\" }}>\n        <ScrollyHeaderSection>\n          Reverse Engineering Data Prototypes\n        </ScrollyHeaderSection>\n        <ReverseEngineeringDataPrototypesDiagram />\n      </ScrollyStickySection>\n      <ScrollyContentSection style={{ flexBasis: \"45%\" }}>\n        <p>\n          In the model inversion attack, the output nodes of a DNN are used to\n          reconstruct a prototype representation of each class, similar to the\n          technique used by Zeiler and Fergus. The optimization process used to\n          accomplish this is akin to how one trains a DNN. In the case of image\n          classification, a DNN is a function, f, that maps input images to a\n          probability vector.\n        </p>\n        <p>\n          Model inversion seeks to find an image such that the output\n          probability for that class is maximized, while the other possible\n          outputs are minimized. The reconstructed representations of the\n          training data leak information about sensitive data collection tools\n          techniques and tradecraft. For computer vision models, inversion can\n          produce image representations for every class label in the model. The\n          interactive figure demonstrates actual images formed during an\n          inversion of the deer class.\n        </p>\n        <p>\n          Here, the image inversion is randomly initialized and a new image is\n          saved at each stage. In the early stages of inversion optimization,\n          these images typically remain gray and not visually interpretable and\n          thus we refer to these generated images \"gray data\". However, as the\n          inversion process continues, these images can have significant\n          elements that are human interpretable.\n        </p>\n        <p>\n          These class prototypes are images represent the extracted features\n          that allow the network to best differentiate amongst the classes.\n          However, model inversion can be performed against models trained on\n          other data types.\n        </p>\n      </ScrollyContentSection>\n    </ScrollContainer>\n  </div>\n)\n\nconst LabelOnlyAttackThreshold = ({ status }) => (\n  <div style={stepOpacityStyle(status)}>\n    <ScrollyHeaderSection align=\"left\">\n      Label-Only Attack Success Threshold\n    </ScrollyHeaderSection>\n    <ScrollContainer>\n      <ScrollyContentSection style={{ flexBasis: \"60%\" }}>\n        <ExperimentLabelOnlyCharts\n          nodeSize={13}\n          defaultNoise={0}\n          bottomLabel=\"Distance\"\n          sliderLabel=\"Noise\"\n        />\n      </ScrollyContentSection>\n      <ScrollyContentSection style={{ flexBasis: \"38%\" }}>\n        <p>\n          Eventually every image will be misclassified by adding enough noise.\n          For images that the model has been trained on, the amount of noise\n          needed to fool the model is typically higher. In other words, for\n          images not in the training, it is easier to obtain an incorrect label.\n          By using your own data, you can calibrate to a noise level that will\n          give optimal attack results. This can be used in the attack of other\n          target models, giving you strong confidence about whether the image\n          was used in the training or not.\n        </p>\n        <p>\n          On the chart to the left, the accuracy is plotted for equally sized\n          training and test data sets. Under no noise, the model perfeclty\n          predicts the labels of each set. As the noise increases, the labels of\n          the test set can be seen to be predicted incorrectly, leading to a\n          successful attack.\n        </p>\n      </ScrollyContentSection>\n    </ScrollContainer>\n    <VerticalSpacer height={300} />\n  </div>\n)\n\nconst DebuggerTitle = styled.div`\n  width: 45px;\n  display: inline-block;\n  font-weight: bold;\n  margin-right: 15px;\n`\n\nconst Debugger = ({ viewState, hide }) => {\n  if (hide) return null\n  const progressPercent = (x) => (x ? (x * 100).toFixed() : 0)\n  return (\n    <div\n      style={{\n        position: \"fixed\",\n        top: 50,\n        left: 50,\n        zIndex: 999999999999,\n        padding: 5,\n        border: \"1px solid black\",\n        backgroundColor: \"pink\",\n      }}\n    >\n      <div>\n        <DebuggerTitle>View:</DebuggerTitle>\n        {viewState.currentView || \"None\"}\n        <br />\n        <DebuggerTitle>Scroll:</DebuggerTitle>\n        {progressPercent(\n          (viewState[viewState.currentView] || { progress: \"\" }).progress\n        )}\n        %\n      </div>\n    </div>\n  )\n}\n\nconst Story = ({ debugScrolling = false }) => {\n  const [currentViewState, setCurrentViewState] = useState({})\n  const [viewState, setViewState] = useState({})\n\n  const onStepEnter = ({ data }) =>\n    setCurrentViewState({ view: data, visible: true })\n\n  const onStepExit = ({ data }) =>\n    setCurrentViewState({ view: data, visible: false })\n\n  const onStepProgress = ({ data, progress }) =>\n    setCurrentViewState({ view: data, visible: true, progress })\n\n  useEffect(\n    () =>\n      currentViewState.view\n        ? setViewState({\n            ...viewState,\n            [currentViewState.view]: {\n              ...viewState[currentViewState.view],\n              ...currentViewState,\n            },\n            currentView: currentViewState.view,\n          })\n        : null, // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentViewState]\n  )\n\n  return (\n    <>\n      <ScrollerContainer>\n        <Scroller>\n          <Scrollama\n            onStepEnter={onStepEnter}\n            onStepExit={onStepExit}\n            progress\n            onStepProgress={onStepProgress}\n            offset={0.4}\n            debug={debugScrolling}\n          >\n            <Step data=\"weakness\">\n              <StepContainer>\n                <WeaknessWithAI status={viewState[\"weakness\"]} />\n              </StepContainer>\n            </Step>\n            <Step data=\"puppies-or-food\">\n              <StepContainer>\n                <PuppiesOrFood status={viewState[\"puppies-or-food\"]} />\n              </StepContainer>\n            </Step>\n            <Step data=\"mia\">\n              <StepContainer>\n                <MembershipInferenceAttack status={viewState[\"mia\"]} />\n              </StepContainer>\n            </Step>\n            <Step data=\"20q\">\n              <StepContainer>\n                <TwentyQuestions status={viewState[\"20q\"]} />\n              </StepContainer>\n            </Step>\n            <Step data=\"label-only-attack\">\n              <StepContainer>\n                <LabelOnlyAttackThreshold\n                  status={viewState[\"label-only-attack\"]}\n                />\n              </StepContainer>\n            </Step>\n            <Step data=\"model-inversion-attack\">\n              <StepContainer>\n                <ModelInversionAttack\n                  status={viewState[\"model-inversion-attack\"]}\n                />\n              </StepContainer>\n            </Step>\n            <Step data=\"reverse-engineering-data-prototypes\">\n              <StepContainer>\n                <ReverseEngineeringDataPrototypes\n                  status={viewState[\"reverse-engineering-data-prototypes\"]}\n                />\n              </StepContainer>\n            </Step>\n          </Scrollama>\n        </Scroller>\n        <Debugger hide={!debugScrolling} viewState={viewState} />\n      </ScrollerContainer>\n      <Footer />\n    </>\n  )\n}\n\nexport default Story\n","import { useState, createContext } from \"react\"\n\nexport const PickContext = createContext()\n\nexport const PickContextProvider = (props) => {\n  const [configurations, setConfigurations] = useState({\n    selections: { current: 0, 0: {} },\n  })\n\n  return (\n    <PickContext.Provider value={[configurations, setConfigurations]}>\n      {props.children}\n    </PickContext.Provider>\n  )\n}\n","const questions = {\n  start: {\n    text: \"After the previous days events, it had been a brief night of sleep before the Watch Office called you back into NCE. Your hot coffee offers a little solace as you badge in and rush upstairs ...\",\n    image: \"pick-img/nce-night.png\",\n    content: {\n      location: \"bottom\",\n    },\n    links: {\n      inline: [\n        {\n          title: \"to begin another long day\",\n          link: \"role\",\n        },\n      ],\n    },\n  },\n  role: {\n    title: \"Choose Your Role\",\n    text: \"Choose Your Role:\",\n    content: {\n      location: \"center\",\n    },\n    links: {\n      default: [\n        {\n          title: \"Imagery Data Scientist\",\n          description:\n            \"Makes and deploys accurate modern DNN models to collection platforms in support of operations.\",\n          image: \"pick-img/imagery-data-scientist.png\",\n          link: \"imageryDataScientist\",\n        },\n        {\n          title: \"Compliance Officer\",\n          description:\n            \"Looking to ensure data equities and USP are protected while directly supporting the mission, possibly with the help of partners.\",\n          image: \"pick-img/compliance-officer.png\",\n          link: \"complianceOfficer\",\n        },\n      ],\n    },\n  },\n  imageryDataScientist: {\n    text: \"When you arrive in the office, you check your mission priorities and find that the Commander of EUCOM has requested imagery on German Shepherds asap. 'Dang!' you say to yourself. I havent trained for that in our current models. I need to get some data and retrain or use an existing model. Either way, I need to do it fast!\",\n    links: {\n      default: [\n        {\n          title: \"Retrain with new data\",\n          link: \"retrainWithNewData\",\n        },\n        {\n          title: \"Train with an existing model\",\n          link: \"trainWithExistingModel\",\n        },\n      ],\n    },\n  },\n  retrainWithNewData: {\n    title: \"How do you want to train your model?\",\n    text: \"Thankfully, your commercial imagery provider gets you imagery from this region fairly rapidly after you submitted your request. You now have access to a large amount of German Shepherd locations within your imagery data set for the target location. You stop and think that it may be best to combine this data other images from a sensitive source that you have already obtained.  You want the most generalizability model (to not miss any dogs!) and thereby increase its effectiveness through diversity.\",\n    links: {\n      default: [\n        { title: \"Combine with Sensitive Data\", link: \"start\" },\n        { title: \"Use Only New Data\", link: \"start\" },\n      ],\n    },\n  },\n  trainWithExistingModel: {\n    title: \"How do you want to train your model?\",\n    text: \"Thankfully, your commercial imagery provider gets you imagery from this region fairly rapidly after you submitted your request. You now have access to a large amount of German Shepherd locations within your imagery data set for the target location. You also recalled that you have an existing highly accurate model for this region and for dogs. All you need to do is fine-tune the classification by training a few more epochs with the new commercial imagery.\",\n    links: {\n      default: [{ title: \"Perform Transfer Learning\", link: \"start\" }],\n    },\n  },\n  complianceOfficer: {\n    text: \"Compliance Officer information goes here...\",\n    links: {\n      default: [{ title: \"Start Over\", link: \"start\" }],\n    },\n  },\n}\n\nexport default questions\n","import { PickContextProvider, PickContext } from \"../../context/PickContext\"\nimport { useContext, useState, useMemo } from \"react\"\nimport questions from \"../../util/questions\"\nimport styled from \"styled-components\"\nimport { Centered } from \"../game/Util\"\n\nconst OptionButton = styled.button`\n  border: none;\n  margin-right: ${({ inline }) => (inline ? \"5px\" : \"0\")};\n  color: red;\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0);\n  font-size: 1.1rem;\n  padding: 5px;\n  transition: background-color 0.1s linear;\n  &:hover {\n    text-decoration: underline;\n    background-color: rgba(255, 255, 255, 0.3);\n  }\n`\n\nconst Option = ({ onClick, option, inline }) => (\n  <OptionButton onClick={onClick} inline={inline}>\n    {option.image ? <img src={option.image} alt=\"\" /> : null}\n    <div>{option.title}</div>\n  </OptionButton>\n)\n\nconst Options = ({ options = [], onClick, inline = false }) =>\n  options.map((x) => (\n    <Option\n      key={x.title}\n      onClick={() => onClick(x)}\n      option={x}\n      inline={inline}\n    />\n  ))\n\nconst Question = ({ configKey }) => {\n  const [currentConfigKey, setCurrentConfigKey] = useState(configKey)\n  const [configurations] = useContext(PickContext)\n  const config = useMemo(() => questions[currentConfigKey], [currentConfigKey])\n  const currentConfig =\n    configurations.selections[configurations.selections.current]\n  const inlineOptions = config.links?.inline || []\n  const linksKey = currentConfig[config.linkKey] || \"default\"\n  const options = config.links ? config?.links[linksKey] : []\n  const contentStyle = {\n    position: \"absolute\",\n    padding: 25,\n    top:\n      !config.content || config.content?.location === \"top\"\n        ? 0\n        : config.content?.location === \"center\"\n        ? \"50%\"\n        : null,\n    left: config.content?.location === \"center\" ? \"50%\" : null,\n    transform:\n      config.content?.location === \"center\"\n        ? \"translateY(-50%) translateX(-50%)\"\n        : null,\n    bottom: config.content?.location === \"bottom\" ? 0 : null,\n  }\n\n  const outerStyle = {\n    backgroundColor: \"black\",\n    backgroundImage: config.image ? `url(${config.image})` : null,\n    height: 600,\n    width: 800,\n    borderRadius: 15,\n    position: \"relative\",\n  }\n\n  const onClickOption = (x) => setCurrentConfigKey(x.link)\n\n  return (\n    <Centered>\n      <div style={outerStyle}>\n        <div style={contentStyle}>\n          <div style={{ color: \"white\" }}>\n            {config.text}\n            {inlineOptions && inlineOptions.length ? (\n              <Options options={inlineOptions} onClick={onClickOption} />\n            ) : null}\n          </div>\n          <div style={{ display: \"flex\", justifyContent: \"space-evenly\" }}>\n            <Options options={options} onClick={onClickOption} inline />\n          </div>\n        </div>\n      </div>\n    </Centered>\n  )\n}\n\nconst Pick = () => (\n  <PickContextProvider>\n    <Question configKey=\"start\" />\n  </PickContextProvider>\n)\n\nexport default Pick\n","import React, { useEffect } from \"react\"\nimport { Field, useFormikContext } from \"formik\"\nimport styled from \"styled-components\"\nimport { Range, getTrackBackground } from \"react-range\"\n\nexport const FEATURES = {\n  showCannedFilters: true,\n  debug: false,\n}\n\nconst InnerFilterLabel = styled.label`\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 12px;\n  &:last-child {\n    padding-bottom: 2px;\n  }\n`\n\nconst TriState = ({ id }) => (\n  <>\n    <InnerFilterLabel>\n      <Field type=\"checkbox\" name={id} value=\"yes\" />\n      Yes\n    </InnerFilterLabel>\n    <InnerFilterLabel>\n      <Field type=\"checkbox\" name={id} value=\"no\" />\n      No\n    </InnerFilterLabel>\n  </>\n)\n\nconst Options = ({ id, options }) =>\n  options.map((o) => (\n    <InnerFilterLabel key={`option-${id}-${o}`}>\n      <Field type=\"checkbox\" name={id} value={o} />\n      {o}\n    </InnerFilterLabel>\n  ))\n\nconst RangeSelect = ({ id, min, max, step = 1, width = \"100%\" }) => {\n  const RANGE_COLORS = [\"#ccc\", \"slategray\", \"#ccc\"]\n  const { values, setFieldValue } = useFormikContext()\n  useEffect(() => {\n    if (!values[id]) {\n      console.debug(`Defaulting range values for [${id}] to [${[min, max]}]...`)\n      setFieldValue(id, [min, max])\n    }\n  })\n\n  const rangeValues =\n    values[id] && values[id].length === 2 ? values[id] : [min, max]\n\n  return (\n    <div\n      style={{\n        width,\n        fontFamily: \"Arial, Helvetica, sans-serif\",\n        fontSize: \"12px\",\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n        }}\n      >\n        {min < max ? (\n          <Range\n            id={id}\n            step={step}\n            min={min}\n            max={max}\n            values={rangeValues || [0, 0]}\n            onChange={(v) => setFieldValue(id, v)}\n            renderTrack={({ props, children }) => (\n              <div\n                {...props}\n                style={{\n                  ...props.style,\n                  height: \"6px\",\n                  display: \"flex\",\n                  margin: \"10px 10% 2px 10%\",\n                  width: \"80%\",\n                  background: getTrackBackground({\n                    values: rangeValues,\n                    colors: RANGE_COLORS,\n                    min: min,\n                    max: max,\n                  }),\n                  borderRadius: 3,\n                }}\n              >\n                {children}\n              </div>\n            )}\n            renderThumb={({ props }) => (\n              <div\n                {...props}\n                style={{\n                  ...props.style,\n                  height: \"12px\",\n                  width: \"12px\",\n                  borderRadius: \"50%\",\n                  backgroundColor: \"#999\",\n                  outline: \"none\",\n                }}\n              />\n            )}\n          />\n        ) : null}\n        <div style={{ margin: \"3px 0\" }}>\n          {rangeValues\n            ? rangeValues[0] === rangeValues[1]\n              ? rangeValues[0]\n              : `${rangeValues[0]} - ${rangeValues[1]}`\n            : \"-\"}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport const DEFAULT_FILTER = {\n  dataSet: \"cifar100\",\n}\n\nexport const DEFAULT_DATA_POINTS = [\n  \"Train Accuracy\",\n  \"Test Accuracy\",\n  \"MPTL Accuracy (All)\",\n  \"MPTL Far Weighted\",\n  \"ART Blackbox Accuracy (All)\",\n  \"ART Rule Based Accuracy (All)\",\n]\n\nexport const DATA_POINT_KEYS = {\n  \"Test Accuracy\": { value: (x) => x.test_acc },\n  \"Train Accuracy\": { value: (x) => x.train_acc || 0 },\n  \"Train Time\": {\n    value: (x) => x.train_time_secs / 3600 || 0,\n  },\n  \"MPTL Accuracy (All)\": {\n    value: (x) => x.mptl_all_acc || 0,\n  },\n  \"MPTL Accuracy (OUT)\": {\n    value: (x) => x.mptl_out_acc || 0,\n  },\n  \"MPTL Accuracy (IN)\": {\n    value: (x) => x.mptl_in_acc || 0,\n  },\n  // \"MPTL MI Weighted\": {\n  //   value: (x) => x.mptl_mi_weighted || 0,\n  // },\n  // \"MPTL MI Worst Case\": {\n  //   value: (x) => x.mptl_mi_worst_case || 0,\n  // },\n  \"MPTL Far Weighted\": {\n    value: (x) => x.mptl_far_weighted || 0,\n  },\n  \"ART Blackbox Accuracy (All)\": {\n    value: (x) => x.art_blackbox_all_acc || 0,\n  },\n  \"ART Blackbox Accuracy (OUT)\": {\n    value: (x) => x.art_blackbox_out_acc || 0,\n  },\n  \"ART Blackbox Accuracy (IN)\": {\n    value: (x) => x.art_blackbox_in_acc || 0,\n  },\n  \"MI Accuracy (All)\": {\n    value: (x) => x.best_attack.best_attack_all_acc || 0,\n  },\n  \"ART Rule Based Accuracy (All)\": {\n    value: (x) => x.art_rule_based_all_acc || 0,\n  },\n  \"ART Rule Based Accuracy (OUT)\": {\n    value: (x) => x.art_rule_based_out_acc || 0,\n  },\n  \"ART Rule Based Accuracy (IN)\": {\n    value: (x) => x.art_rule_based_in_acc || 0,\n  },\n  \"ART Label-Only DB Accuracy (All)\": {\n    value: (x) => x.art_label_only_db_all_acc || 0,\n  },\n  \"ART Label-Only DB Accuracy (OUT)\": {\n    value: (x) => x.art_label_only_db_out_acc || 0,\n  },\n  \"ART Label-Only DB Accuracy (IN)\": {\n    value: (x) => x.art_label_only_db_in_acc || 0,\n  },\n  \"ART Label-Only Gap Accuracy (All)\": {\n    value: (x) => x.art_label_only_gap_all_acc || 0,\n  },\n  \"ART Label-Only Gap Accuracy (OUT)\": {\n    value: (x) => x.art_label_only_gap_out_acc || 0,\n  },\n  \"ART Label-Only Gap Accuracy (IN)\": {\n    value: (x) => x.art_label_only_gap_in_acc || 0,\n  },\n}\n\nexport const FILTERS = [\n  {\n    id: \"dataSet\",\n    type: \"array\",\n    sourceKey: \"data_set\",\n    label: \"Data Set\",\n    control: (filterOptions) => (\n      <Field as=\"select\" name=\"dataSet\">\n        {(filterOptions.dataSet || []).map((x) => (\n          <option key={`dataSet-${x}`}>{x}</option>\n        ))}\n      </Field>\n    ),\n  },\n  {\n    id: \"dataAugmentation\",\n    type: \"boolean\",\n    sourceKey: \"data_augmentation\",\n    label: \"Data Augmentation\",\n    control: () => <TriState id=\"dataAugmentation\" />,\n  },\n  {\n    id: \"modelArchitecture\",\n    type: \"array\",\n    sourceKey: \"model_architecture\",\n    label: \"Model Architecture\",\n    control: (filterOptions) => (\n      <Options\n        id=\"modelArchitecture\"\n        options={filterOptions.modelArchitecture}\n      />\n    ),\n  },\n  {\n    id: \"mode\",\n    type: \"array\",\n    sourceKey: \"mode\",\n    label: \"Mode\",\n    control: (filterOptions) => (\n      <Options id=\"mode\" options={filterOptions.mode} />\n    ),\n  },\n  {\n    id: \"epochs\",\n    type: \"range\",\n    sourceKey: \"epochs\",\n    label: \"Epochs\",\n    control: (filterOptions) => (\n      <RangeSelect id=\"epochs\" {...filterOptions.epochs} />\n    ),\n  },\n  {\n    id: \"batchSize\",\n    type: \"range\",\n    sourceKey: \"batch_size\",\n    label: \"Batch Size\",\n    control: (filterOptions) => (\n      <RangeSelect id=\"batchSize\" {...filterOptions.batchSize} />\n    ),\n  },\n  {\n    id: \"numClasses\",\n    type: \"range\",\n    sourceKey: \"num_classes\",\n    label: \"Number of Classes\",\n    control: (filterOptions) => (\n      <RangeSelect id=\"numClasses\" {...filterOptions.numClasses} />\n    ),\n  },\n  {\n    id: \"optimizerName\",\n    type: \"array\",\n    sourceKey: \"optimizer_name\",\n    label: \"Optimizer\",\n    control: (filterOptions) => (\n      <Options id=\"optimizerName\" options={filterOptions.optimizerName} />\n    ),\n  },\n  {\n    id: \"dpsgd\",\n    type: \"boolean\",\n    sourceKey: \"dpsgd\",\n    label: \"DPSGD\",\n    control: () => <TriState id=\"dpsgd\" />,\n  },\n  {\n    id: \"labelSmoothing\",\n    type: \"boolean\",\n    sourceKey: \"label_smoothing\",\n    label: \"Label Smoothing\",\n    control: () => <TriState id=\"labelSmoothing\" />,\n  },\n  {\n    id: \"transferLearning\",\n    type: \"boolean\",\n    sourceKey: \"transfer_learning\",\n    label: \"Transfer Learning\",\n    control: () => <TriState id=\"transferLearning\" />,\n  },\n  {\n    id: \"trainable\",\n    type: \"boolean\",\n    sourceKey: \"trainable\",\n    label: \"Trainable?\",\n    control: () => <TriState id=\"trainable\" />,\n  },\n]\n\nexport const deleteRedundantAttackProps = (data) => {\n  if (FEATURES.debug || !data || data.length < 2) return data\n  const inAll = (key) =>\n    [...new Set(data.map((x) => String(x[key]).toLowerCase()))].length === 1\n  let keysToRemove = Object.keys(ATTACK_KEY_PARTS)\n    .filter((k) => !ATTACK_KEY_PARTS[k].alwaysShow)\n    .reduce((all, k) => (inAll(k) ? [...all, k] : [...all]), [])\n\n  return data.map((x) =>\n    keysToRemove.reduce(\n      (all, k) => {\n        delete all[k]\n        return all\n      },\n      { ...x }\n    )\n  )\n}\n\nconst ATTACK_KEY_PARTS = {\n  model_architecture: { alwaysShow: true },\n  mode: {},\n  epochs: { format: (x) => `${x}epochs` },\n  batch_size: { format: (x) => `${x}batch` },\n  optimizer_name: {},\n  num_classes: { format: (x) => `${x}classes` },\n  data_augmentation: { flag: \"aug\" },\n  attack_type: {},\n  dpsgd: { flag: \"dpsgd\" },\n  label_smoothing: { flag: \"smooth\" },\n  trainable: { flag: \"trainable\" },\n}\n\nexport const attackKey = (x) => {\n  const part = (key) => {\n    if (x[key]) {\n      if (\"flag\" in ATTACK_KEY_PARTS[key]) {\n        return ATTACK_KEY_PARTS[key].flag\n      } else {\n        const formatFn = ATTACK_KEY_PARTS[key].format || ((x) => `${x}`)\n        return formatFn(x[key])\n      }\n    } else return null\n  }\n\n  return Object.keys(ATTACK_KEY_PARTS)\n    .map(part)\n    .filter((x) => x)\n    .map((x) => x.toLowerCase())\n    .join(\"/\")\n}\n\n// const COLOR_SCHEME = \"category10\"\nexport const COLORS = [\n  \"rgb(31,119,180)\",\n  \"rgb(255,127,14)\",\n  \"rgb(44,160,44)\",\n  \"rgb(214,39,40)\",\n  \"rgb(148,103,189)\",\n  \"rgb(140,86,75)\",\n  \"rgb(227,119,194)\",\n  \"rgb(127,127,127)\",\n  \"rgb(188,189,34)\",\n  \"rgb(23,190,207)\",\n]\n\nexport const chartColors = (count) => COLORS.slice(0, count)\n","import {\n  FEATURES,\n  DATA_POINT_KEYS,\n  deleteRedundantAttackProps,\n  attackKey,\n} from \"./utils\"\nimport { ResponsiveRadar } from \"@nivo/radar\"\n\nconst radarResultsAccuracy = (v) => {\n  try {\n    const inverseDistance = 0.2 / Math.abs(0.5 - v)\n    return -1 + 2 / (1 + Math.exp(-inverseDistance))\n  } catch {\n    return 0\n  }\n}\n\nconst dataMappers = {\n  \"Train Time\": (x) => -1 + 2 / (1 + Math.exp(-1 / x)),\n  \"MPTL Accuracy (All)\": radarResultsAccuracy,\n  \"MPTL Accuracy (OUT)\": radarResultsAccuracy,\n  \"MPTL Accuracy (IN)\": radarResultsAccuracy,\n  \"MPTL Far Weighted\": radarResultsAccuracy,\n  \"ART Blackbox Accuracy (All)\": radarResultsAccuracy,\n  \"ART Blackbox Accuracy (OUT)\": radarResultsAccuracy,\n  \"ART Blackbox Accuracy (IN)\": radarResultsAccuracy,\n  \"MI Accuracy (All)\": radarResultsAccuracy,\n  \"ART Rule Based Accuracy (All)\": radarResultsAccuracy,\n  \"ART Rule Based Accuracy (OUT)\": radarResultsAccuracy,\n  \"ART Rule Based Accuracy (IN)\": radarResultsAccuracy,\n  \"ART Label-Only DB Accuracy (All)\": radarResultsAccuracy,\n  \"ART Label-Only DB Accuracy (OUT)\": radarResultsAccuracy,\n  \"ART Label-Only DB Accuracy (IN)\": radarResultsAccuracy,\n  \"ART Label-Only Gap Accuracy (All)\": radarResultsAccuracy,\n  \"ART Label-Only Gap Accuracy (OUT)\": radarResultsAccuracy,\n  \"ART Label-Only Gap Accuracy (IN)\": radarResultsAccuracy,\n}\n\nconst buildRadarChartModel = ({\n  chartData,\n  displayOptions = {},\n  legend = [],\n}) => {\n  const { dataPoints = null } = displayOptions\n  const defaultReduced = Object.keys(DATA_POINT_KEYS).reduce(\n    (all, k) => ({ ...all, [k]: { metric: k } }),\n    {}\n  )\n  const chartMap = (pointKey, data) => {\n    const value = DATA_POINT_KEYS[pointKey].value(data)\n    return (\n      dataMappers[pointKey] ? dataMappers[pointKey](value) : value\n    ).toFixed(3)\n  }\n\n  const forAttackKeys = deleteRedundantAttackProps(chartData)\n  const reduced = chartData.reduce((all, x, i) => {\n    const attack = attackKey(forAttackKeys[i])\n    return Object.keys(DATA_POINT_KEYS).reduce(\n      (updated, k) => {\n        if (legend[attack]?.checked) {\n          updated[k][attack] = chartMap(k, x)\n        }\n        return updated\n      },\n      { ...all }\n    )\n  }, defaultReduced)\n  const data = dataPoints.map((p) =>\n    Object.values(reduced).find((x) => x.metric === p)\n  )\n  if (data && data.length) {\n    const keys = Object.keys(data[0]).filter((x) => x !== \"metric\")\n    return {\n      data,\n      keys,\n      indexBy: \"metric\",\n    }\n  } else return { data: [], keys: [] }\n}\n\nconst RadarChart = ({ chartData, displayOptions, legend }) => {\n  const { data, keys, indexBy } = buildRadarChartModel({\n    chartData,\n    displayOptions,\n    legend,\n  })\n  if (FEATURES.debug) console.log(\"radar-chart-data\", data)\n  return data ? (\n    <ResponsiveRadar\n      colors={({ key }) => legend[key]?.color || \"rgba(0,0,0,0)\"}\n      data={data}\n      keys={keys}\n      indexBy={indexBy}\n      maxValue=\"auto\"\n      dotBorderWidth={2}\n      margin={{ top: 70, right: 150, bottom: 40, left: 145 }}\n      gridLabelOffset={32}\n      enableDots={true}\n      dotSize={10}\n      isInteractive={true}\n      tooltipFormat={(value) => (FEATURES.debug ? value : \"\")}\n    />\n  ) : null\n}\n\nexport default RadarChart\n","import {\n  FEATURES,\n  DATA_POINT_KEYS,\n  deleteRedundantAttackProps,\n  attackKey,\n} from \"./utils\"\nimport { ResponsiveLine } from \"@nivo/line\"\n\nconst buildParallelCoordinateModel = ({\n  chartData,\n  displayOptions = {},\n  legend = {},\n}) => {\n  const { dataPoints = null } = displayOptions\n  const forAttackKeys = deleteRedundantAttackProps(chartData)\n  const data = chartData.map((x, i) => {\n    const _dataPoints = dataPoints || []\n    const attack = attackKey(forAttackKeys[i])\n    const chartMap = (pointKey, data) => {\n      const value = DATA_POINT_KEYS[pointKey].value(data)\n      return (\n        DATA_POINT_KEYS[pointKey].chartMapper?.parallelCoordinates\n          ? DATA_POINT_KEYS[pointKey].chartMapper.parallelCoordinates(value)\n          : value\n      ).toFixed(3)\n    }\n    const sorted = _dataPoints\n      .map((k) => ({\n        series: attack,\n        x: k,\n        y: chartMap(k, x),\n      }))\n      .filter((x) => legend[x.series]?.checked)\n      .sort((a, b) =>\n        _dataPoints.indexOf(a.x) > _dataPoints.indexOf(b.x) ? 1 : -1\n      )\n\n    return {\n      id: attack,\n      data: sorted,\n    }\n  })\n  return { data }\n}\n\nconst ParallelCoordinatesChart = ({ chartData, displayOptions, legend }) => {\n  const { data } = buildParallelCoordinateModel({\n    chartData,\n    displayOptions,\n    legend,\n  })\n  if (FEATURES.debug) console.log(\"parallel-coordinates-data\", data)\n  return data ? (\n    <ResponsiveLine\n      colors={({ id }) => legend[id]?.color || \"rgba(0,0,0,0)\"}\n      data={data}\n      margin={{ top: 50, right: 150, bottom: 90, left: 30 }}\n      yScale={{\n        type: \"linear\",\n        min: \"auto\",\n        max: \"auto\",\n      }}\n      useMesh={true}\n      pointSize={10}\n      pointBorderWidth={2}\n      axisBottom={{ tickRotation: 25 }}\n    />\n  ) : null\n}\n\nexport default ParallelCoordinatesChart\n","import { deleteRedundantAttackProps, attackKey } from \"./utils\"\nimport styled from \"styled-components\"\n\nconst CheckboxLegendLabel = styled.label`\n  font-size: 0.7rem;\n  cursor: pointer;\n  display: block;\n  display: flex;\n  align-items: center;\n`\n\nconst CheckboxLegendCheck = ({ color, checked }) => {\n  const width = 16\n  const height = 16\n  const strokeWidth = 2\n  const checkColor = \"white\"\n  const style = {\n    stroke: color,\n    fill: color,\n    strokeWidth,\n  }\n  const checkPoints = [\n    `${width * 0.3},${height * 0.5}`,\n    `${width * 0.45},${height * 0.65}`,\n    `${width * 0.7},${height * 0.32}`,\n  ]\n  return (\n    <div style={{ width, height }}>\n      <svg viewBox={`0 0 ${width} ${height}`}>\n        <circle\n          style={style}\n          cx={width / 2}\n          cy={height / 2}\n          r={width / 2 - 2}\n        />\n        {checked ? (\n          <polyline\n            style={{\n              ...style,\n              stroke: checkColor,\n              strokeWidth,\n            }}\n            points={checkPoints.join(\" \")}\n          />\n        ) : null}\n      </svg>\n    </div>\n  )\n}\n\nconst CheckboxLegend = ({ legendModel, onLegendItemChecked }) =>\n  legendModel ? (\n    <div style={{ position: \"relative\", zIndex: 999 }}>\n      {Object.keys(legendModel).map((key) => {\n        return (\n          <CheckboxLegendLabel\n            key={`legend-key-${key}`}\n            onClick={() =>\n              onLegendItemChecked({\n                key,\n                checked: !legendModel[key].checked,\n              })\n            }\n          >\n            <CheckboxLegendCheck\n              color={legendModel[key].color}\n              checked={legendModel[key].checked}\n            />\n            <span>{key}</span>\n          </CheckboxLegendLabel>\n        )\n      })}\n    </div>\n  ) : null\n\nexport const legendKeys = (data) => {\n  const forAttackKeys = deleteRedundantAttackProps(data)\n  return data.map((_, i) => attackKey(forAttackKeys[i]))\n}\n\nexport default CheckboxLegend\n","import { useState } from \"react\"\nimport { DEFAULT_DATA_POINTS, DEFAULT_FILTER, FILTERS } from \"./utils\"\nimport { Formik, Form } from \"formik\"\nimport styled from \"styled-components\"\nimport Select from \"react-select\"\nimport { unique, isDef, isEmpty } from \"../../../util/misc\"\n\nconst StyledCannedFilterSelection = styled.div`\n  font-size: 0.9rem;\n`\n\nconst CANNED_FILTERS = {\n  canned1: {\n    label: \"CIFAR10 Adam\",\n    filter: { dataSet: \"cifar10\", optimizerName: [\"adam\"] },\n    dataPoints: [\"Test Accuracy\", \"Train Time\", \"MPTL Accuracy (All)\"],\n  },\n  canned2: {\n    label: \"EMNIST Natural\",\n    filter: { dataSet: \"emnist\", optimizerName: [\"sgd\"] },\n    dataPoints: [\n      \"Train Accuracy\",\n      \"Test Accuracy\",\n      \"ART Blackbox Accuracy (All)\",\n      \"ART Rule Based Accuracy (All)\",\n    ],\n  },\n}\n\nexport const CannedFilterSelection = ({ onSelectCannedFilter }) => {\n  const custom = { value: \"custom\", label: \"Custom Filter...\" }\n  const [selection, setSelection] = useState(custom)\n  return (\n    <StyledCannedFilterSelection>\n      <Select\n        placeholder=\"Select Filter...\"\n        options={[\n          custom,\n          ...Object.keys(CANNED_FILTERS).map((value) => ({\n            value,\n            ...CANNED_FILTERS[value],\n          })),\n        ]}\n        onChange={(selected) => {\n          setSelection(selected)\n          const cannedFilter = CANNED_FILTERS[selected.value]\n          onSelectCannedFilter(\n            cannedFilter?.filter || DEFAULT_FILTER,\n            cannedFilter?.dataPoints || DEFAULT_DATA_POINTS\n          )\n        }}\n        styles={{\n          control: (base) => ({\n            ...base,\n            border: 0,\n            boxShadow: \"none\",\n          }),\n          singleValue: (base) => ({\n            ...base,\n            color: \"black\",\n          }),\n        }}\n        value={selection}\n      />\n    </StyledCannedFilterSelection>\n  )\n}\n\nconst FilterContainer = styled.div`\n  display: flex;\n  background-color: white;\n  border: 1px solid gray;\n`\n\nconst FilterLabel = styled.label`\n  background-color: slategray;\n  color: white;\n  padding: 5px 8px;\n  &:before {\n    content: \" \";\n  }\n`\n\nconst Labelled = ({ htmlFor, children }) => (\n  <div\n    style={{\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"100%\",\n    }}\n  >\n    <FilterLabel htmlFor={htmlFor}>\n      {FILTERS.find((x) => x.id === htmlFor).label}\n    </FilterLabel>\n    {children}\n  </div>\n)\n\nconst FormSubmitButton = styled.button`\n  border: 1px solid gray;\n  color: white;\n  background-color: darkslategray;\n  border-radius: 5px;\n  cursor: pointer;\n  margin-right: 5px;\n  &:hover {\n    box-shadow: 0 0 1px gray;\n    text-shadow: 1px 1px 1px gray;\n  }\n`\n\nexport const FilterForm = ({ filter, setFilter, filterOptions, onReset }) => {\n  const filterNullsToBlanks = () => {\n    const toBlanks = { ...filter }\n    \"dataAugmentation modelArchitecture mode optimizerName dpsgd labelSmoothing\"\n      .split(\" \")\n      .forEach((x) => {\n        if (!isDef(toBlanks[x])) toBlanks[x] = \"\"\n      })\n    return toBlanks\n  }\n  const blankedFilter = filterNullsToBlanks()\n  return (\n    <FilterContainer>\n      <Formik\n        initialValues={blankedFilter}\n        enableReinitialize\n        onSubmit={async (values) => {\n          const mapped = FILTERS.filter((x) => \"mapValue\" in x).reduce(\n            (all, x) => ({ ...all, [x.id]: x.mapValue(all[x.id]) }),\n            values\n          )\n          setFilter(mapped)\n        }}\n      >\n        <Form\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"end\",\n          }}\n        >\n          {FILTERS.map((f) => (\n            <Labelled key={`filter-property-${f.id}`} htmlFor={f.id}>\n              {f.control(filterOptions)}\n            </Labelled>\n          ))}\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-evenly\",\n              width: \"100%\",\n              margin: \"10px 0\",\n            }}\n          >\n            <FormSubmitButton type=\"submit\"> Filter</FormSubmitButton>\n            <FormSubmitButton type=\"reset\" onClick={onReset}>\n               Reset\n            </FormSubmitButton>\n          </div>\n        </Form>\n      </Formik>\n    </FilterContainer>\n  )\n}\n\nconst inRange = (value, range) => {\n  if (Array.isArray(range)) {\n    if (range.length !== 2) return false\n    const [min, max] = range\n    return isDef(min) && isDef(max)\n      ? value >= min && value <= max\n      : isDef(min)\n      ? value >= min\n      : isDef(max)\n      ? value <= max\n      : false\n  } else return value === range\n}\n\nexport const filtered = (data, filterProps) => {\n  const filter = (x) =>\n    Object.keys(filterProps).reduce((all, k) => {\n      const _filter = FILTERS.find((fk) => fk.id === k)\n      if (!_filter) return all && true\n      let value = isDef(x[_filter.sourceKey])\n        ? x[_filter.sourceKey]\n        : _filter.defaultValue\n\n      switch (_filter.type) {\n        case \"array\":\n          value = isDef(value) ? value : []\n          const selected = (\n            Array.isArray(filterProps[k]) ? filterProps[k] : [filterProps[k]]\n          ).map((x) => x.toLowerCase())\n          return isEmpty(selected)\n            ? all && true\n            : all && selected.includes(value.toLowerCase())\n        case \"boolean\":\n          value = isDef(value) ? value : false\n          return isEmpty(filterProps[k])\n            ? all && true\n            : all &&\n                filterProps[k]\n                  .map((x) => (x === \"yes\" ? true : false))\n                  .includes(value)\n        case \"range\":\n          return isDef(filterProps[k])\n            ? all && inRange(value, filterProps[k])\n            : all && true\n        default:\n          return all && true\n      }\n    }, true)\n\n  return data.filter(filter)\n}\n\nexport const buildFilterOptions = (data, configs) => {\n  const defaults = {\n    array: () => [],\n    range: () => ({\n      min: 99999999,\n      max: 0,\n    }),\n  }\n  const filterOptions = []\n  const updateFns = {\n    array: (x, sourceKey, targetKey) =>\n      (filterOptions[targetKey] = unique([\n        ...filterOptions[targetKey],\n        x[sourceKey].toLowerCase(),\n      ])),\n    range: (x, sourceKey, targetKey) =>\n      (filterOptions[targetKey] = {\n        min: Math.min(filterOptions[targetKey].min, x[sourceKey]),\n        max: Math.max(filterOptions[targetKey].max, x[sourceKey]),\n      }),\n  }\n\n  configs =\n    configs || FILTERS.filter((x) => [\"array\", \"range\"].includes(x.type))\n  data.forEach((x) => {\n    configs.forEach(({ type, sourceKey, id }) => {\n      if (!(id in filterOptions)) {\n        filterOptions[id] = defaults[type]()\n      }\n\n      updateFns[type](x, sourceKey, id)\n    })\n  })\n\n  return filterOptions\n}\n\nexport const updateFilterNoSelections = (filter, filterOptions) =>\n  FILTERS.reduce((all, x) => {\n    switch (x.type) {\n      case \"array\":\n        return isEmpty(filter[x.id])\n          ? { ...all, [x.id]: filterOptions[x.id] }\n          : { ...all }\n      case \"boolean\":\n        return isEmpty(filter[x.id])\n          ? { ...all, [x.id]: [\"yes\", \"no\"] }\n          : { ...all }\n      default:\n        return { ...all }\n    }\n  }, filter)\n","import { useState, useEffect, useMemo, useCallback } from \"react\"\nimport RadarChart from \"./riskScores/Radar\"\nimport {\n  FEATURES,\n  DEFAULT_FILTER,\n  DEFAULT_DATA_POINTS,\n  DATA_POINT_KEYS,\n  COLORS,\n} from \"./riskScores/utils\"\nimport ParallelCoordinatesChart from \"./riskScores/ParallelCoordinates\"\nimport CheckboxLegend, { legendKeys } from \"./riskScores/Legend\"\nimport {\n  CannedFilterSelection,\n  FilterForm,\n  filtered,\n  buildFilterOptions,\n  updateFilterNoSelections,\n} from \"./riskScores/Filter\"\nimport styled from \"styled-components\"\nimport Select from \"react-select\"\n\nconst StyledChartSelectionButton = styled.div`\n  border: 1px solid gray;\n  border-radius: 25px;\n  background-color: ${({ checked }) =>\n    checked ? \"cornflowerblue\" : \"lightgray\"};\n  color: ${({ checked }) => (checked ? \"black\" : \"white\")};\n  padding: 5px 10px 5px 0;\n  margin-right: 10px;\n  cursor: pointer;\n  > * {\n    cursor: inherit;\n  }\n`\n\nconst ChartSelectionButton = ({ id, label, checked, onSelect }) => (\n  <StyledChartSelectionButton key={`chart-${id}`} checked={checked}>\n    <input\n      id={`chart-${id}`}\n      type=\"radio\"\n      value={id}\n      name=\"chart\"\n      checked={checked}\n      onChange={onSelect}\n    />\n    <label htmlFor={`chart-${id}`}>{label}</label>\n  </StyledChartSelectionButton>\n)\n\nconst ChartSelection = ({ selectedChartId, setSelectedChartId }) => {\n  const charts = {\n    radar: \"Radar Chart\",\n    parallelCoordinates: \"Parallel Coordinates\",\n  }\n  useEffect(() => {\n    setSelectedChartId(selectedChartId) // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  return (\n    <div>\n      <label>Chart</label>\n      <div style={{ display: \"flex\" }}>\n        {Object.keys(charts).map((x) => (\n          <ChartSelectionButton\n            key={`chart-selection-button-${x}`}\n            id={x}\n            label={charts[x]}\n            checked={selectedChartId === x}\n            onSelect={() => setSelectedChartId(x)}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nconst DisplayOptions = ({ displayOptions, setDisplayOptions }) => {\n  const options = Object.keys(DATA_POINT_KEYS).map((value) => ({\n    value,\n    label: value,\n  }))\n\n  const onChange = (value) =>\n    setDisplayOptions({ dataPoints: (value || []).map((x) => x.value) })\n\n  const values = () =>\n    displayOptions.dataPoints?.map((value) => ({\n      value,\n      label: value,\n    }))\n\n  return (\n    <div style={{ width: 725 }}>\n      <label>Data Points</label>\n      <Select\n        isClearable={false}\n        value={values()}\n        isMulti\n        placeholder=\"Select Data Points...\"\n        options={options}\n        onChange={onChange}\n        styles={{\n          multiValueRemove: (base) =>\n            displayOptions.dataPoints?.length <= 3 // Minimum 3 data points\n              ? { ...base, display: \"none\" }\n              : base,\n        }}\n      />\n    </div>\n  )\n}\n\nconst RiskScores = () => {\n  const [filter, setFilter] = useState(DEFAULT_FILTER)\n  const [displayOptions, setDisplayOptions] = useState({\n    dataPoints: DEFAULT_DATA_POINTS,\n  })\n  const [selectedChartId, setSelectedChartId] = useState(\"radar\")\n  const [rawRiskScores, setRawRiskScores] = useState([])\n  const [filterOptions, setFilterOptions] = useState()\n  const [chartData, setChartData] = useState(rawRiskScores)\n  const [legend, setLegend] = useState({})\n  const resetFilter = useCallback(() => {\n    const _filterOptions = buildFilterOptions(rawRiskScores)\n    setFilterOptions(_filterOptions)\n    setFilter(updateFilterNoSelections(DEFAULT_FILTER, _filterOptions))\n  }, [rawRiskScores])\n\n  useEffect(() => {\n    const getRawData = async () => {\n      const result = await fetch(\"./data/risk-scores.json\")\n      const data = await result.json()\n      setRawRiskScores(data)\n    }\n    getRawData()\n  }, [])\n\n  useEffect(() => {\n    if (rawRiskScores && rawRiskScores.length) {\n      resetFilter()\n    }\n  }, [rawRiskScores, resetFilter])\n\n  useEffect(\n    () => setChartData(filtered(rawRiskScores, filter)),\n    [filter, rawRiskScores]\n  )\n\n  useEffect(() => {\n    const model = legendKeys(chartData).reduce(\n      (all, k, i) => ({\n        ...all,\n        [k]: { color: COLORS[i % COLORS.length], checked: true },\n      }),\n      {}\n    )\n    setLegend(model)\n  }, [chartData])\n\n  const charts = useMemo(\n    () => ({\n      radar: (\n        <div\n          style={{\n            height: \"100%\",\n            width: 830,\n          }}\n        >\n          <RadarChart\n            chartData={chartData}\n            displayOptions={displayOptions}\n            legend={legend}\n          />\n        </div>\n      ),\n      parallelCoordinates: (\n        <div\n          style={{\n            height: \"100%\",\n            width: 930,\n          }}\n        >\n          <ParallelCoordinatesChart\n            chartData={chartData}\n            displayOptions={displayOptions}\n            legend={legend}\n          />\n        </div>\n      ),\n    }),\n    [chartData, displayOptions, legend]\n  )\n\n  return (\n    <div style={{ display: \"flex\" }}>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          marginLeft: -10,\n          marginRight: 10,\n        }}\n      >\n        {FEATURES.showCannedFilters ? (\n          <CannedFilterSelection\n            onSelectCannedFilter={(filter, dataPoints) => {\n              setFilter(updateFilterNoSelections(filter, filterOptions))\n              setDisplayOptions((prev) => ({ ...prev, dataPoints }))\n            }}\n          />\n        ) : null}\n        {filterOptions ? (\n          <FilterForm\n            filter={filter}\n            filterOptions={filterOptions}\n            setFilter={setFilter}\n            onReset={resetFilter}\n          />\n        ) : null}\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\" }}>\n          <ChartSelection\n            selectedChartId={selectedChartId}\n            setSelectedChartId={setSelectedChartId}\n          />\n          <DisplayOptions\n            displayOptions={displayOptions}\n            setDisplayOptions={setDisplayOptions}\n          />\n        </div>\n        <div style={{ display: \"flex\", margin: 10 }}>\n          <div\n            style={{\n              maxHeight: 650,\n              minHeight: 350,\n              height: 650,\n              width: 800,\n            }}\n          >\n            {selectedChartId ? charts[selectedChartId] : null}\n          </div>\n          <CheckboxLegend\n            legendModel={legend}\n            onLegendItemChecked={({ key, checked }) =>\n              setLegend((prev) => ({\n                ...prev,\n                [key]: { ...prev[key], checked },\n              }))\n            }\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default RiskScores\n","// Inspired by http://www.brainjar.com/css/cards/demo.html\nimport styled from \"styled-components\"\n\nconst OuterCard = styled.div`\n  border: 1px solid gray;\n  font-size: 18pt;\n  width: 4em;\n  height: 5.4em;\n  display: inline-block;\n  border-radius: 5px;\n`\n\nconst Suits = {\n  hearts: {\n    color: \"red\",\n    char: 0x2665, // &hearts;\n  },\n  diamonds: {\n    color: \"red\",\n    char: 0x2666, // &diams;\n  },\n  clubs: {\n    color: \"black\",\n    char: 0x2663, // &clubs;\n  },\n  spades: {\n    color: \"black\",\n    char: 0x2660, // &spades;\n  },\n}\n\nconst largeMiddle = (content) => ({\n  top: \"0.4em\",\n  fontSize: \"250%\",\n  textAlign: \"center\",\n  content,\n})\n\nconst SpotLocations = {\n  A: largeMiddle(\"A\"),\n  J: largeMiddle(\"J\"),\n  Q: largeMiddle(\"Q\"),\n  K: largeMiddle(\"K\"),\n  A1: {\n    left: \"0.6em\",\n    top: \"0.5em\",\n  },\n  A2: {\n    left: \"0.6em\",\n    top: \"1.5em\",\n  },\n  A3: {\n    left: \"0.6em\",\n    top: \"2em\",\n  },\n  A4: {\n    left: \"0.6em\",\n    top: \"2.5em\",\n  },\n  A5: {\n    left: \"0.6em\",\n    top: \"3.5em\",\n  },\n  B1: {\n    left: \"1.55em\",\n    top: \"0.5em\",\n  },\n  B2: {\n    left: \"1.55em\",\n    top: \"1em\",\n  },\n  B3: {\n    left: \"1.55em\",\n    top: \"2em\",\n  },\n  B4: {\n    left: \"1.55em\",\n    top: \"3em\",\n  },\n  B5: {\n    left: \"1.55em\",\n    top: \"3.5em\",\n  },\n  C1: {\n    left: \"2.5em\",\n    top: \"0.5em\",\n  },\n  C2: {\n    left: \"2.5em\",\n    top: \"1.5em\",\n  },\n  C3: {\n    left: \"2.5em\",\n    top: \"2em\",\n  },\n  C4: {\n    left: \"2.5em\",\n    top: \"2.5em\",\n  },\n  C5: {\n    left: \"2.5em\",\n    top: \"3.5em\",\n  },\n}\n\nconst Card = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  color: ${({ suit }) => Suits[suit].color || null};\n`\nconst CardBack = styled.div`\n  width: 100%;\n  height: 100%;\n  background-image: repeating-linear-gradient(\n      45deg,\n      transparent,\n      transparent 1em,\n      #731630 1em,\n      #731630 50%\n    ),\n    repeating-linear-gradient(\n      45deg,\n      #40152a,\n      #40152a 1em,\n      #ff5434 1em,\n      #ff5434 50%\n    );\n  background-size: 3em 3em, 2em 2em;\n`\n\nconst Element = styled.div`\n  position: absolute;\n`\nconst Index = styled(Element)`\n  font-size: 46%;\n  font-weight: bold;\n  text-align: center;\n  left: 0.25em;\n  top: 0.25em;\n`\nconst Spot = styled(Element)`\n  width: 100%;\n`\n\nconst Spots = {\n  2: [\"B1\", \"B5\"],\n  3: [\"B1\", \"B3\", \"B5\"],\n  4: [\"A1\", \"A5\", \"C1\", \"C5\"],\n  5: [\"A1\", \"A5\", \"B3\", \"C1\", \"C5\"],\n  6: [\"A1\", \"A3\", \"A5\", \"C1\", \"C3\", \"C5\"],\n  7: [\"A1\", \"A3\", \"A5\", \"B2\", \"C1\", \"C3\", \"C5\"],\n  8: [\"A1\", \"A3\", \"A5\", \"B2\", \"B4\", \"C1\", \"C3\", \"C5\"],\n  9: [\"A1\", \"A2\", \"A4\", \"A5\", \"B3\", \"C1\", \"C2\", \"C4\", \"C5\"],\n  10: [\"A1\", \"A2\", \"A4\", \"A5\", \"B2\", \"B4\", \"C1\", \"C2\", \"C4\", \"C5\"],\n}\n\nconst InnerSuitChar = styled.div`\n  position: absolute;\n  top: 26%;\n  height: 100%;\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 0.5em;\n`\n\nconst PlayingCard = ({ suit, value }) => {\n  const suitChar = suit ? String.fromCharCode(Suits[suit].char) : null\n  const showBack = !suit || !value\n  return (\n    <OuterCard>\n      {showBack ? (\n        <CardBack />\n      ) : (\n        <Card suit={suit}>\n          <Index>\n            {value}\n            <br />\n            {suitChar}\n          </Index>\n          {(Spots[value] || [value]).map((x) => (\n            <Spot key={x} location={x} style={SpotLocations[x]}>\n              {suitChar}{\" \"}\n              <InnerSuitChar>{SpotLocations[x].content}</InnerSuitChar>\n            </Spot>\n          ))}\n        </Card>\n      )}\n    </OuterCard>\n  )\n}\n\nexport const AllCards = () => {\n  const suits = \"hearts diamonds clubs spades\".split(\" \")\n  const values = \"A 2 3 4 5 6 7 8 9 10 J Q K\".split(\" \")\n  return [\n    <PlayingCard key=\"facedown\" />, // Face Down Card\n    ...suits\n      .map((s) =>\n        values.map((v) => <PlayingCard key={`${s}-${v}`} suit={s} value={v} />)\n      )\n      .flat(),\n  ]\n}\n\nexport default PlayingCard\n","import PlayingCard from \"../game/PlayingCard\"\nimport { Centered } from \"../game/Util\"\n\nconst Blackjack = () => (\n  <Centered>\n    <div>\n      <PlayingCard />\n      <PlayingCard suit=\"hearts\" value=\"9\" />\n    </div>\n    <div>\n      <PlayingCard suit=\"hearts\" value=\"A\" />\n      <PlayingCard suit=\"hearts\" value=\"K\" />\n    </div>\n  </Centered>\n)\n\nexport default Blackjack\n","import { useState, useRef, useEffect, useCallback } from \"react\"\nimport styled from \"styled-components\"\n\nimport RiskScores from \"./RiskScores\"\nimport Blackjack from \"./Blackjack\"\nimport Pick from \"../pick/Pick\"\n\nconst ideas = {\n  riskScores: {\n    title: \"Risk Scores\",\n    description: (\n      <>\n        <h3>Motivation</h3>\n        <p>\n          Various charts are great at visualizing complex multi-dimensional data\n          and allowing for easy trade-off comparisons for design choices. Select\n          graph type to get started.\n        </p>\n        <h3>Application to Membership Inference</h3>\n        <p>\n          Categories correspond to high-level training configurations such as\n          Data set, Natural, DP SGD, Madry Robust, Label smoothing, number of\n          epochs, batch size, etc. The dimensions correspond to specific MI\n          Attacks types and metrics.\n        </p>\n        <h3>Way Ahead</h3>\n        <p>\n          Adding in interaction elements so that user can select which\n          categories and dimensions they want displayed.\n        </p>\n      </>\n    ),\n    component: <RiskScores />,\n  },\n  blackjack: {\n    title: \"Blackjack\",\n    description: (\n      <>\n        <h3>Motivation</h3>\n        <p>\n          Desire a fun game with structured data that makes privacy attacks\n          intuitive in how information is leaked through the model output.\n        </p>\n        <h3>Application to Membership Inference</h3>\n        <p>\n          In the attribute inference attack, the target models output is used\n          to infer the value of a hidden or sensitive feature. Here, a model is\n          trained to receive two cards and decide whether to hit or stay. The\n          viz tool user is shown the model decisions (hit or stay) and one of\n          the two cards and the model's decision. The user then guesses the\n          value of the hidden card.\n        </p>\n        <h3>Way Ahead</h3>\n        <p>\n          Game needs to be fully implemented. Then, determine if the game\n          achieves the goals of being easily understood while also accurately\n          depicting the attack.\n        </p>\n      </>\n    ),\n    component: <Blackjack />,\n  },\n  pick: {\n    title: \"Pick Your Path\",\n    description: (\n      <>\n        <h3>Motivation</h3>\n        <p>\n          An interactive adventure where the user decides which story to follow\n          as choices are presented. Story and related decisions are from the\n          perspective of an NGA analyst.\n        </p>\n        <h3>Application to Membership Inference</h3>\n        <p>\n          In the training and deployment of deep neural network models, there\n          are potential privacy and security concerns that can sometime compete\n          with the goal of the most accurate model. Medium explores these\n          tradeoffs in an engaging way.\n        </p>\n        <h3>Way Ahead</h3>\n        <p>\n          Team needs to finalize the use case scenarios, incorporate storyline\n          elements and related scoring of tradeoffs.\n        </p>\n      </>\n    ),\n    component: <Pick />,\n  },\n}\n\nconst Container = styled.div`\n  padding: 15px 0 0 15px;\n`\nconst IdeaComponentContainer = styled.div`\n  width: 98%;\n  min-height: 600px;\n  padding: 10px;\n  border-top: 1px solid gray;\n  position: relative;\n`\nconst IdeaSelector = styled.div`\n  display: inline-block;\n  background-color: ${({ selected }) => (selected ? \"slategray\" : \"white\")};\n  color: ${({ selected }) => (selected ? \"white\" : null)};\n  font-size: 1.2rem;\n  border-radius: 20px;\n  border: 1px solid gray;\n  margin: 0 5px 5px 0;\n  padding: 5px 10px;\n  &:hover {\n    box-shadow: 0 0 4px gray;\n    text-shadow: 1px 1px 1px gray;\n  }\n`\nconst IdeaButton = styled.button`\n  background-color: rgba(0, 0, 0, 0);\n  color: inherit;\n  font-size: 1.2rem;\n  border: none;\n  cursor: pointer;\n`\nconst IdeaDescriptionButton = styled.button`\n  background-color: lightgray;\n  border: 1px solid gray;\n  width: 27px;\n  font-size: 1rem;\n  border-radius: 50%;\n  cursor: pointer;\n  &::after {\n    content: \"i\";\n  }\n`\nconst DescriptionExpandCollapseButton = styled.button`\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 18px;\n  height: 100%;\n  border-radius: 0;\n  background-color: lightgray;\n  border: none;\n  cursor: pointer;\n  &::after {\n    content: \"\";\n  }\n`\nconst StyledDescriptionSidePanel = styled.div`\n  position: absolute;\n  top: 10px;\n  left: -15px;\n  height: 90%;\n  width: 350px;\n  border-right: 1px solid lightgray;\n  border-top: 1px solid lightgray;\n  border-bottom: 1px solid lightgray;\n  border-left: none;\n  padding: 15px 25px 15px 15px;\n  background-color: rgba(255, 255, 255, 0.95);\n  transform: ${({ expanded }) =>\n    expanded ? \"translateX(0)\" : \"translateX(-100%)\"};\n  transition: transform 0.3s ease-out;\n`\n\nconst DescriptionPanel = ({ panelRef, expanded, onClose, text }) => (\n  <StyledDescriptionSidePanel expanded={expanded} ref={panelRef}>\n    {expanded ? text : null}\n    <DescriptionExpandCollapseButton\n      expanded={expanded}\n      onClick={() => onClose()}\n    />\n  </StyledDescriptionSidePanel>\n)\n\nconst Ideas = () => {\n  const [selectedIdea, setSelectedIdea] = useState(\"riskScores\")\n  const [selectedDescription, setSelectedDescription] = useState(null)\n  const onClickIdea = (idea) => {\n    setSelectedIdea(idea)\n    if (selectedDescription) setSelectedDescription(idea)\n  }\n  const descriptionPanelRef = useRef(null)\n  const onClickIdeaDescriptionButton = useCallback(\n    (idea) => {\n      setSelectedDescription(idea === selectedDescription ? null : idea)\n      setSelectedIdea(idea)\n    },\n    [selectedDescription]\n  )\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      const ignoreTargets = () =>\n        descriptionPanelRef.current?.contains(event.target) ||\n        (event.target?.className?.includes &&\n          (event.target.className.includes(\"idea-description-button\") ||\n            event.target.className.includes(\"idea-button\")))\n\n      if (!ignoreTargets()) {\n        setSelectedDescription(null)\n      }\n    }\n\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n  return (\n    <Container>\n      <h1 style={{ marginTop: 0 }}>Ideas</h1>\n      <div>\n        {Object.keys(ideas).map((k) => (\n          <IdeaSelector\n            key={`idea-selector-${k}`}\n            selected={k === selectedIdea}\n          >\n            <IdeaButton onClick={() => onClickIdea(k)} className=\"idea-button\">\n              {ideas[k].title}\n            </IdeaButton>\n            <IdeaDescriptionButton\n              className=\"idea-description-button\"\n              idea={k}\n              title={`Click for more information`}\n              onClick={() => onClickIdeaDescriptionButton(k)}\n            />\n          </IdeaSelector>\n        ))}\n      </div>\n      <IdeaComponentContainer>\n        {ideas[selectedIdea].component}\n        <DescriptionPanel\n          panelRef={descriptionPanelRef}\n          expanded={selectedDescription !== null}\n          onClose={() => setSelectedDescription(null)}\n          text={\n            selectedDescription ? ideas[selectedDescription].description : null\n          }\n        />\n      </IdeaComponentContainer>\n    </Container>\n  )\n}\n\nexport default Ideas\n","import { GameContextProvider } from \"../context/GameContext\"\nimport { useState } from \"react\"\nimport { withRouter } from \"react-router-dom\"\nimport styled from \"styled-components\"\nimport { Fab, Action } from \"react-tiny-fab\"\nimport \"react-tiny-fab/dist/styles.css\"\nimport TwentyQuestions from \"../components/game/TwentyQuestions\"\nimport Match from \"../components/game/Match\"\nimport TwentyQuestionsPractice from \"../components/game/TwentyQuestionsPractice\"\nimport Menu from \"../components/game/Menu\"\nimport Story from \"../components/Story\"\nimport Pick from \"../components/pick/Pick\"\nimport Ideas from \"../components/ideas/Ideas\"\nimport { Emoji } from \"../components/game/Util\"\nimport { isDef } from \"../util/misc\"\nimport Modal from \"react-modal\"\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\"\n\nModal.setAppElement(\"#root\")\n\nconst CloseModal = styled.button`\n  position: absolute;\n  top: 5px;\n  right: 0;\n  border: 0;\n  background: none;\n  cursor: pointer;\n`\n\nconst EmailIcon = ({\n  width = 15,\n  height = width * 0.7,\n  color = \"white\",\n  strokeWidth = 2,\n}) => (\n  <svg width={width} height={height}>\n    <g>\n      <rect\n        fill=\"rgba(0,0,0,0)\"\n        height={height}\n        width={width}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        x=\"0\"\n        y=\"0\"\n      />\n      <line\n        stroke={color}\n        strokeWidth={strokeWidth / 2}\n        x1=\"0\"\n        x2={width / 2}\n        y1=\"0\"\n        y2={height * 0.6}\n      />\n      <line\n        stroke={color}\n        strokeWidth={strokeWidth / 2}\n        x1={width}\n        x2={width / 2}\n        y1=\"0\"\n        y2={height * 0.6}\n      />\n    </g>\n  </svg>\n)\n\nconst CloseButton = ({\n  width = 15,\n  height = width,\n  color = \"black\",\n  strokeWidth = 2,\n}) => (\n  <svg width={width} height={height}>\n    <g>\n      <circle\n        fill={color}\n        height={height}\n        width={width}\n        stroke={color}\n        cx={width / 2}\n        cy={height / 2}\n        r={width / 2}\n      />\n      <line\n        stroke=\"white\"\n        strokeWidth={strokeWidth}\n        x1={width / 4}\n        x2={(width / 4) * 3}\n        y1={height / 4}\n        y2={(height / 4) * 3}\n      />\n      <line\n        stroke=\"white\"\n        strokeWidth={strokeWidth}\n        x1={(width / 4) * 3}\n        x2={width / 4}\n        y1={height / 4}\n        y2={(height / 4) * 3}\n      />\n    </g>\n  </svg>\n)\n\nconst MessageUs = () => {\n  const linkStyle = {\n    color: \"white\",\n    fontWeight: \"bold\",\n  }\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        bottom: 10,\n        color: \"white\",\n        width: \"95%\",\n      }}\n    >\n      <h2>Message Us</h2>\n      <p>\n        We hope more people are interested in these kinds of problems. Please\n        message us if you have an operational use case.\n      </p>\n      <hr />\n      <p>\n        Daniel Felps | <EmailIcon />{\" \"}\n        <a href=\"mailto:daniel.l.felps@nga.mil\" style={linkStyle}>\n          daniel.l.felps@nga.mil\n        </a>{\" \"}\n        | <EmailIcon />{\" \"}\n        <a href=\"mailto:daniel.l.felps@coe.ic.gov\" style={linkStyle}>\n          daniel.l.felps@coe.ic.gov\n        </a>\n      </p>\n    </div>\n  )\n}\n\nconst AboutUs = () => {\n  return (\n    <div\n      style={{\n        padding: 10,\n        backgroundColor: \"rgba(100,100,100,0.6)\",\n        borderRadius: 4,\n        border: \"1px solid black\",\n        position: \"absolute\",\n        bottom: 10,\n        right: 10,\n        color: \"white\",\n        width: \"50%\",\n      }}\n    >\n      <h2 style={{ marginTop: 0 }}>Project Guru</h2>\n      <p>What can an adversary learn about our data through our ML models?</p>\n      <p>\n        Understand how model design choices make it easier or harder to attack.\n      </p>\n      <p>\n        Deliver models that have similar utility but mitigate vulnerabilities.\n      </p>\n    </div>\n  )\n}\n\nconst GameModal = withRouter(({ history }) => {\n  const ModalContent = {\n    messageUs: {\n      modalContentStyle: {\n        backgroundImage: \"url(img/mullet.png)\",\n      },\n      content: <MessageUs />,\n    },\n    aboutUs: {\n      modalContentStyle: {\n        backgroundImage: \"url(img/playground.png)\",\n      },\n      content: <AboutUs />,\n    },\n  }\n  const [modalContent, setModalContent] = useState()\n  const returnToMenu = () => {\n    if (window.location.hash === \"#/\") {\n      // Already on the main page, scroll up to the menu\n      window.scrollTo({ top: 0, left: 0, behavior: \"auto\" })\n    } else {\n      history.push(\"/\")\n    }\n  }\n\n  const dimensions = {\n    height: 510,\n    width: 900,\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isDef(modalContent)}\n        onRequestClose={() => setModalContent(null)}\n        style={{\n          overlay: {\n            backgroundColor: \"#ededed\",\n          },\n          content: {\n            position: \"fixed\",\n            top: \"50%\",\n            left: \"50%\",\n            bottom: null,\n            right: null,\n            transform: \"translate(-50%, -50%)\",\n            height: dimensions.height * 0.75,\n            width: dimensions.width * 0.75,\n            minHeight: dimensions.height * 0.75,\n            minWidth: dimensions.width * 0.75,\n            backgroundSize: \"cover\",\n            backgroundRepeat: \"no-repeat\",\n            backgroundPosition: \"center center\",\n            ...ModalContent[modalContent]?.modalContentStyle,\n          },\n        }}\n      >\n        {ModalContent[modalContent]?.content}\n        <CloseModal onClick={() => setModalContent(null)}>\n          <CloseButton color=\"black\" isSelected={true} />\n        </CloseModal>\n      </Modal>\n      <Fab\n        alwaysShowTitle={true}\n        mainButtonStyles={{ backgroundColor: \"slategray\" }}\n        icon=\". . .\"\n      >\n        <Action text=\"Back to Game Menu\" onClick={returnToMenu}>\n          <Emoji symbol=\"0x21A9\" />\n        </Action>\n        <Action text=\"Contact\" onClick={() => setModalContent(\"messageUs\")}>\n          <EmailIcon />\n        </Action>\n        <Action text=\"Ideas\" onClick={() => history.push(\"/ideas\")}>\n          ?\n        </Action>\n        <Action text=\"About\" onClick={() => setModalContent(\"aboutUs\")}>\n          i\n        </Action>\n      </Fab>\n    </>\n  )\n})\n\nconst GameView = () => {\n  return (\n    <GameContextProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/20q/learn\">\n            <TwentyQuestionsPractice />\n          </Route>\n          <Route path=\"/20q/easy\">\n            <TwentyQuestions gameMode=\"easy\" />\n          </Route>\n          <Route path=\"/20q/hard\">\n            <TwentyQuestions gameMode=\"hard\" />\n          </Route>\n          <Route path=\"/match/learn\">\n            <Match gameMode=\"learn\" />\n          </Route>\n          <Route path=\"/match/easy\">\n            <Match gameMode=\"easy\" />\n          </Route>\n          <Route path=\"/match/hard\">\n            <Match gameMode=\"hard\" />\n          </Route>\n          <Route path=\"/pick\">\n            <Pick />\n          </Route>\n          <Route path=\"/ideas\">\n            <Ideas />\n          </Route>\n          <Route path=\"/\">\n            <Menu />\n            <Story />\n          </Route>\n        </Switch>\n        <GameModal />\n      </Router>\n    </GameContextProvider>\n  )\n}\n\nexport default GameView\n","import \"./App.css\"\n// import PickView from \"./views/PickView\"\nimport GameView from \"./views/GameView\"\nimport ReactTooltip from \"react-tooltip\"\n\nconst App = () => {\n  return (\n    <>\n      <GameView />\n      <ReactTooltip effect=\"solid\" />\n    </>\n    // <PickView />\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\nimport \"./index.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}